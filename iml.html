<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="David Josephs" />

<meta name="date" content="2019-12-11" />

<title>Interpretable Machine Learning Part 1</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">David Does Data</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Nix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="nix.html">Nix for Data Science 1</a>
    </li>
    <li>
      <a href="advancedNix.html">Nix for Data Science 2: COMING SOON</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    IML
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="iml.html">Interpretable Machine Learning: Part 1</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Time Series
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="tsEDA.html">Time Series EDA</a>
    </li>
    <li>
      <a href="tspreprocessing.html">Time Series Cleaning</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/josephsdavid">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/Daved256">
    <span class="ion ion-social-twitter"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Interpretable Machine Learning Part 1</h1>
<h4 class="author">David Josephs</h4>
<h4 class="date">2019-12-11</h4>

</div>


<script type="text/javascript">
 $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show Source</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show Output</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show Plot</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});

</script>
<p>In this blog post, we are going to talk about a few tools for interpretable machine learning. I believe the importance of the subject is rather clear, as we can not only use it to help mitigate and deploying biased models, but also to help us remain relevant should autoML take off in the next 10 years. We will go over the tools in order of (in my opinion) increasing utility, starting with simple Permutation Importance, then PDPs and ICE, and finally ALE.</p>
<div id="permutation-importance-math-and-intuition" class="section level1">
<h1>Permutation Importance: Math and Intuition</h1>
<p>Everyone loves tree based models. Gradient boosting, random forests, and friends are wonderful, flexible tools. One of the other benefits of these models, because of their tree-ness, is that we are able to actually see how “important” each variable is in the decisions the model is making. This is also one of many many reasons why we love linear models, we can actually see and quantify the strength of a feature in our model. However, why must we limit ourselves to just linear and tree based models?</p>
<p>Lets try and think of a new approach to get variable importance. When I was first really getting into ML, I remember asking one of my professors the question: “How much time do you spend on feature engineering?”. I will never forget his answer, he told me: “Feature engineering [is] the most crucial part to improve both accuracy and model generation. If you have an unneccessary feature in the model, you are in essence fitting noise.”. This has stuck with me for a long time, and it is a useful thing to keep in mind while discussing permutation importance.</p>
<p>If unneccessary features just provide noise which decreases model accuracy and generalization, what happens if we replace a good feature with noise? Our model should be inherently worse, no? This is the key idea of permutation importance.</p>
<blockquote>
<p>If I replace a feature with noise, how much worse does the model perform?</p>
</blockquote>
<p>This is the key idea of permutation based variable importance. All we are going to do to calculate this is three simple steps:</p>
<ol style="list-style-type: decimal">
<li><p>Calculate prediction loss</p></li>
<li><p>Replace a feature with noise</p></li>
<li><p>Recalculate prediction loss</p></li>
<li><p>Compare</p></li>
</ol>
<div id="formalization" class="section level2">
<h2>Formalization</h2>
<p>Lets formulate permutation importance mathematically now! First, lets define our data as the set <span class="math inline">\(x\)</span>, with <span class="math inline">\(m\)</span> observations and <span class="math inline">\(n\)</span> features. Next, lets consider two sets within <span class="math inline">\(x\)</span>: <span class="math inline">\(x_s\)</span> and <span class="math inline">\(x_c\)</span>. <span class="math inline">\(x_s\)</span> represents the feature(s) we are interested in, and <span class="math inline">\(x_c\)</span> represents the complement of <span class="math inline">\(x_s\)</span> (in english, everything else). Thus:</p>
<p><span class="math display">\[x = (x_s, x_c)\]</span></p>
<p>Lets first define the original loss with the original features as <span class="math inline">\(\mathcal{L}\)</span>,</p>
<p><span class="math display">\[
\mathcal{L} = \mathrm{loss}\left(x_s, x_c \right) 
\]</span></p>
<p>Next, we need to replace <span class="math inline">\(x_s\)</span> with noise. To do that, we want to sample the <em>marginal distribtion</em> of <span class="math inline">\(x_s\)</span>. This means we want to sample the distribution of <span class="math inline">\(x_s\)</span> <em>independent of other features</em>. With a reasonably sized dataset, we can just do a permutation of <span class="math inline">\(x_s\)</span> for more or less the same result. We will denote the permutation of <span class="math inline">\(x_s\)</span> as <span class="math inline">\(x_s^*\)</span>. Next, lets define the loss, <span class="math inline">\(\mathcal{L}*\)</span> of the permuted feature: <span class="math display">\[
\mathcal{L}* = \mathrm{loss}\left(x_s^*, x_c \right)
\]</span></p>
<p>Finally, we can calculate the variable importance of <span class="math inline">\(x_s\)</span>:</p>
<p><span class="math display">\[
VIP_{\mathrm{perm}}(x_s) = \frac{\mathcal{L}*}{\mathcal{L}}
\]</span></p>
<p>There we go! Its that simple! An addendum to this suggested by Jeremy Howard of fast.ai: Add a feature of pure noise and see how important that is, for reference.</p>
</div>
<div id="code-implementation" class="section level2 tabset tabset-pills">
<h2>Code Implementation</h2>
<p>For our data, we will use the dataset discussed in <a href="https://medium.com/towards-artificial-intelligence/training-a-machine-learning-model-on-a-dataset-with-highly-correlated-features-debddf5b2e34">Benjamin Tayo’s amazing blog post</a>. We use this dataset because it presents a large challenge to us, with highly correlated features. This will show some of the pitfalls of some of our techniques.</p>
<p>The goal with this dataset is to predict the number of crew members which will be on a cruise ship, given some paramters describing the ship. I believe the independent variables are fairly self explanatory. First, lets read the data into python and do a train test split:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsRegressor</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> load_boston, fetch_california_housing</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error <span class="im">as</span> loss_mse</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="im">import</span> math</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="im">import</span> statistics <span class="im">as</span> stats</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="im">import</span> matplotlib.cm <span class="im">as</span> cm</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="im">from</span> pprint <span class="im">import</span> pprint</span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co"># so this is readable:</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="im">import</span> warnings</span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="im">from</span> sklearn.exceptions <span class="im">import</span> DataConversionWarning, ConvergenceWarning</span>
<span id="cb1-18"><a href="#cb1-18"></a>warnings.filterwarnings(action<span class="op">=</span><span class="st">&#39;ignore&#39;</span>, category<span class="op">=</span>DataConversionWarning)</span>
<span id="cb1-19"><a href="#cb1-19"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">&#39;ignore&#39;</span>, category<span class="op">=</span><span class="pp">FutureWarning</span>)</span>
<span id="cb1-20"><a href="#cb1-20"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">&#39;ignore&#39;</span>, category<span class="op">=</span>ConvergenceWarning)</span>
<span id="cb1-21"><a href="#cb1-21"></a>cruise <span class="op">=</span> pd.read_csv(<span class="st">&quot;https://github.com/bot13956/ML_Model_for_Predicting_Ships_Crew_Size/raw/master/cruise_ship_info.csv&quot;</span>)</span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a>X <span class="op">=</span> cruise.loc[:, cruise.columns <span class="op">!=</span> <span class="st">&quot;crew&quot;</span>]</span>
<span id="cb1-25"><a href="#cb1-25"></a>X <span class="op">=</span> X.loc[:, X.columns <span class="op">!=</span> <span class="st">&quot;Ship_name&quot;</span>]</span>
<span id="cb1-26"><a href="#cb1-26"></a>X <span class="op">=</span> X.loc[:, X.columns <span class="op">!=</span> <span class="st">&quot;Cruise_line&quot;</span>]</span>
<span id="cb1-27"><a href="#cb1-27"></a>y <span class="op">=</span> cruise.loc[:, cruise.columns <span class="op">==</span> <span class="st">&quot;crew&quot;</span>]</span>
<span id="cb1-28"><a href="#cb1-28"></a></span>
<span id="cb1-29"><a href="#cb1-29"></a></span>
<span id="cb1-30"><a href="#cb1-30"></a><span class="kw">def</span> split(df, p_train <span class="op">=</span> <span class="fl">0.75</span>, random_state <span class="op">=</span> <span class="dv">0</span>):</span>
<span id="cb1-31"><a href="#cb1-31"></a>    train <span class="op">=</span> df.sample(frac <span class="op">=</span> p_train, random_state <span class="op">=</span> random_state)</span>
<span id="cb1-32"><a href="#cb1-32"></a>    test <span class="op">=</span> df.drop(train.index)</span>
<span id="cb1-33"><a href="#cb1-33"></a>    <span class="cf">return</span>(train, test)</span>
<span id="cb1-34"><a href="#cb1-34"></a></span>
<span id="cb1-35"><a href="#cb1-35"></a>(X_train, X_test), (y_train, y_test) <span class="op">=</span> (split(x) <span class="cf">for</span> x <span class="kw">in</span> [X, y])</span></code></pre></div>
<p>Next, lets use the amazing <code>reticulate</code> package to pass these exact data frames into R:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>X &lt;-<span class="st"> </span>py<span class="op">$</span>X</span>
<span id="cb2-2"><a href="#cb2-2"></a>y &lt;-<span class="st"> </span>py<span class="op">$</span>y</span>
<span id="cb2-3"><a href="#cb2-3"></a>X_train &lt;-<span class="st"> </span>py<span class="op">$</span>X_train</span>
<span id="cb2-4"><a href="#cb2-4"></a>X_test &lt;-<span class="st"> </span>py<span class="op">$</span>X_test</span>
<span id="cb2-5"><a href="#cb2-5"></a>y_train &lt;-<span class="st"> </span>py<span class="op">$</span>y_train</span>
<span id="cb2-6"><a href="#cb2-6"></a>y_test &lt;-<span class="st"> </span>py<span class="op">$</span>y_test</span>
<span id="cb2-7"><a href="#cb2-7"></a>X</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Age"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Tonnage"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["passengers"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["length"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["cabins"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["passenger_density"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"6","2":"30.277","3":"6.94","4":"5.94","5":"3.55","6":"42.64"},{"1":"6","2":"30.277","3":"6.94","4":"5.94","5":"3.55","6":"42.64"},{"1":"26","2":"47.262","3":"14.86","4":"7.22","5":"7.43","6":"31.80"},{"1":"11","2":"110.000","3":"29.74","4":"9.53","5":"14.88","6":"36.99"},{"1":"17","2":"101.353","3":"26.42","4":"8.92","5":"13.21","6":"38.36"},{"1":"22","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"15","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"23","2":"70.367","3":"20.56","4":"8.55","5":"10.22","6":"34.23"},{"1":"19","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"6","2":"110.239","3":"37.00","4":"9.51","5":"14.87","6":"29.79"},{"1":"10","2":"110.000","3":"29.74","4":"9.51","5":"14.87","6":"36.99"},{"1":"28","2":"46.052","3":"14.52","4":"7.27","5":"7.26","6":"31.72"},{"1":"18","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"17","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"11","2":"86.000","3":"21.24","4":"9.63","5":"10.62","6":"40.49"},{"1":"8","2":"110.000","3":"29.74","4":"9.51","5":"14.87","6":"36.99"},{"1":"9","2":"88.500","3":"21.24","4":"9.63","5":"10.62","6":"41.67"},{"1":"15","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"12","2":"88.500","3":"21.24","4":"9.63","5":"11.62","6":"41.67"},{"1":"20","2":"70.367","3":"20.52","4":"8.55","5":"10.20","6":"34.29"},{"1":"12","2":"88.500","3":"21.24","4":"9.63","5":"10.56","6":"41.67"},{"1":"14","2":"101.509","3":"27.58","4":"8.93","5":"13.21","6":"36.81"},{"1":"9","2":"110.000","3":"29.74","4":"9.52","5":"14.87","6":"36.99"},{"1":"13","2":"101.509","3":"27.58","4":"8.93","5":"13.79","6":"36.81"},{"1":"18","2":"70.606","3":"17.70","4":"8.15","5":"8.75","6":"39.89"},{"1":"11","2":"91.000","3":"20.32","4":"9.65","5":"9.75","6":"44.78"},{"1":"17","2":"77.713","3":"18.90","4":"8.66","5":"9.35","6":"41.12"},{"1":"12","2":"91.000","3":"20.32","4":"9.65","5":"9.75","6":"44.78"},{"1":"16","2":"77.713","3":"18.82","4":"8.66","5":"9.35","6":"41.29"},{"1":"13","2":"91.000","3":"20.32","4":"9.65","5":"9.75","6":"44.78"},{"1":"5","2":"122.000","3":"28.50","4":"10.33","5":"6.87","6":"34.57"},{"1":"12","2":"91.000","3":"20.32","4":"9.65","5":"9.75","6":"44.78"},{"1":"12","2":"2.329","3":"0.94","4":"2.96","5":"0.45","6":"24.78"},{"1":"21","2":"47.225","3":"13.66","4":"6.82","5":"6.87","6":"34.57"},{"1":"21","2":"28.430","3":"8.08","4":"6.16","5":"4.10","6":"35.19"},{"1":"13","2":"85.619","3":"21.14","4":"9.57","5":"10.56","6":"40.50"},{"1":"22","2":"52.926","3":"13.02","4":"7.18","5":"6.54","6":"40.65"},{"1":"27","2":"53.872","3":"14.94","4":"7.98","5":"7.67","6":"36.06"},{"1":"10","2":"105.000","3":"27.20","4":"8.90","5":"13.56","6":"38.60"},{"1":"9","2":"105.000","3":"27.20","4":"8.90","5":"13.56","6":"38.60"},{"1":"23","2":"25.000","3":"7.76","4":"6.22","5":"3.86","6":"32.22"},{"1":"10","2":"86.000","3":"21.14","4":"9.60","5":"10.56","6":"40.68"},{"1":"20","2":"53.049","3":"13.44","4":"7.22","5":"6.78","6":"39.47"},{"1":"6","2":"112.000","3":"38.00","4":"9.51","5":"15.00","6":"29.47"},{"1":"17","2":"75.166","3":"19.28","4":"8.28","5":"9.64","6":"38.99"},{"1":"10","2":"68.000","3":"10.80","4":"7.90","5":"5.50","6":"62.96"},{"1":"18","2":"51.004","3":"9.40","4":"7.81","5":"4.80","6":"54.26"},{"1":"44","2":"70.327","3":"17.91","4":"9.63","5":"9.50","6":"39.27"},{"1":"10","2":"151.400","3":"26.20","4":"11.32","5":"11.34","6":"57.79"},{"1":"6","2":"90.000","3":"20.00","4":"9.64","5":"10.29","6":"45.00"},{"1":"15","2":"83.338","3":"17.50","4":"9.64","5":"8.75","6":"47.62"},{"1":"14","2":"83.000","3":"17.50","4":"9.64","5":"8.75","6":"47.43"},{"1":"13","2":"61.000","3":"13.80","4":"7.80","5":"6.88","6":"44.20"},{"1":"5","2":"86.000","3":"21.04","4":"9.36","5":"10.22","6":"40.87"},{"1":"20","2":"55.451","3":"12.64","4":"7.19","5":"6.32","6":"43.87"},{"1":"29","2":"33.920","3":"12.14","4":"7.04","5":"6.07","6":"27.94"},{"1":"10","2":"81.769","3":"18.48","4":"9.59","5":"9.24","6":"44.25"},{"1":"25","2":"38.000","3":"7.49","4":"6.74","5":"3.96","6":"50.73"},{"1":"16","2":"59.652","3":"13.20","4":"7.77","5":"6.60","6":"45.19"},{"1":"19","2":"55.451","3":"12.66","4":"7.19","5":"6.33","6":"43.80"},{"1":"20","2":"55.451","3":"12.66","4":"7.19","5":"6.33","6":"43.80"},{"1":"17","2":"55.451","3":"12.66","4":"7.19","5":"6.33","6":"43.80"},{"1":"14","2":"63.000","3":"14.40","4":"7.77","5":"7.20","6":"43.75"},{"1":"27","2":"53.872","3":"14.94","4":"7.98","5":"7.47","6":"36.06"},{"1":"13","2":"63.000","3":"14.40","4":"7.77","5":"7.20","6":"43.75"},{"1":"11","2":"85.000","3":"18.48","4":"9.51","5":"9.24","6":"46.00"},{"1":"12","2":"58.600","3":"15.66","4":"8.24","5":"7.83","6":"37.42"},{"1":"5","2":"133.500","3":"39.59","4":"10.93","5":"16.37","6":"33.72"},{"1":"10","2":"58.825","3":"15.60","4":"8.23","5":"7.65","6":"37.71"},{"1":"31","2":"35.143","3":"12.50","4":"6.69","5":"5.32","6":"28.11"},{"1":"7","2":"89.600","3":"25.50","4":"9.61","5":"12.75","6":"35.14"},{"1":"9","2":"59.058","3":"17.00","4":"7.63","5":"8.50","6":"34.74"},{"1":"36","2":"16.852","3":"9.52","4":"5.41","5":"3.83","6":"17.70"},{"1":"11","2":"58.600","3":"15.66","4":"8.23","5":"7.83","6":"37.42"},{"1":"25","2":"34.250","3":"10.52","4":"6.15","5":"5.26","6":"32.56"},{"1":"11","2":"90.000","3":"22.40","4":"9.65","5":"11.20","6":"40.18"},{"1":"21","2":"50.760","3":"17.48","4":"7.54","5":"8.74","6":"29.04"},{"1":"6","2":"93.000","3":"23.94","4":"9.65","5":"11.97","6":"38.85"},{"1":"8","2":"91.000","3":"22.44","4":"9.65","5":"11.22","6":"40.55"},{"1":"21","2":"38.000","3":"10.56","4":"5.67","5":"5.28","6":"35.98"},{"1":"14","2":"77.104","3":"20.02","4":"8.53","5":"10.01","6":"38.51"},{"1":"9","2":"81.000","3":"21.44","4":"9.21","5":"10.72","6":"37.78"},{"1":"25","2":"42.000","3":"15.04","4":"7.08","5":"7.52","6":"27.93"},{"1":"15","2":"75.338","3":"19.56","4":"8.79","5":"9.83","6":"38.52"},{"1":"40","2":"28.000","3":"11.50","4":"6.74","5":"4.00","6":"24.35"},{"1":"12","2":"77.104","3":"20.02","4":"8.53","5":"10.01","6":"38.51"},{"1":"20","2":"50.760","3":"17.48","4":"7.54","5":"8.74","6":"29.04"},{"1":"15","2":"30.277","3":"6.84","4":"5.94","5":"3.42","6":"44.26"},{"1":"13","2":"30.277","3":"6.84","4":"5.94","5":"3.42","6":"44.26"},{"1":"15","2":"30.277","3":"6.84","4":"5.94","5":"3.42","6":"44.26"},{"1":"48","2":"22.080","3":"8.26","4":"5.78","5":"4.25","6":"26.73"},{"1":"9","2":"85.000","3":"19.68","4":"9.35","5":"9.84","6":"43.19"},{"1":"29","2":"45.000","3":"11.78","4":"7.54","5":"5.30","6":"38.20"},{"1":"13","2":"76.000","3":"18.74","4":"8.86","5":"9.39","6":"40.55"},{"1":"10","2":"77.000","3":"20.16","4":"8.56","5":"9.75","6":"38.19"},{"1":"18","2":"69.153","3":"18.82","4":"8.53","5":"9.14","6":"36.74"},{"1":"5","2":"115.000","3":"35.74","4":"9.00","5":"15.32","6":"32.18"},{"1":"9","2":"116.000","3":"26.00","4":"9.51","5":"13.00","6":"44.62"},{"1":"11","2":"91.627","3":"19.74","4":"9.64","5":"9.87","6":"46.42"},{"1":"7","2":"116.000","3":"31.00","4":"9.51","5":"15.57","6":"37.42"},{"1":"16","2":"77.499","3":"19.50","4":"8.56","5":"10.50","6":"39.74"},{"1":"9","2":"113.000","3":"26.74","4":"9.51","5":"13.37","6":"42.26"},{"1":"6","2":"113.000","3":"37.82","4":"9.51","5":"15.57","6":"29.88"},{"1":"12","2":"108.865","3":"27.58","4":"9.51","5":"13.00","6":"39.47"},{"1":"15","2":"108.806","3":"26.00","4":"9.51","5":"13.00","6":"41.85"},{"1":"10","2":"91.627","3":"19.74","4":"9.64","5":"9.87","6":"46.42"},{"1":"14","2":"30.277","3":"6.86","4":"5.93","5":"3.44","6":"44.14"},{"1":"22","2":"69.845","3":"15.90","4":"8.03","5":"7.95","6":"43.93"},{"1":"29","2":"44.348","3":"12.00","4":"7.54","5":"6.00","6":"36.96"},{"1":"9","2":"113.000","3":"26.74","4":"9.51","5":"13.37","6":"42.26"},{"1":"8","2":"77.499","3":"19.50","4":"8.56","5":"9.75","6":"39.74"},{"1":"11","2":"108.977","3":"26.02","4":"9.51","5":"13.01","6":"41.88"},{"1":"18","2":"77.499","3":"19.50","4":"8.56","5":"9.75","6":"39.74"},{"1":"14","2":"30.277","3":"6.88","4":"5.93","5":"3.44","6":"44.01"},{"1":"27","2":"12.500","3":"3.94","4":"4.36","5":"0.88","6":"31.73"},{"1":"12","2":"50.000","3":"7.00","4":"7.09","5":"3.54","6":"71.43"},{"1":"14","2":"33.000","3":"4.90","4":"5.60","5":"2.45","6":"67.35"},{"1":"16","2":"19.200","3":"3.20","4":"5.13","5":"1.60","6":"60.00"},{"1":"10","2":"46.000","3":"7.00","4":"6.70","5":"1.82","6":"65.71"},{"1":"12","2":"138.000","3":"31.14","4":"10.20","5":"15.57","6":"44.32"},{"1":"11","2":"90.090","3":"25.01","4":"9.62","5":"10.50","6":"36.02"},{"1":"23","2":"48.563","3":"20.20","4":"6.92","5":"8.00","6":"24.04"},{"1":"16","2":"74.137","3":"19.50","4":"9.16","5":"9.75","6":"38.02"},{"1":"13","2":"138.000","3":"31.14","4":"10.20","5":"15.57","6":"44.32"},{"1":"7","2":"158.000","3":"43.70","4":"11.12","5":"18.00","6":"36.16"},{"1":"17","2":"74.137","3":"19.50","4":"9.16","5":"9.75","6":"38.02"},{"1":"5","2":"160.000","3":"36.34","4":"11.12","5":"18.17","6":"44.03"},{"1":"9","2":"90.090","3":"25.01","4":"9.62","5":"10.94","6":"36.02"},{"1":"18","2":"70.000","3":"18.00","4":"8.67","5":"9.00","6":"38.89"},{"1":"6","2":"158.000","3":"43.70","4":"11.25","5":"18.00","6":"36.16"},{"1":"21","2":"73.941","3":"27.44","4":"8.80","5":"11.75","6":"26.95"},{"1":"10","2":"138.000","3":"31.14","4":"10.20","5":"15.57","6":"44.32"},{"1":"22","2":"73.941","3":"27.44","4":"8.80","5":"11.77","6":"30.94"},{"1":"11","2":"138.000","3":"31.14","4":"10.20","5":"15.57","6":"44.32"},{"1":"4","2":"220.000","3":"54.00","4":"11.82","5":"27.00","6":"40.74"},{"1":"12","2":"90.090","3":"25.01","4":"9.62","5":"10.50","6":"36.02"},{"1":"16","2":"78.491","3":"24.35","4":"9.15","5":"10.00","6":"32.23"},{"1":"10","2":"90.090","3":"25.01","4":"9.62","5":"10.50","6":"36.02"},{"1":"25","2":"73.192","3":"28.52","4":"8.80","5":"11.38","6":"25.66"},{"1":"17","2":"70.000","3":"20.76","4":"8.67","5":"9.02","6":"33.72"},{"1":"15","2":"78.491","3":"24.35","4":"9.15","5":"10.00","6":"32.23"},{"1":"14","2":"138.000","3":"31.14","4":"10.20","5":"15.57","6":"44.32"},{"1":"21","2":"10.000","3":"2.08","4":"4.40","5":"1.04","6":"48.08"},{"1":"27","2":"10.000","3":"2.08","4":"4.40","5":"1.04","6":"48.08"},{"1":"24","2":"10.000","3":"2.08","4":"4.40","5":"1.04","6":"48.08"},{"1":"19","2":"16.800","3":"2.96","4":"5.14","5":"1.48","6":"56.76"},{"1":"13","2":"25.000","3":"3.82","4":"5.97","5":"1.94","6":"65.45"},{"1":"12","2":"25.000","3":"3.88","4":"5.97","5":"1.94","6":"64.43"},{"1":"19","2":"16.800","3":"2.96","4":"5.14","5":"1.48","6":"56.76"},{"1":"22","2":"3.341","3":"0.66","4":"2.80","5":"0.33","6":"50.62"},{"1":"21","2":"19.093","3":"8.00","4":"5.37","5":"4.00","6":"23.87"},{"1":"12","2":"42.000","3":"14.80","4":"7.13","5":"7.40","6":"28.38"},{"1":"24","2":"40.053","3":"12.87","4":"5.79","5":"7.76","6":"31.12"},{"1":"22","2":"3.341","3":"0.66","4":"2.79","5":"0.33","6":"50.62"},{"1":"14","2":"76.800","3":"19.60","4":"8.79","5":"9.67","6":"39.18"},{"1":"25","2":"5.350","3":"1.58","4":"4.40","5":"0.74","6":"33.86"},{"1":"27","2":"5.350","3":"1.67","4":"4.40","5":"0.74","6":"32.04"},{"1":"23","2":"14.745","3":"3.08","4":"6.17","5":"1.56","6":"47.87"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now we are all set up to implement permutation importance in python and in R</p>
<p><br><br><br> (<strong><em>Click tabs below to change language!</em></strong>)</p>
<div id="in-python" class="section level3">
<h3>In Python</h3>
<p>First, lets set up three models to test: A linear model, a neural network, and a random forest:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>lm <span class="op">=</span> LinearRegression()</span>
<span id="cb3-2"><a href="#cb3-2"></a>knn <span class="op">=</span> KNeighborsRegressor(<span class="dv">13</span>) </span>
<span id="cb3-3"><a href="#cb3-3"></a>rf <span class="op">=</span> RandomForestRegressor(n_estimators <span class="op">=</span> <span class="dv">100</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>models <span class="op">=</span> [lm, knn, rf]</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="cf">for</span> m <span class="kw">in</span> models:</span>
<span id="cb3-8"><a href="#cb3-8"></a>  m.fit(X_train, y_train)</span></code></pre></div>
<pre><code>#&gt; LinearRegression(copy_X=True, fit_intercept=True, n_jobs=None, normalize=False)
#&gt; KNeighborsRegressor(algorithm=&#39;auto&#39;, leaf_size=30, metric=&#39;minkowski&#39;,
#&gt;                     metric_params=None, n_jobs=None, n_neighbors=13, p=2,
#&gt;                     weights=&#39;uniform&#39;)
#&gt; RandomForestRegressor(bootstrap=True, criterion=&#39;mse&#39;, max_depth=None,
#&gt;                       max_features=&#39;auto&#39;, max_leaf_nodes=None,
#&gt;                       min_impurity_decrease=0.0, min_impurity_split=None,
#&gt;                       min_samples_leaf=1, min_samples_split=2,
#&gt;                       min_weight_fraction_leaf=0.0, n_estimators=100,
#&gt;                       n_jobs=None, oob_score=False, random_state=None,
#&gt;                       verbose=0, warm_start=False)</code></pre>
<p>Lets check out as a baseline truth which features are important in the random forest, and the strength of the predictors in our linear regression:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>pprint(<span class="bu">dict</span>(<span class="bu">zip</span>(X_train.columns, rf.feature_importances_)))</span></code></pre></div>
<pre><code>#&gt; {&#39;Age&#39;: 0.016951359954295687,
#&gt;  &#39;Tonnage&#39;: 0.42183810720505677,
#&gt;  &#39;cabins&#39;: 0.4134271915876477,
#&gt;  &#39;length&#39;: 0.07045804232741502,
#&gt;  &#39;passenger_density&#39;: 0.012172173462803628,
#&gt;  &#39;passengers&#39;: 0.06515312546278128}</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>pprint({X_train.columns[i]: lm.coef_[:,i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(lm.coef_.shape[<span class="dv">1</span>])})</span></code></pre></div>
<pre><code>#&gt; {&#39;Age&#39;: array([-0.01321228]),
#&gt;  &#39;Tonnage&#39;: array([0.00316145]),
#&gt;  &#39;cabins&#39;: array([0.79858261]),
#&gt;  &#39;length&#39;: array([0.39111394]),
#&gt;  &#39;passenger_density&#39;: array([0.01037499]),
#&gt;  &#39;passengers&#39;: array([-0.1045376])}</code></pre>
<p>Looks like tonnage and cabins are the most important variables for the random forest, and cabins, length, and passengers for linear regression.</p>
<p>Next, lets create a function for permutation importance! This should be pretty easy to do, I have added in a few extra components for thoroughness, but the code is not hard:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">def</span> permutation_importance(model, x, y, loss, base <span class="op">=</span> <span class="va">False</span>, x_train <span class="op">=</span> <span class="va">None</span>, y_train <span class="op">=</span> <span class="va">None</span>, kind <span class="op">=</span> <span class="st">&quot;prop&quot;</span>, n_rounds <span class="op">=</span> <span class="dv">5</span>):</span>
<span id="cb9-2"><a href="#cb9-2"></a>    explan <span class="op">=</span> x.columns</span>
<span id="cb9-3"><a href="#cb9-3"></a>    baseline <span class="op">=</span> loss(y, model.predict(x))</span>
<span id="cb9-4"><a href="#cb9-4"></a>    res <span class="op">=</span> {k:[] <span class="cf">for</span> k <span class="kw">in</span> explan}</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="cf">if</span> (base <span class="kw">is</span> <span class="va">True</span>):</span>
<span id="cb9-6"><a href="#cb9-6"></a>        res[<span class="st">&quot;baseline&quot;</span>] <span class="op">=</span> []</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, n_rounds):</span>
<span id="cb9-8"><a href="#cb9-8"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(explan)):</span>
<span id="cb9-9"><a href="#cb9-9"></a>            col <span class="op">=</span> explan[i]</span>
<span id="cb9-10"><a href="#cb9-10"></a>            x_temp <span class="op">=</span> x.copy()</span>
<span id="cb9-11"><a href="#cb9-11"></a>            x_temp[col] <span class="op">=</span>  np.random.permutation(x_temp[col])</span>
<span id="cb9-12"><a href="#cb9-12"></a>            <span class="cf">if</span> (kind <span class="kw">is</span> <span class="kw">not</span> <span class="st">&quot;prop&quot;</span>):</span>
<span id="cb9-13"><a href="#cb9-13"></a>                res[col].append(loss(y, model.predict(x_temp)) <span class="op">-</span>  baseline)</span>
<span id="cb9-14"><a href="#cb9-14"></a>            <span class="cf">else</span>:</span>
<span id="cb9-15"><a href="#cb9-15"></a>                res[col].append(loss(y, model.predict(x_temp)) <span class="op">/</span>  baseline)</span>
<span id="cb9-16"><a href="#cb9-16"></a>        <span class="cf">if</span> (base <span class="kw">is</span> <span class="va">True</span>):</span>
<span id="cb9-17"><a href="#cb9-17"></a>            x_temp <span class="op">=</span> x.copy()</span>
<span id="cb9-18"><a href="#cb9-18"></a>            x_train2 <span class="op">=</span> x_train.copy()</span>
<span id="cb9-19"><a href="#cb9-19"></a>            x_temp[<span class="st">&quot;baseline&quot;</span>] <span class="op">=</span> np.clip(np.random.normal(size <span class="op">=</span> <span class="bu">len</span>(x_temp)), <span class="fl">-1.</span>, <span class="fl">1.</span>)</span>
<span id="cb9-20"><a href="#cb9-20"></a>            x_train2[<span class="st">&quot;baseline&quot;</span>] <span class="op">=</span> np.clip(np.random.normal(size <span class="op">=</span> <span class="bu">len</span>(x_train2)), <span class="fl">-1.</span>, <span class="fl">1.</span>)</span>
<span id="cb9-21"><a href="#cb9-21"></a>            mod2 <span class="op">=</span> <span class="bu">type</span>(model)()</span>
<span id="cb9-22"><a href="#cb9-22"></a>            mod2.fit(x_train2, y_train)</span>
<span id="cb9-23"><a href="#cb9-23"></a>            <span class="cf">if</span> (kind <span class="kw">is</span> <span class="kw">not</span> <span class="st">&quot;prop&quot;</span>):</span>
<span id="cb9-24"><a href="#cb9-24"></a>                res[<span class="st">&quot;baseline&quot;</span>].append(loss(y, mod2.predict(x_temp)) <span class="op">-</span>  baseline)</span>
<span id="cb9-25"><a href="#cb9-25"></a>            <span class="cf">else</span>:</span>
<span id="cb9-26"><a href="#cb9-26"></a>                res[<span class="st">&quot;baseline&quot;</span>].append(loss(y, mod2.predict(x_temp)) <span class="op">/</span>  baseline)</span>
<span id="cb9-27"><a href="#cb9-27"></a>    <span class="cf">return</span>(pd.DataFrame.from_dict(res))</span></code></pre></div>
<p>Lets also define a helper function to help us do this for all our models, and then go ahead and calculate the importances!</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># convert object name to string!</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">def</span> get_name(obj):</span>
<span id="cb10-3"><a href="#cb10-3"></a>    name <span class="op">=</span>[x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">globals</span>() <span class="cf">if</span> <span class="bu">globals</span>()[x] <span class="kw">is</span> obj][<span class="dv">0</span>]</span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="cf">return</span>(name)</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a>imps <span class="op">=</span> {}</span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="cf">for</span> m <span class="kw">in</span> models:</span>
<span id="cb10-8"><a href="#cb10-8"></a>    imps[get_name(m)] <span class="op">=</span> permutation_importance(m, X_test, y_test, loss_mse, <span class="va">True</span>,  X_train, y_train, n_rounds <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb10-9"><a href="#cb10-9"></a>pprint(imps)</span></code></pre></div>
<pre><code>#&gt; {&#39;knn&#39;:         Age    Tonnage  passengers  ...    cabins  passenger_density  baseline
#&gt; 0  0.879999  15.506484    1.422837  ...  0.975821           1.381118  1.303197
#&gt; 1  0.945280  21.285079    1.229981  ...  0.934257           1.301845  1.320942
#&gt; 2  0.959427  17.586625    1.132211  ...  0.982182           1.277204  1.305954
#&gt; 3  0.982547  14.513483    1.263881  ...  0.989961           1.514047  1.441943
#&gt; 4  0.916257  16.756887    1.199508  ...  0.943480           1.436445  1.308028
#&gt; 
#&gt; [5 rows x 7 columns],
#&gt;  &#39;lm&#39;:         Age   Tonnage  passengers  ...     cabins  passenger_density  baseline
#&gt; 0  1.125813  1.194925    6.042907  ...  65.804012           1.119572  0.974263
#&gt; 1  1.075954  1.167649   10.202732  ...  74.509932           1.196025  1.041244
#&gt; 2  1.030405  1.105300    7.619432  ...  81.865776           1.104233  0.993071
#&gt; 3  0.969125  1.086046    6.849580  ...  60.160690           1.200896  1.015028
#&gt; 4  1.030877  1.104308    6.544080  ...  78.639078           1.145926  1.030492
#&gt; 
#&gt; [5 rows x 7 columns],
#&gt;  &#39;rf&#39;:         Age    Tonnage  passengers  ...     cabins  passenger_density  baseline
#&gt; 0  1.191131  14.154267    2.804218  ...  17.488978           1.509632  1.214548
#&gt; 1  1.245576  15.769225    2.341124  ...  17.546056           1.249848  1.238315
#&gt; 2  1.227147  15.240376    2.223502  ...  13.750452           1.494762  1.320595
#&gt; 3  1.264612  15.635679    2.300275  ...  19.530055           1.440940  2.218110
#&gt; 4  1.174023  14.126244    2.569365  ...  13.396221           1.281247  1.725979
#&gt; 
#&gt; [5 rows x 7 columns]}</code></pre>
<p>This output is a bit hard to read, so lets go ahead and write a helper function which averages the importances, and plots them nicely!</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>plt.style.use(<span class="st">&quot;ggplot&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw">def</span> plot_perm_imp(df, ax <span class="op">=</span> <span class="va">None</span>, color <span class="op">=</span> <span class="st">&#39;blue&#39;</span>):</span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="co"># mean the columns and put it back into a data frame</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    df1 <span class="op">=</span> (df.<span class="bu">apply</span>(stats.mean, <span class="dv">0</span>, result_type <span class="op">=</span> <span class="st">&quot;broadcast&quot;</span>)).drop(df.index[<span class="dv">1</span>:])</span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="co"># create a new data frame excluding baseline, so we can do something special with it</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    df_temp <span class="op">=</span> df1.loc[:, df.columns <span class="op">!=</span> <span class="st">&#39;baseline&#39;</span>]</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="co"># melt and sort it for plotting</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>    df2 <span class="op">=</span> df_temp.melt(var_name <span class="op">=</span> <span class="st">&#39;variable&#39;</span>, value_name <span class="op">=</span> <span class="st">&#39;importance&#39;</span>)</span>
<span id="cb12-9"><a href="#cb12-9"></a>    df2 <span class="op">=</span> df2.sort_values(by <span class="op">=</span> <span class="st">&quot;importance&quot;</span>)</span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="co"># plot it nicely</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>    df2.plot(kind <span class="op">=</span> <span class="st">&#39;barh&#39;</span>, x <span class="op">=</span> <span class="st">&#39;variable&#39;</span>, y <span class="op">=</span> <span class="st">&#39;importance&#39;</span>, width <span class="op">=</span> <span class="fl">0.8</span>, ax <span class="op">=</span> ax, color <span class="op">=</span> color)</span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="co"># draw a bar and an arrow to baseline</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>    <span class="cf">for</span> n <span class="kw">in</span> df1.columns:</span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="cf">if</span> n <span class="kw">is</span> <span class="st">&quot;baseline&quot;</span>:</span>
<span id="cb12-15"><a href="#cb12-15"></a>            plt.axvline(x <span class="op">=</span> df1[n][<span class="dv">0</span>])</span>
<span id="cb12-16"><a href="#cb12-16"></a>            plt.annotate(<span class="st">&#39;baseline&#39;</span>,</span>
<span id="cb12-17"><a href="#cb12-17"></a>                         xy <span class="op">=</span> (df1[n][<span class="dv">0</span>], <span class="dv">1</span>),</span>
<span id="cb12-18"><a href="#cb12-18"></a>                         xytext <span class="op">=</span> (df1[n][<span class="dv">0</span>] <span class="op">+</span> <span class="fl">0.4</span>, <span class="dv">3</span>),</span>
<span id="cb12-19"><a href="#cb12-19"></a>                         arrowprops <span class="op">=</span> <span class="bu">dict</span>(facecolor <span class="op">=</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb12-20"><a href="#cb12-20"></a>                                           shrink <span class="op">=</span> <span class="fl">0.05</span>),</span>
<span id="cb12-21"><a href="#cb12-21"></a>                         bbox <span class="op">=</span> <span class="bu">dict</span>(boxstyle <span class="op">=</span> <span class="st">&quot;square&quot;</span>, fc <span class="op">=</span> (<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)))</span>
<span id="cb12-22"><a href="#cb12-22"></a></span>
<span id="cb12-23"><a href="#cb12-23"></a></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="co"># plot the importance dict!</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(imps.keys())):</span>
<span id="cb12-27"><a href="#cb12-27"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="bu">len</span>(<span class="bu">list</span>(imps.keys())),<span class="dv">1</span>, i<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb12-28"><a href="#cb12-28"></a>    c <span class="op">=</span> sns.color_palette(<span class="st">&quot;hls&quot;</span>, i<span class="op">+</span><span class="dv">1</span>)[i]</span>
<span id="cb12-29"><a href="#cb12-29"></a>    plot_perm_imp(imps[<span class="bu">list</span>(imps.keys())[i]], ax <span class="op">=</span> ax, color <span class="op">=</span> c)</span>
<span id="cb12-30"><a href="#cb12-30"></a>    ax.set_title(<span class="bu">list</span>(imps.keys())[i])</span>
<span id="cb12-31"><a href="#cb12-31"></a>    <span class="cf">for</span> tick <span class="kw">in</span> ax.yaxis.get_major_ticks():</span>
<span id="cb12-32"><a href="#cb12-32"></a>      tick.label.set_fontsize(<span class="st">&quot;x-small&quot;</span>)</span>
<span id="cb12-33"><a href="#cb12-33"></a>      tick.label.set_rotation(<span class="dv">45</span>)</span>
<span id="cb12-34"><a href="#cb12-34"></a>plt.show()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="iml_files/figure-html/unnamed-chunk-8-1.svg" alt="Permutation Importances for linear regression, knn, and a random forest"  />
<p class="caption">
Permutation Importances for linear regression, knn, and a random forest
</p>
</div>
<p>Looks like it worked alright!! Especially for random forest, we nicely identified the two most important features, however with little granularity. With our linear model, it is a little less clear, but we do see that the same three most important features carry through! However, we have no real granularity or idea the scale of the effect of the variable. We also carry a risk with permutation importance and correlated variables in general: we are using often unrealistic observations. For example, we may be looking a tiny boats (in length) which weigh the same as the largest boats (they would sink!!) with our permutations. This leads to often unreliable output with many permutation based tools, which we will also explore in this post.</p>
</div>
<div id="in-r" class="section level3">
<h3>In R</h3>
<p>First, lets set up three models to test: A linear model, a knn model, and a random forest:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">library</span>(randomForest)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">library</span>(kknn)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co"># set up models with parameters</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>rf &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="kw">return</span>(<span class="kw">randomForest</span>(crew <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> df, <span class="dt">ntree =</span> <span class="dv">100</span>))</span>
<span id="cb13-7"><a href="#cb13-7"></a>}</span>
<span id="cb13-8"><a href="#cb13-8"></a></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co"># knn in R is annoying so we will need to a consistent api ourselves:</span></span>
<span id="cb13-10"><a href="#cb13-10"></a></span>
<span id="cb13-11"><a href="#cb13-11"></a>knn &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb13-12"><a href="#cb13-12"></a>  res &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb13-13"><a href="#cb13-13"></a>  res<span class="op">$</span>train &lt;-<span class="st"> </span>df</span>
<span id="cb13-14"><a href="#cb13-14"></a>  res<span class="op">$</span>k &lt;-<span class="st"> </span><span class="dv">13</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  res &lt;-<span class="st"> </span><span class="kw">structure</span>(res, <span class="dt">class =</span> <span class="st">&quot;knn&quot;</span>)</span>
<span id="cb13-16"><a href="#cb13-16"></a>}</span>
<span id="cb13-17"><a href="#cb13-17"></a></span>
<span id="cb13-18"><a href="#cb13-18"></a>predict.knn &lt;-<span class="st"> </span><span class="cf">function</span>(obj, newdata) {</span>
<span id="cb13-19"><a href="#cb13-19"></a>  out &lt;-<span class="st">  </span><span class="kw">kknn</span>(crew <span class="op">~</span><span class="st"> </span>., <span class="dt">train =</span> obj<span class="op">$</span>train, <span class="dt">test =</span> newdata, <span class="dt">k =</span> <span class="dv">13</span>)</span>
<span id="cb13-20"><a href="#cb13-20"></a>  <span class="kw">return</span>(<span class="kw">as.numeric</span>(out<span class="op">$</span>fitted.values))</span>
<span id="cb13-21"><a href="#cb13-21"></a>}</span>
<span id="cb13-22"><a href="#cb13-22"></a></span>
<span id="cb13-23"><a href="#cb13-23"></a>linear_model &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb13-24"><a href="#cb13-24"></a>  <span class="kw">lm</span>(crew <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> df)</span>
<span id="cb13-25"><a href="#cb13-25"></a>}</span>
<span id="cb13-26"><a href="#cb13-26"></a></span>
<span id="cb13-27"><a href="#cb13-27"></a>models &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;lm&quot;</span> =<span class="st"> </span>linear_model,<span class="st">&quot;knn&quot;</span>=<span class="st"> </span>knn,<span class="st">&quot;rf&quot;</span>=<span class="st"> </span>rf)</span>
<span id="cb13-28"><a href="#cb13-28"></a></span>
<span id="cb13-29"><a href="#cb13-29"></a>t_train &lt;-<span class="st"> </span><span class="kw">cbind</span>(X_train, y_train)</span>
<span id="cb13-30"><a href="#cb13-30"></a></span>
<span id="cb13-31"><a href="#cb13-31"></a>trained_models &lt;-<span class="st"> </span><span class="kw">lapply</span>(models, <span class="cf">function</span>(f) <span class="kw">f</span>(t_train))</span></code></pre></div>
<p>Lets check out as a baseline truth which features are important in the random forest, and the strength of the predictors in our linear regression:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">summary</span>(trained_models[[<span class="st">&quot;lm&quot;</span>]]))</span></code></pre></div>
<table style="width:96%;">
<colgroup>
<col width="33%" />
<col width="15%" />
<col width="18%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Estimate</th>
<th align="center">Std. Error</th>
<th align="center">t value</th>
<th align="center">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>(Intercept)</strong></td>
<td align="center">-0.9349</td>
<td align="center">1.878</td>
<td align="center">-0.4977</td>
<td align="center">0.6197</td>
</tr>
<tr class="even">
<td align="center"><strong>Age</strong></td>
<td align="center">-0.01321</td>
<td align="center">0.02083</td>
<td align="center">-0.6343</td>
<td align="center">0.5272</td>
</tr>
<tr class="odd">
<td align="center"><strong>Tonnage</strong></td>
<td align="center">0.003161</td>
<td align="center">0.01692</td>
<td align="center">0.1868</td>
<td align="center">0.8522</td>
</tr>
<tr class="even">
<td align="center"><strong>passengers</strong></td>
<td align="center">-0.1045</td>
<td align="center">0.06831</td>
<td align="center">-1.53</td>
<td align="center">0.1288</td>
</tr>
<tr class="odd">
<td align="center"><strong>length</strong></td>
<td align="center">0.3911</td>
<td align="center">0.1624</td>
<td align="center">2.409</td>
<td align="center">0.01765</td>
</tr>
<tr class="even">
<td align="center"><strong>cabins</strong></td>
<td align="center">0.7986</td>
<td align="center">0.1058</td>
<td align="center">7.545</td>
<td align="center">1.34e-11</td>
</tr>
<tr class="odd">
<td align="center"><strong>passenger_density</strong></td>
<td align="center">0.01037</td>
<td align="center">0.02618</td>
<td align="center">0.3963</td>
<td align="center">0.6927</td>
</tr>
</tbody>
</table>
<table style="width:86%;">
<caption>Fitting linear model: crew ~ .</caption>
<colgroup>
<col width="20%" />
<col width="30%" />
<col width="11%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Observations</th>
<th align="center">Residual Std. Error</th>
<th align="center"><span class="math inline">\(R^2\)</span></th>
<th align="center">Adjusted <span class="math inline">\(R^2\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">118</td>
<td align="center">1.089</td>
<td align="center">0.906</td>
<td align="center">0.9009</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">importance</span>(trained_models<span class="op">$</span>rf))</span></code></pre></div>
<table style="width:56%;">
<colgroup>
<col width="33%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">IncNodePurity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Age</strong></td>
<td align="center">44.13</td>
</tr>
<tr class="even">
<td align="center"><strong>Tonnage</strong></td>
<td align="center">430.2</td>
</tr>
<tr class="odd">
<td align="center"><strong>passengers</strong></td>
<td align="center">260.3</td>
</tr>
<tr class="even">
<td align="center"><strong>length</strong></td>
<td align="center">206.8</td>
</tr>
<tr class="odd">
<td align="center"><strong>cabins</strong></td>
<td align="center">387.8</td>
</tr>
<tr class="even">
<td align="center"><strong>passenger_density</strong></td>
<td align="center">27.9</td>
</tr>
</tbody>
</table>
<p>Looks like tonnage and cabins are the most important variables for the random forest, and cabins, length, and passengers for linear regression.</p>
<p>Next, lets create a function for permutation importance! This should be pretty easy to do, I have added in a few extra components for thoroughness, but the code is not hard:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># loss function</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>loss_mse &lt;-<span class="st"> </span><span class="cf">function</span>(truth, preds) {</span>
<span id="cb16-3"><a href="#cb16-3"></a>  error &lt;-<span class="st"> </span>truth <span class="op">-</span><span class="st"> </span>preds</span>
<span id="cb16-4"><a href="#cb16-4"></a>  square_error &lt;-<span class="st"> </span>error<span class="op">^</span><span class="dv">2</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="kw">return</span>(<span class="kw">mean</span>(square_error))</span>
<span id="cb16-6"><a href="#cb16-6"></a>}</span>
<span id="cb16-7"><a href="#cb16-7"></a></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co"># get baseline loss</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>get_loss &lt;-<span class="st"> </span><span class="cf">function</span>(model, x, y, loss) {</span>
<span id="cb16-10"><a href="#cb16-10"></a>  <span class="kw">loss</span>(y, <span class="kw">predict</span>(model, x))</span>
<span id="cb16-11"><a href="#cb16-11"></a>}</span>
<span id="cb16-12"><a href="#cb16-12"></a></span>
<span id="cb16-13"><a href="#cb16-13"></a></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co"># permute a single column</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>permute_column &lt;-<span class="st"> </span><span class="cf">function</span>(df, col) {</span>
<span id="cb16-16"><a href="#cb16-16"></a>  df[[col]] &lt;-<span class="st"> </span>df[[col]][<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(df))]</span>
<span id="cb16-17"><a href="#cb16-17"></a>  <span class="kw">return</span>(df)</span>
<span id="cb16-18"><a href="#cb16-18"></a>}</span>
<span id="cb16-19"><a href="#cb16-19"></a></span>
<span id="cb16-20"><a href="#cb16-20"></a></span>
<span id="cb16-21"><a href="#cb16-21"></a>permutation_importance &lt;-<span class="st"> </span><span class="cf">function</span>(model, x, y, loss, <span class="dt">x_train =</span> <span class="ot">NA</span>, <span class="dt">y_train =</span> <span class="ot">NA</span>, <span class="dt">n_rounds =</span> <span class="dv">5</span>) {</span>
<span id="cb16-22"><a href="#cb16-22"></a>  baseline &lt;-<span class="st"> </span><span class="kw">get_loss</span>(model, x, y[[<span class="dv">1</span>]], loss)</span>
<span id="cb16-23"><a href="#cb16-23"></a>  explan &lt;-<span class="st"> </span><span class="kw">names</span>(x)</span>
<span id="cb16-24"><a href="#cb16-24"></a>  single_round_imp &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb16-25"><a href="#cb16-25"></a>    dfs &lt;-<span class="st"> </span><span class="kw">lapply</span>(explan, <span class="cf">function</span>(i) <span class="kw">permute_column</span>(x, i))</span>
<span id="cb16-26"><a href="#cb16-26"></a>    <span class="kw">return</span>(<span class="kw">vapply</span>(dfs, <span class="cf">function</span>(i) <span class="kw">get_loss</span>(model, i, y[[<span class="dv">1</span>]], loss), <span class="kw">numeric</span>(<span class="dv">1</span>)))</span>
<span id="cb16-27"><a href="#cb16-27"></a>  }</span>
<span id="cb16-28"><a href="#cb16-28"></a>  res &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span>n_rounds, <span class="cf">function</span>(x) <span class="kw">single_round_imp</span>(df))</span>
<span id="cb16-29"><a href="#cb16-29"></a>  res &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">do.call</span>(rbind, res))</span>
<span id="cb16-30"><a href="#cb16-30"></a>  res &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">lapply</span>(res, <span class="cf">function</span>(x) x<span class="op">/</span>baseline))</span>
<span id="cb16-31"><a href="#cb16-31"></a>  <span class="kw">names</span>(res) &lt;-<span class="st"> </span><span class="kw">names</span>(x)</span>
<span id="cb16-32"><a href="#cb16-32"></a>  <span class="kw">return</span>(<span class="kw">as.data.frame</span>(<span class="kw">lapply</span>(res, mean)))</span>
<span id="cb16-33"><a href="#cb16-33"></a>}</span>
<span id="cb16-34"><a href="#cb16-34"></a></span>
<span id="cb16-35"><a href="#cb16-35"></a><span class="co"># we can do this in a second because R is speedy </span></span>
<span id="cb16-36"><a href="#cb16-36"></a>perm_vips &lt;-<span class="st"> </span><span class="kw">lapply</span>(trained_models, <span class="cf">function</span>(x) <span class="kw">permutation_importance</span>(x, X_test, y_test, loss_mse, <span class="dt">n_rounds =</span> <span class="dv">30</span>))</span>
<span id="cb16-37"><a href="#cb16-37"></a>pander<span class="op">::</span><span class="kw">pander</span>(perm_vips)</span></code></pre></div>
<ul>
<li><p><strong>lm</strong>:</p>
<table style="width:96%;">
<colgroup>
<col width="11%" />
<col width="13%" />
<col width="18%" />
<col width="12%" />
<col width="12%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Age</th>
<th align="center">Tonnage</th>
<th align="center">passengers</th>
<th align="center">length</th>
<th align="center">cabins</th>
<th align="center">passenger_density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1.036</td>
<td align="center">1.062</td>
<td align="center">7.519</td>
<td align="center">4.352</td>
<td align="center">69.8</td>
<td align="center">1.098</td>
</tr>
</tbody>
</table></li>
<li><p><strong>knn</strong>:</p>
<table style="width:96%;">
<colgroup>
<col width="11%" />
<col width="13%" />
<col width="18%" />
<col width="12%" />
<col width="12%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Age</th>
<th align="center">Tonnage</th>
<th align="center">passengers</th>
<th align="center">length</th>
<th align="center">cabins</th>
<th align="center">passenger_density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1.261</td>
<td align="center">1.746</td>
<td align="center">1.989</td>
<td align="center">3.02</td>
<td align="center">2.838</td>
<td align="center">1.295</td>
</tr>
</tbody>
</table></li>
<li><p><strong>rf</strong>:</p>
<table style="width:96%;">
<colgroup>
<col width="11%" />
<col width="13%" />
<col width="18%" />
<col width="12%" />
<col width="12%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Age</th>
<th align="center">Tonnage</th>
<th align="center">passengers</th>
<th align="center">length</th>
<th align="center">cabins</th>
<th align="center">passenger_density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1.164</td>
<td align="center">8.478</td>
<td align="center">4.895</td>
<td align="center">3.73</td>
<td align="center">9.287</td>
<td align="center">1.501</td>
</tr>
</tbody>
</table></li>
</ul>
<!-- end of list -->
<p>So, it looks like our importances are quite similar to the importances calculated by the models explicitly, so not a bad job! Lets go ahead and produce a nice plot!</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb17-2"><a href="#cb17-2"></a>vip_flat &lt;-<span class="st"> </span><span class="kw">lapply</span>(perm_vips, gather)</span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co"># Finally an appropriate use of superassignment!!</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="kw">lapply</span>(<span class="kw">names</span>(vip_flat), <span class="cf">function</span>(x) {</span>
<span id="cb17-6"><a href="#cb17-6"></a>  vip_flat[[x]][[<span class="st">&quot;model&quot;</span>]] &lt;&lt;-<span class="st"> </span>x</span>
<span id="cb17-7"><a href="#cb17-7"></a>})  <span class="op">%&gt;%</span><span class="st"> </span>invisible</span>
<span id="cb17-8"><a href="#cb17-8"></a></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="kw">do.call</span>( rbind, vip_flat) <span class="op">%&gt;%</span><span class="st"> </span>as.data.frame <span class="op">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> key, <span class="dt">y =</span> value, <span class="dt">fill =</span> model)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="st">  </span><span class="kw">facet_grid</span>(model <span class="op">~</span><span class="st"> </span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_fill_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Permutation Importance&quot;</span>)</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-12-1.svg" width="672" style="display: block; margin: auto;" /></p>
<p>Looks like it worked alright!! Especially for random forest, we nicely identified the two most important features, however with little granularity. With our linear model, it is a little less clear, but we do see that the same three most important features carry through! However, we have no real granularity or idea the scale of the effect of the variable. We also carry a risk with permutation importance and correlated variables in general: we are using often unrealistic observations. For example, we may be looking a tiny boats (in length) which weigh the same as the largest boats (they would sink!!) with our permutations. This leads to often unreliable output with many permutation based tools, which we will also explore in this post.</p>
</div>
</div>
</div>
<div id="partial-dependence" class="section level1">
<h1>Partial Dependence</h1>
<p>Let’s try and think of a annother way to quantify the effect of a variable. We previously answered the question: “How much worse will my prediction be, given a feature has been replaced with noise?”. Now, lets ask a new question:</p>
<blockquote>
<p>What will my prediction be, in general, when a feature is at a specific value?</p>
</blockquote>
<p>This is Partial Dependence in a nutshell. Stemming off from this, we can make the claim:</p>
<blockquote>
<p>If a feature is more important, the prediction will vary more with that feature than others.</p>
</blockquote>
<p>This is exactly the claim made (and supported) in <a href="https://arxiv.org/abs/1805.04755">this excellent paper</a>. Thus in this section, we will calculate two things: Partial Dependence, and Partial Dependence Importance. Partial Dependence, at a high level, is calculated like this:</p>
<ol style="list-style-type: decimal">
<li>Take your original data, copy it</li>
<li>Replace the feature of interest with the value of the first observation of the feature of interest.</li>
<li>Calculate new prediction vector</li>
<li>Average that</li>
<li>Repeat for all observations</li>
</ol>
<p>And then we can just take more or less the standard deviation of these curves to estimate importance (its a bit different for categorical variables, see the paper).</p>
<div id="formalization-1" class="section level2">
<h2>Formalization</h2>
<p>Consider again <span class="math inline">\(x = (x_s, x_c)\)</span></p>
<p>We can define the partial dependence as the expected value of our prediction function, <span class="math inline">\(\hat f\)</span>, given <span class="math inline">\(x_c\)</span>:</p>
<p><span class="math display">\[\mathrm{PDP}(z_s) = E \left[ \hat f (x_s, x_c) \mid x_c  \right]\]</span></p>
<p><span class="math display">\[ = \int \hat f (x_s, x_c) \mathbb{P}_c(x_c) dx_c\]</span> Where <span class="math inline">\(\mathbb{P}_c\)</span> is the marginal distribution of <span class="math inline">\(x_c\)</span>, <span class="math inline">\(\int p(x)dx_s\)</span>.</p>
<p>We can then formulate this for a finite set of <span class="math inline">\(k\)</span> features and <span class="math inline">\(n\)</span> observations using the Monte Carlo method:</p>
<p><span class="math display">\[\widetilde {\mathrm{PDP}} (x_j) = \frac{1}{n} \sum_{i=1}^{i=n} \hat f (x_j, x_{\backslash j}^{(i)})\]</span></p>
<p>Note the change in notation we use when we move from the infinite world of derivatives to the finite world of sums, <span class="math inline">\(x_j\)</span> represents the feature(s) we are interested in, and <span class="math inline">\(x_{\backslash j}\)</span> is set notation for “all the other features”, that is <span class="math inline">\(x_{\backslash j}\)</span> is the complement of <span class="math inline">\(x_j\)</span>. <span class="math inline">\(x_{\backslash j}^{(i)}\)</span> represents a single observation of <span class="math inline">\(x_{\backslash j}\)</span>. This means, we are holding the value of <span class="math inline">\(x_j\)</span> constant, and averaging the prediction as <span class="math inline">\(x_{\backslash j}\)</span> changes .</p>
</div>
<div id="code-implementation-1" class="section level2 tabset tabset-pills">
<h2>Code Implementation</h2>
<div id="in-python-1" class="section level3">
<h3>In Python</h3>
<p>First, lets define a function to calculate the partial dependence of a prediction on a single variable:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">def</span> pdp_var(model, x, var):</span>
<span id="cb18-2"><a href="#cb18-2"></a>    explan <span class="op">=</span> <span class="bu">sorted</span>(x[var])</span>
<span id="cb18-3"><a href="#cb18-3"></a>    preds <span class="op">=</span> []</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(explan)):</span>
<span id="cb18-5"><a href="#cb18-5"></a>        X_tmp <span class="op">=</span> x.copy()</span>
<span id="cb18-6"><a href="#cb18-6"></a>        <span class="co"># pandas is dumb</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>        val <span class="op">=</span> np.asarray(explan)[i]</span>
<span id="cb18-8"><a href="#cb18-8"></a>        X_tmp[var] <span class="op">=</span> val</span>
<span id="cb18-9"><a href="#cb18-9"></a>        preds.append(model.predict(X_tmp))</span>
<span id="cb18-10"><a href="#cb18-10"></a>    preds <span class="op">=</span> np.asarray(preds).reshape(<span class="bu">len</span>(x), <span class="bu">len</span>(explan))</span>
<span id="cb18-11"><a href="#cb18-11"></a>    pv <span class="op">=</span> preds.mean(axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb18-12"><a href="#cb18-12"></a>    <span class="cf">return</span>(explan, pv)</span></code></pre></div>
<p>Next, lets scale that up to work over an entire data frame!</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">def</span> pdp_df(model, x):</span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="co"># return a dict of data frames</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>    res <span class="op">=</span> {}</span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="cf">for</span> c <span class="kw">in</span> x.columns:</span>
<span id="cb19-5"><a href="#cb19-5"></a>        d <span class="op">=</span> pd.DataFrame()</span>
<span id="cb19-6"><a href="#cb19-6"></a>        d[<span class="st">&quot;Value&quot;</span>], d[<span class="st">&quot;Average Prediction&quot;</span>] <span class="op">=</span> pdp_var(model, x, c)</span>
<span id="cb19-7"><a href="#cb19-7"></a>        res[c] <span class="op">=</span> d</span>
<span id="cb19-8"><a href="#cb19-8"></a>    <span class="cf">return</span>(res)</span></code></pre></div>
<p>Lets now show the partial dependence for just our random forest!</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a></span>
<span id="cb20-2"><a href="#cb20-2"></a>rf_pdp <span class="op">=</span> pdp_df(rf, X_test)</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a>plt.style.use(<span class="st">&quot;seaborn-whitegrid&quot;</span>)</span>
<span id="cb20-5"><a href="#cb20-5"></a>fig <span class="op">=</span> plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(rf_pdp.keys())):</span>
<span id="cb20-7"><a href="#cb20-7"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="dv">2</span>,<span class="dv">3</span>, k<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb20-8"><a href="#cb20-8"></a>    <span class="co">#c = cm.Paired(i/len(imps.keys()), 1)</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>    c <span class="op">=</span> sns.color_palette(<span class="st">&quot;hls&quot;</span>, k<span class="op">+</span><span class="dv">1</span>)[k]</span>
<span id="cb20-10"><a href="#cb20-10"></a>    df <span class="op">=</span> rf_pdp[<span class="bu">list</span>(rf_pdp.keys())[k]]</span>
<span id="cb20-11"><a href="#cb20-11"></a>    sns.lineplot(x <span class="op">=</span> <span class="st">&quot;Value&quot;</span>, y <span class="op">=</span> <span class="st">&quot;Average Prediction&quot;</span>, ax <span class="op">=</span> ax, color <span class="op">=</span> c, data <span class="op">=</span> df)</span>
<span id="cb20-12"><a href="#cb20-12"></a>    ax.set_title(<span class="bu">list</span>(rf_pdp.keys())[k])</span>
<span id="cb20-13"><a href="#cb20-13"></a>plt.subplots_adjust(wspace <span class="op">=</span> <span class="fl">0.5</span>, hspace <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb20-14"><a href="#cb20-14"></a>plt.show()</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-15-1.svg" /><!-- --></p>
<p>Remember, we said that the variability in partial dependence is equivalent to the importance of a variable. Lets go ahead and write that up too!</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">def</span> pdp_importance(model, x):</span>
<span id="cb21-2"><a href="#cb21-2"></a>    pdpdf <span class="op">=</span> pdp_df(model, x)</span>
<span id="cb21-3"><a href="#cb21-3"></a>    v <span class="op">=</span> {k:np.std(pdpdf[k][<span class="st">&quot;Average Prediction&quot;</span>]) <span class="cf">for</span> k <span class="kw">in</span> pdpdf.keys()}</span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="cf">return</span>(v)</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a></span>
<span id="cb21-7"><a href="#cb21-7"></a>pdp_imps <span class="op">=</span> {get_name(m):pdp_importance(m, X_test) <span class="cf">for</span> m <span class="kw">in</span> models}</span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="kw">def</span> plot_pdp_imp(d, ax <span class="op">=</span> <span class="va">None</span>, color <span class="op">=</span> <span class="st">&quot;blue&quot;</span>):</span>
<span id="cb21-10"><a href="#cb21-10"></a>    df <span class="op">=</span> pd.DataFrame()</span>
<span id="cb21-11"><a href="#cb21-11"></a>    df[<span class="st">&quot;Variable&quot;</span>] <span class="op">=</span> d.keys()</span>
<span id="cb21-12"><a href="#cb21-12"></a>    df[<span class="st">&quot;Importance&quot;</span>] <span class="op">=</span> d.values()</span>
<span id="cb21-13"><a href="#cb21-13"></a>    df.sort_values(<span class="st">&quot;Importance&quot;</span>).plot(kind <span class="op">=</span> <span class="st">&quot;barh&quot;</span>, x <span class="op">=</span> <span class="st">&quot;Variable&quot;</span>, y <span class="op">=</span> <span class="st">&quot;Importance&quot;</span>, width <span class="op">=</span> <span class="fl">0.8</span>, ax <span class="op">=</span> ax, color <span class="op">=</span> c)</span>
<span id="cb21-14"><a href="#cb21-14"></a></span>
<span id="cb21-15"><a href="#cb21-15"></a>fig <span class="op">=</span> plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(pdp_imps.keys())):</span>
<span id="cb21-17"><a href="#cb21-17"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="bu">len</span>(<span class="bu">list</span>(pdp_imps.keys())),<span class="dv">1</span>, i<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb21-18"><a href="#cb21-18"></a>    <span class="co">#c = cm.Paired(i/len(imps.keys()), 1)</span></span>
<span id="cb21-19"><a href="#cb21-19"></a>    c <span class="op">=</span> sns.color_palette(<span class="st">&quot;hls&quot;</span>, i<span class="op">+</span><span class="dv">1</span>)[i]</span>
<span id="cb21-20"><a href="#cb21-20"></a>    plot_pdp_imp(pdp_imps[<span class="bu">list</span>(pdp_imps.keys())[i]], ax <span class="op">=</span> ax, color <span class="op">=</span> c)</span>
<span id="cb21-21"><a href="#cb21-21"></a>    ax.set_title(<span class="bu">list</span>(pdp_imps.keys())[i])</span>
<span id="cb21-22"><a href="#cb21-22"></a>plt.show()</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-16-1.svg" /><!-- --></p>
</div>
<div id="in-r-1" class="section level3">
<h3>In R</h3>
<p>First, lets define a function to calculate the partial dependence of a prediction on a single variable:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>pdp_var &lt;-<span class="st"> </span><span class="cf">function</span>(model, x, var){</span>
<span id="cb22-2"><a href="#cb22-2"></a>  x_sorted &lt;-<span class="st"> </span>x[<span class="kw">order</span>(x[[var]], <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="co"># predefine matrix!</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>  out &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow =</span> <span class="kw">nrow</span>(x), <span class="dt">ncol =</span> <span class="kw">nrow</span>(x))</span>
<span id="cb22-5"><a href="#cb22-5"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(x)) {</span>
<span id="cb22-6"><a href="#cb22-6"></a>    tmp_df &lt;-<span class="st"> </span>x_sorted</span>
<span id="cb22-7"><a href="#cb22-7"></a>    tmp_df[[var]] &lt;-<span class="st"> </span>tmp_df[[var]][i]</span>
<span id="cb22-8"><a href="#cb22-8"></a>    out[i,] &lt;-<span class="st"> </span><span class="kw">predict</span>(model, tmp_df)</span>
<span id="cb22-9"><a href="#cb22-9"></a>  }</span>
<span id="cb22-10"><a href="#cb22-10"></a>  res &lt;-<span class="st"> </span><span class="kw">colMeans</span>(out)</span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="kw">return</span>(<span class="kw">data.frame</span>(<span class="st">&quot;value&quot;</span> =<span class="st"> </span>x_sorted[[var]], <span class="st">&quot;avg_pred&quot;</span> =<span class="st"> </span>res))</span>
<span id="cb22-12"><a href="#cb22-12"></a>}</span></code></pre></div>
<p>Next, lets scale that up over the entire data frame!</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>pdp_df &lt;-<span class="st"> </span><span class="cf">function</span>(model, x) {</span>
<span id="cb23-2"><a href="#cb23-2"></a>  pdps &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">colnames</span>(x), <span class="cf">function</span>(n) {</span>
<span id="cb23-3"><a href="#cb23-3"></a>    res &lt;-<span class="st"> </span><span class="kw">pdp_var</span>(model, x, n)</span>
<span id="cb23-4"><a href="#cb23-4"></a>    res<span class="op">$</span>variable &lt;-<span class="st"> </span>n</span>
<span id="cb23-5"><a href="#cb23-5"></a>    <span class="kw">return</span>(res)</span>
<span id="cb23-6"><a href="#cb23-6"></a>  })</span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="kw">return</span>(pdps)</span>
<span id="cb23-8"><a href="#cb23-8"></a>}</span>
<span id="cb23-9"><a href="#cb23-9"></a></span>
<span id="cb23-10"><a href="#cb23-10"></a>(rf_pdp &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, <span class="kw">pdp_df</span>(trained_models[[<span class="dv">3</span>]], X_test)))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["avg_pred"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["variable"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"44.000","2":"9.109607","3":"Age"},{"1":"36.000","2":"3.494178","3":"Age"},{"1":"29.000","2":"5.557928","3":"Age"},{"1":"27.000","2":"1.965579","3":"Age"},{"1":"25.000","2":"5.256180","3":"Age"},{"1":"25.000","2":"6.632331","3":"Age"},{"1":"25.000","2":"8.988514","3":"Age"},{"1":"22.000","2":"5.949942","3":"Age"},{"1":"22.000","2":"9.213317","3":"Age"},{"1":"22.000","2":"1.186345","3":"Age"},{"1":"21.000","2":"3.858871","3":"Age"},{"1":"21.000","2":"5.260385","3":"Age"},{"1":"21.000","2":"3.385470","3":"Age"},{"1":"19.000","2":"2.026017","3":"Age"},{"1":"16.000","2":"8.803690","3":"Age"},{"1":"16.000","2":"5.809120","3":"Age"},{"1":"16.000","2":"2.106314","3":"Age"},{"1":"15.000","2":"3.768827","3":"Age"},{"1":"15.000","2":"8.237286","3":"Age"},{"1":"14.000","2":"10.460821","3":"Age"},{"1":"14.000","2":"3.472179","3":"Age"},{"1":"13.000","2":"10.793362","3":"Age"},{"1":"13.000","2":"9.610173","3":"Age"},{"1":"13.000","2":"9.218109","3":"Age"},{"1":"13.000","2":"3.768827","3":"Age"},{"1":"12.000","2":"9.610173","3":"Age"},{"1":"12.000","2":"1.179322","3":"Age"},{"1":"12.000","2":"11.240083","3":"Age"},{"1":"12.000","2":"4.882724","3":"Age"},{"1":"11.000","2":"9.610173","3":"Age"},{"1":"11.000","2":"10.084816","3":"Age"},{"1":"9.000","2":"10.966447","3":"Age"},{"1":"9.000","2":"8.961032","3":"Age"},{"1":"9.000","2":"9.339725","3":"Age"},{"1":"7.000","2":"9.800942","3":"Age"},{"1":"7.000","2":"12.193431","3":"Age"},{"1":"6.000","2":"3.747863","3":"Age"},{"1":"6.000","2":"12.189182","3":"Age"},{"1":"6.000","2":"10.037421","3":"Age"},{"1":"5.000","2":"12.334041","3":"Age"},{"1":"133.500","2":"11.290561","3":"Tonnage"},{"1":"116.000","2":"10.401483","3":"Tonnage"},{"1":"110.239","2":"10.052095","3":"Tonnage"},{"1":"108.865","2":"9.817307","3":"Tonnage"},{"1":"105.000","2":"9.854339","3":"Tonnage"},{"1":"101.509","2":"9.755707","3":"Tonnage"},{"1":"101.509","2":"10.146993","3":"Tonnage"},{"1":"93.000","2":"9.612935","3":"Tonnage"},{"1":"91.000","2":"9.215427","3":"Tonnage"},{"1":"91.000","2":"9.311202","3":"Tonnage"},{"1":"91.000","2":"9.274386","3":"Tonnage"},{"1":"90.090","2":"9.100482","3":"Tonnage"},{"1":"90.000","2":"9.613397","3":"Tonnage"},{"1":"89.600","2":"9.458227","3":"Tonnage"},{"1":"85.619","2":"9.109117","3":"Tonnage"},{"1":"81.000","2":"8.808388","3":"Tonnage"},{"1":"78.491","2":"8.229257","3":"Tonnage"},{"1":"77.713","2":"8.393254","3":"Tonnage"},{"1":"73.941","2":"8.870214","3":"Tonnage"},{"1":"73.192","2":"8.620952","3":"Tonnage"},{"1":"70.327","2":"8.525979","3":"Tonnage"},{"1":"59.652","2":"6.072053","3":"Tonnage"},{"1":"52.926","2":"6.213229","3":"Tonnage"},{"1":"50.000","2":"5.389931","3":"Tonnage"},{"1":"42.000","2":"6.654919","3":"Tonnage"},{"1":"38.000","2":"5.694669","3":"Tonnage"},{"1":"34.250","2":"5.799263","3":"Tonnage"},{"1":"33.920","2":"6.032503","3":"Tonnage"},{"1":"33.000","2":"4.545158","3":"Tonnage"},{"1":"30.277","2":"4.941687","3":"Tonnage"},{"1":"30.277","2":"5.005929","3":"Tonnage"},{"1":"30.277","2":"4.976278","3":"Tonnage"},{"1":"28.430","2":"5.143028","3":"Tonnage"},{"1":"19.200","2":"3.901564","3":"Tonnage"},{"1":"19.093","2":"4.866423","3":"Tonnage"},{"1":"16.852","2":"4.937446","3":"Tonnage"},{"1":"16.800","2":"3.813075","3":"Tonnage"},{"1":"12.500","2":"3.968362","3":"Tonnage"},{"1":"3.341","2":"3.459404","3":"Tonnage"},{"1":"2.329","2":"3.680372","3":"Tonnage"},{"1":"39.590","2":"11.313698","3":"passengers"},{"1":"37.000","2":"10.774062","3":"passengers"},{"1":"31.000","2":"11.015577","3":"passengers"},{"1":"28.520","2":"8.519344","3":"passengers"},{"1":"27.580","2":"9.817761","3":"passengers"},{"1":"27.580","2":"10.166349","3":"passengers"},{"1":"27.580","2":"10.560031","3":"passengers"},{"1":"27.440","2":"8.551120","3":"passengers"},{"1":"27.200","2":"10.242418","3":"passengers"},{"1":"25.500","2":"9.727606","3":"passengers"},{"1":"25.010","2":"9.418136","3":"passengers"},{"1":"24.350","2":"8.472543","3":"passengers"},{"1":"23.940","2":"9.904509","3":"passengers"},{"1":"22.400","2":"9.767696","3":"passengers"},{"1":"21.440","2":"8.875667","3":"passengers"},{"1":"21.140","2":"9.070326","3":"passengers"},{"1":"20.320","2":"9.248995","3":"passengers"},{"1":"20.320","2":"9.370106","3":"passengers"},{"1":"20.320","2":"9.342902","3":"passengers"},{"1":"18.820","2":"8.789975","3":"passengers"},{"1":"17.910","2":"8.868381","3":"passengers"},{"1":"15.040","2":"6.358149","3":"passengers"},{"1":"13.200","2":"5.844551","3":"passengers"},{"1":"13.020","2":"5.904145","3":"passengers"},{"1":"12.140","2":"5.557877","3":"passengers"},{"1":"10.560","2":"5.530190","3":"passengers"},{"1":"10.520","2":"5.461335","3":"passengers"},{"1":"9.520","2":"3.963784","3":"passengers"},{"1":"8.080","2":"4.607508","3":"passengers"},{"1":"8.000","2":"4.051712","3":"passengers"},{"1":"7.000","2":"5.579943","3":"passengers"},{"1":"6.940","2":"4.633164","3":"passengers"},{"1":"6.840","2":"4.645298","3":"passengers"},{"1":"6.840","2":"4.604433","3":"passengers"},{"1":"4.900","2":"4.816036","3":"passengers"},{"1":"3.940","2":"3.272129","3":"passengers"},{"1":"3.200","2":"3.662814","3":"passengers"},{"1":"2.960","2":"3.542794","3":"passengers"},{"1":"0.940","2":"3.370422","3":"passengers"},{"1":"0.660","2":"3.235348","3":"passengers"},{"1":"10.930","2":"11.488355","3":"length"},{"1":"9.650","2":"9.071936","3":"length"},{"1":"9.650","2":"9.154173","3":"length"},{"1":"9.650","2":"9.163543","3":"length"},{"1":"9.650","2":"9.563495","3":"length"},{"1":"9.650","2":"9.581396","3":"length"},{"1":"9.630","2":"8.407861","3":"length"},{"1":"9.620","2":"9.279001","3":"length"},{"1":"9.610","2":"9.510223","3":"length"},{"1":"9.570","2":"9.107728","3":"length"},{"1":"9.510","2":"11.699371","3":"length"},{"1":"9.510","2":"11.616857","3":"length"},{"1":"9.510","2":"11.046229","3":"length"},{"1":"9.210","2":"8.984213","3":"length"},{"1":"9.150","2":"8.334800","3":"length"},{"1":"8.930","2":"10.484870","3":"length"},{"1":"8.930","2":"10.892310","3":"length"},{"1":"8.900","2":"10.804533","3":"length"},{"1":"8.800","2":"9.057000","3":"length"},{"1":"8.800","2":"8.799519","3":"length"},{"1":"8.660","2":"8.445537","3":"length"},{"1":"7.770","2":"6.056517","3":"length"},{"1":"7.180","2":"6.111133","3":"length"},{"1":"7.090","2":"5.111837","3":"length"},{"1":"7.080","2":"6.555620","3":"length"},{"1":"7.040","2":"5.465147","3":"length"},{"1":"6.160","2":"4.443157","3":"length"},{"1":"6.150","2":"5.574269","3":"length"},{"1":"5.940","2":"4.410825","3":"length"},{"1":"5.940","2":"4.487179","3":"length"},{"1":"5.940","2":"4.436966","3":"length"},{"1":"5.670","2":"5.742502","3":"length"},{"1":"5.600","2":"4.262023","3":"length"},{"1":"5.410","2":"4.277221","3":"length"},{"1":"5.370","2":"4.258429","3":"length"},{"1":"5.140","2":"2.906858","3":"length"},{"1":"5.130","2":"3.134966","3":"length"},{"1":"4.360","2":"2.990622","3":"length"},{"1":"2.960","2":"2.622612","3":"length"},{"1":"2.790","2":"2.316410","3":"length"},{"1":"16.370","2":"10.727452","3":"cabins"},{"1":"15.570","2":"10.161582","3":"cabins"},{"1":"14.870","2":"10.164712","3":"cabins"},{"1":"13.790","2":"9.308299","3":"cabins"},{"1":"13.560","2":"9.411552","3":"cabins"},{"1":"13.210","2":"9.306502","3":"cabins"},{"1":"13.000","2":"9.945847","3":"cabins"},{"1":"12.750","2":"8.702294","3":"cabins"},{"1":"11.970","2":"9.232925","3":"cabins"},{"1":"11.770","2":"8.509895","3":"cabins"},{"1":"11.380","2":"8.318544","3":"cabins"},{"1":"11.200","2":"9.324927","3":"cabins"},{"1":"10.940","2":"8.717470","3":"cabins"},{"1":"10.720","2":"8.680038","3":"cabins"},{"1":"10.560","2":"8.948623","3":"cabins"},{"1":"10.000","2":"8.376511","3":"cabins"},{"1":"9.750","2":"9.290364","3":"cabins"},{"1":"9.750","2":"9.340974","3":"cabins"},{"1":"9.750","2":"9.318497","3":"cabins"},{"1":"9.500","2":"8.630444","3":"cabins"},{"1":"9.350","2":"8.607288","3":"cabins"},{"1":"7.520","2":"6.580940","3":"cabins"},{"1":"6.600","2":"6.304603","3":"cabins"},{"1":"6.540","2":"6.391875","3":"cabins"},{"1":"6.070","2":"5.932828","3":"cabins"},{"1":"5.280","2":"5.946513","3":"cabins"},{"1":"5.260","2":"5.876116","3":"cabins"},{"1":"4.100","2":"4.924478","3":"cabins"},{"1":"4.000","2":"4.486210","3":"cabins"},{"1":"3.830","2":"4.524775","3":"cabins"},{"1":"3.550","2":"4.896152","3":"cabins"},{"1":"3.540","2":"5.961656","3":"cabins"},{"1":"3.420","2":"4.909192","3":"cabins"},{"1":"3.420","2":"4.847091","3":"cabins"},{"1":"2.450","2":"4.942819","3":"cabins"},{"1":"1.600","2":"3.905537","3":"cabins"},{"1":"1.480","2":"3.729222","3":"cabins"},{"1":"0.880","2":"3.761439","3":"cabins"},{"1":"0.450","2":"3.425181","3":"cabins"},{"1":"0.330","2":"3.186670","3":"cabins"},{"1":"71.430","2":"5.004134","3":"passenger_density"},{"1":"67.350","2":"3.671622","3":"passenger_density"},{"1":"60.000","2":"2.153444","3":"passenger_density"},{"1":"56.760","2":"1.965182","3":"passenger_density"},{"1":"50.620","2":"1.070967","3":"passenger_density"},{"1":"45.190","2":"6.013145","3":"passenger_density"},{"1":"44.780","2":"9.377070","3":"passenger_density"},{"1":"44.780","2":"9.446664","3":"passenger_density"},{"1":"44.780","2":"9.455836","3":"passenger_density"},{"1":"44.260","2":"3.811339","3":"passenger_density"},{"1":"44.260","2":"3.754535","3":"passenger_density"},{"1":"42.640","2":"3.739519","3":"passenger_density"},{"1":"41.290","2":"8.605714","3":"passenger_density"},{"1":"40.650","2":"6.033785","3":"passenger_density"},{"1":"40.500","2":"9.112978","3":"passenger_density"},{"1":"40.180","2":"9.992098","3":"passenger_density"},{"1":"39.470","2":"11.460892","3":"passenger_density"},{"1":"39.270","2":"8.553696","3":"passenger_density"},{"1":"38.850","2":"10.077216","3":"passenger_density"},{"1":"38.600","2":"10.705956","3":"passenger_density"},{"1":"37.780","2":"9.167064","3":"passenger_density"},{"1":"37.420","2":"11.791231","3":"passenger_density"},{"1":"36.810","2":"10.527548","3":"passenger_density"},{"1":"36.810","2":"10.879936","3":"passenger_density"},{"1":"36.020","2":"9.724076","3":"passenger_density"},{"1":"35.980","2":"5.218932","3":"passenger_density"},{"1":"35.190","2":"3.808207","3":"passenger_density"},{"1":"35.140","2":"10.062519","3":"passenger_density"},{"1":"33.720","2":"12.590058","3":"passenger_density"},{"1":"32.560","2":"5.092286","3":"passenger_density"},{"1":"32.230","2":"8.786135","3":"passenger_density"},{"1":"31.730","2":"1.879144","3":"passenger_density"},{"1":"30.940","2":"9.333350","3":"passenger_density"},{"1":"29.790","2":"12.016624","3":"passenger_density"},{"1":"27.940","2":"5.296169","3":"passenger_density"},{"1":"27.930","2":"6.435253","3":"passenger_density"},{"1":"25.660","2":"9.253338","3":"passenger_density"},{"1":"24.780","2":"1.253968","3":"passenger_density"},{"1":"23.870","2":"3.322119","3":"passenger_density"},{"1":"17.700","2":"3.407123","3":"passenger_density"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Finally, lets plot these pdps!</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">library</span>(ggthemes)</span>
<span id="cb24-2"><a href="#cb24-2"></a>rf_pdp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">color =</span> variable, <span class="dt">y =</span>  avg_pred, <span class="dt">x =</span> value)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="fl">1.5</span>) <span class="op">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(variable <span class="op">~</span><span class="st"> </span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="st">  </span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_hc</span>()</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-19-1.svg" width="960" /></p>
<p>Remember, we said that the variability in partial dependence is equivalent to the importance of a variable. Lets go ahead and write that up too! We are going to do a lot of <code>lapply</code>, as we are dealing with a list of lists of dataframes, and trying to quickly get that to a tidy format for ggplot</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># return the pdp lists for all trained models</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>pdps &lt;-<span class="st"> </span><span class="kw">lapply</span>(trained_models, <span class="cf">function</span>(m) <span class="kw">pdp_df</span>(m, X_test))</span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="co"># calculate the the standard deviation for average predictions</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>sd_pdp &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb25-6"><a href="#cb25-6"></a>  imp &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">sd</span>(df<span class="op">$</span>avg_pred))</span>
<span id="cb25-7"><a href="#cb25-7"></a>  <span class="kw">return</span>(<span class="kw">data.frame</span>(<span class="st">&quot;importance&quot;</span> =<span class="st"> </span>imp, <span class="st">&quot;variable&quot;</span> =<span class="st"> </span>df<span class="op">$</span>variable[<span class="dv">2</span>]))</span>
<span id="cb25-8"><a href="#cb25-8"></a>}</span>
<span id="cb25-9"><a href="#cb25-9"></a></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="co"># we have a list of lists of data frames, so things are going to get a little weird</span></span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="co"># We need to apply our function at depth of two, hence the double lapply</span></span>
<span id="cb25-12"><a href="#cb25-12"></a>pdp_imps &lt;-<span class="st"> </span><span class="kw">lapply</span>(pdps, <span class="cf">function</span>(x) <span class="kw">lapply</span>(x, sd_pdp))</span>
<span id="cb25-13"><a href="#cb25-13"></a></span>
<span id="cb25-14"><a href="#cb25-14"></a><span class="co"># next we need to clean up all the items of our lists are tidy data frames/matrices</span></span>
<span id="cb25-15"><a href="#cb25-15"></a>pdp_imps &lt;-<span class="st"> </span><span class="kw">lapply</span>(pdp_imps, <span class="cf">function</span>(x) <span class="kw">do.call</span>(rbind, x))</span>
<span id="cb25-16"><a href="#cb25-16"></a></span>
<span id="cb25-17"><a href="#cb25-17"></a><span class="co"># finally before we can plot, we add a character vector indicating model type</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>pdp_imps &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">names</span>(pdp_imps), <span class="cf">function</span>(x) {</span>
<span id="cb25-19"><a href="#cb25-19"></a>  pdp_imps[[x]]<span class="op">$</span>model &lt;-<span class="st"> </span>x</span>
<span id="cb25-20"><a href="#cb25-20"></a>  <span class="kw">return</span>(pdp_imps[[x]])</span>
<span id="cb25-21"><a href="#cb25-21"></a>  }</span>
<span id="cb25-22"><a href="#cb25-22"></a>)</span>
<span id="cb25-23"><a href="#cb25-23"></a></span>
<span id="cb25-24"><a href="#cb25-24"></a><span class="co"># then we turn it all into a nice data frame</span></span>
<span id="cb25-25"><a href="#cb25-25"></a>pdp_imps &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, pdp_imps)</span>
<span id="cb25-26"><a href="#cb25-26"></a></span>
<span id="cb25-27"><a href="#cb25-27"></a>pdp_imps<span class="op">%&gt;%</span><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> variable, <span class="dt">y =</span> importance, <span class="dt">fill =</span> model)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb25-28"><a href="#cb25-28"></a><span class="st">  </span><span class="kw">facet_grid</span>(model <span class="op">~</span><span class="st"> </span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span>ggthemes<span class="op">::</span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb25-29"><a href="#cb25-29"></a><span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_fill_fivethirtyeight</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Partial Dependence Importance&quot;</span>)</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-20-1.svg" width="672" /></p>
</div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<p>Something odd is happening here, our partial dependence importances are way off (and if you look at the partial dependence graphs, something is off there too)! If we just focus on the random forest plots, we immediately see that are importances are completely wrong relative to the truth. Why is this? To investigate, lets look at the correlation of our variables:</p>
<div class="fold s">
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">library</span>(corrplot) </span>
<span id="cb26-2"><a href="#cb26-2"></a>correlator  &lt;-<span class="st">  </span><span class="cf">function</span>(df){</span>
<span id="cb26-3"><a href="#cb26-3"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="st">        </span><span class="kw">keep</span>(is.numeric) <span class="op">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="st">        </span>tidyr<span class="op">::</span><span class="kw">drop_na</span>() <span class="op">%&gt;%</span></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="st">        </span>cor <span class="op">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="st">        </span><span class="kw">corrplot</span>(<span class="st">&quot;upper&quot;</span>, <span class="dt">addCoef.col =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">number.digits =</span> <span class="dv">2</span>,</span>
<span id="cb26-8"><a href="#cb26-8"></a>             <span class="dt">number.cex =</span> <span class="fl">0.8</span>, <span class="dt">method=</span><span class="st">&quot;circle&quot;</span>,</span>
<span id="cb26-9"><a href="#cb26-9"></a>             <span class="dt">order=</span><span class="st">&quot;hclust&quot;</span>, </span>
<span id="cb26-10"><a href="#cb26-10"></a>             <span class="dt">tl.srt=</span><span class="dv">45</span>, <span class="dt">tl.cex =</span> <span class="dv">1</span>)</span>
<span id="cb26-11"><a href="#cb26-11"></a>}</span>
<span id="cb26-12"><a href="#cb26-12"></a></span>
<span id="cb26-13"><a href="#cb26-13"></a>X_test <span class="op">%&gt;%</span><span class="st"> </span>correlator</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="iml_files/figure-html/unnamed-chunk-21-1.svg" alt="Correlation Heatmap" width="960" />
<p class="caption">
Correlation Heatmap
</p>
</div>
</div>
<p>Our variables are highly correlated! This represents a massive problem to most interpretable ML techniques, especially those which rely on marginal distributions. There are multiple problems here. First, we have already mentioned the problem of unrealistic observations, such as boats which would be physically incapable of floating, or ones that are less buoyant than air. Another problem is the problem of averaging, in which we are actually averaging the effects of the variables correlated with <span class="math inline">\(x_s\)</span> over <span class="math inline">\(x_s\)</span>. If the correlations are strong and set up right, they can actually nullify the effect of the variable when we take this average. We will now look at two methods which are robust to correlation!</p>
</div>
</div>
<div id="individual-conditional-expectation-ice" class="section level1">
<h1>Individual Conditional Expectation (ICE)</h1>
<p>ICE is very simple to understand. If we are having trouble with the averaging step with PDP, why don’t we just get rid of it! Partial dependence, through averaging, hides potential complex effects and interactions between the variables. By taking out this averaging step, maybe we can learn a bit more about whats going on!</p>
<p>As a corrolary to this, <a href="https://arxiv.org/abs/1805.04755">this paper</a> suggests we can also calculate a correlation robust variable importance with ICE. To do so, we calculate the standard deviation of each ICE curve, and then average <strong>those</strong>. This should yield an accurate variable importance!</p>
<div id="code-implementation-2" class="section level2 tabset tabset-pills">
<h2>Code Implementation</h2>
<div id="in-python-2" class="section level3">
<h3>In Python</h3>
<p>The code implementation of ICE is rather simple, it is the exact same as the PDP code, only without averaging! First we will calculate the ICE curve for a single variable:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="kw">def</span> ICE_var(model, x, var):</span>
<span id="cb27-3"><a href="#cb27-3"></a>    explan <span class="op">=</span> <span class="bu">sorted</span>(x[var])</span>
<span id="cb27-4"><a href="#cb27-4"></a>    med <span class="op">=</span> explan</span>
<span id="cb27-5"><a href="#cb27-5"></a>    preds <span class="op">=</span> []</span>
<span id="cb27-6"><a href="#cb27-6"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(explan)):</span>
<span id="cb27-7"><a href="#cb27-7"></a>        tmp <span class="op">=</span> []</span>
<span id="cb27-8"><a href="#cb27-8"></a>        X_tmp <span class="op">=</span> x.copy()</span>
<span id="cb27-9"><a href="#cb27-9"></a>        <span class="co"># pandas is dumb</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>        val <span class="op">=</span> np.asarray(explan)[i]</span>
<span id="cb27-11"><a href="#cb27-11"></a>        X_tmp[var] <span class="op">=</span> val</span>
<span id="cb27-12"><a href="#cb27-12"></a>        preds.append(model.predict(X_tmp))</span>
<span id="cb27-13"><a href="#cb27-13"></a>    preds <span class="op">=</span> np.asarray(preds).reshape(<span class="bu">len</span>(x), <span class="bu">len</span>(explan))</span>
<span id="cb27-14"><a href="#cb27-14"></a>    <span class="cf">return</span>(explan, preds)</span></code></pre></div>
<p>Next, lets go ahead and scale that up for an entire data frame and plot those ICE curves.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="kw">def</span> plotICE(ex, values, ax <span class="op">=</span> <span class="va">None</span>):</span>
<span id="cb28-3"><a href="#cb28-3"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(ex)):</span>
<span id="cb28-4"><a href="#cb28-4"></a>        <span class="cf">if</span> (ax <span class="kw">is</span> <span class="va">None</span>):</span>
<span id="cb28-5"><a href="#cb28-5"></a>            plt.plot(ex,values[i,:], <span class="st">&#39;black&#39;</span>, alpha <span class="op">=</span> <span class="fl">0.1</span>)</span>
<span id="cb28-6"><a href="#cb28-6"></a>        <span class="cf">else</span>:</span>
<span id="cb28-7"><a href="#cb28-7"></a>            ax.plot(ex,values[i,:], <span class="st">&#39;black&#39;</span>, alpha <span class="op">=</span> <span class="fl">0.1</span>)</span>
<span id="cb28-8"><a href="#cb28-8"></a></span>
<span id="cb28-9"><a href="#cb28-9"></a></span>
<span id="cb28-10"><a href="#cb28-10"></a>fig <span class="op">=</span> plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(X_test.columns)):</span>
<span id="cb28-12"><a href="#cb28-12"></a>    iceX, iceY <span class="op">=</span> ICE_var(rf, X_test, X_test.columns[i])</span>
<span id="cb28-13"><a href="#cb28-13"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="dv">2</span>,<span class="dv">3</span>, i<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb28-14"><a href="#cb28-14"></a>    plotICE(iceX, iceY, ax <span class="op">=</span> ax)</span>
<span id="cb28-15"><a href="#cb28-15"></a>    ax.set_title(X_test.columns[i])</span>
<span id="cb28-16"><a href="#cb28-16"></a></span>
<span id="cb28-17"><a href="#cb28-17"></a>plt.show()</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-23-1.svg" /><!-- --></p>
<p>So, what to these plots tell us? Since there are so many lines, it is hard to glean any truly useful numeric solutions from this. We can tell two useful things from this. The first thing to look at is the range of the peaks of the highest curves to the troughs of the lowest curves. This gives us an idea of the strength of the variable. The next thing to look out for is big splits in the curves, such as those seen in cabins and tonnage. These are indicative of heterogenous effects (interactions between correlated variables), and also show us why PDP fails. If we average these variables with large spits, we are hiding that effect, and cancelling out a lot of it. For example, if you look at cabins, there is a large symmetric split. When we average these curves, we will end up with a pretty flat curve with a very small range. This is why when we have these complicated, correlated, effects, partial dependence (or any tool which relies on averages of predictions of correlated variables) fails. It is also important to look back to the correlation plot and see the lack of correlation in passengers and passenger density. This is evident in the ICE curves as well! We can now look at the variable importance using ICE, and see whether it is improved or not.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">def</span> ICE_vips(model, x):</span>
<span id="cb29-2"><a href="#cb29-2"></a>    imps <span class="op">=</span> {}</span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(x.columns)):</span>
<span id="cb29-4"><a href="#cb29-4"></a>        icex, icey <span class="op">=</span> ICE_var(model, x, x.columns[i])</span>
<span id="cb29-5"><a href="#cb29-5"></a>        imps[x.columns[i]] <span class="op">=</span> (np.std(icey, <span class="dv">0</span>)).mean()</span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="cf">return</span>(imps)</span>
<span id="cb29-7"><a href="#cb29-7"></a></span>
<span id="cb29-8"><a href="#cb29-8"></a></span>
<span id="cb29-9"><a href="#cb29-9"></a>ice_imps <span class="op">=</span> {get_name(m): ICE_vips(m, X) <span class="cf">for</span> m <span class="kw">in</span> models}</span>
<span id="cb29-10"><a href="#cb29-10"></a></span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="kw">def</span> plot_ICE_imp(d, ax <span class="op">=</span> <span class="va">None</span>, color <span class="op">=</span> <span class="st">&quot;blue&quot;</span>):</span>
<span id="cb29-12"><a href="#cb29-12"></a>    df <span class="op">=</span> pd.DataFrame()</span>
<span id="cb29-13"><a href="#cb29-13"></a>    df[<span class="st">&quot;Variable&quot;</span>] <span class="op">=</span> d.keys()</span>
<span id="cb29-14"><a href="#cb29-14"></a>    df[<span class="st">&quot;Importance&quot;</span>] <span class="op">=</span> d.values()</span>
<span id="cb29-15"><a href="#cb29-15"></a>    df.sort_values(<span class="st">&quot;Importance&quot;</span>).plot(kind <span class="op">=</span> <span class="st">&quot;barh&quot;</span>, x <span class="op">=</span> <span class="st">&quot;Variable&quot;</span>, y <span class="op">=</span> <span class="st">&quot;Importance&quot;</span>, width <span class="op">=</span> <span class="fl">0.8</span>, ax <span class="op">=</span> ax, color <span class="op">=</span> c)</span>
<span id="cb29-16"><a href="#cb29-16"></a></span>
<span id="cb29-17"><a href="#cb29-17"></a>fig <span class="op">=</span> plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb29-18"><a href="#cb29-18"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ice_imps.keys())):</span>
<span id="cb29-19"><a href="#cb29-19"></a>    ax <span class="op">=</span> fig.add_subplot(<span class="bu">len</span>(<span class="bu">list</span>(ice_imps.keys())),<span class="dv">1</span>, i<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb29-20"><a href="#cb29-20"></a>    <span class="co">#c = cm.Paired(i/len(imps.keys()), 1)</span></span>
<span id="cb29-21"><a href="#cb29-21"></a>    c <span class="op">=</span> sns.color_palette(<span class="st">&quot;hls&quot;</span>, i<span class="op">+</span><span class="dv">1</span>)[i]</span>
<span id="cb29-22"><a href="#cb29-22"></a>    plot_ICE_imp(ice_imps[<span class="bu">list</span>(ice_imps.keys())[i]], ax <span class="op">=</span> ax, color <span class="op">=</span> c)</span>
<span id="cb29-23"><a href="#cb29-23"></a>    ax.set_title(<span class="bu">list</span>(ice_imps.keys())[i])</span>
<span id="cb29-24"><a href="#cb29-24"></a>plt.show()</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-24-1.svg" /><!-- --></p>
<p>Look at that! The relative importances match up with those calculated both for the random forest and for the linear model, even though we have correlated values!</p>
</div>
<div id="in-r-2" class="section level3">
<h3>In R</h3>
<p>The code implementation of ICE is rather simple, it is the exact same as the PDP code, only without averaging! First we will calculate the ICE curve for a single variable:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>ice_var &lt;-<span class="st"> </span><span class="cf">function</span>(model, x, var){</span>
<span id="cb30-2"><a href="#cb30-2"></a>  x_sorted &lt;-<span class="st"> </span>x[<span class="kw">order</span>(x[[var]], <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="co"># predefine matrix!</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>  out &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow =</span> <span class="kw">nrow</span>(x), <span class="dt">ncol =</span> <span class="kw">nrow</span>(x))</span>
<span id="cb30-5"><a href="#cb30-5"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(x)) {</span>
<span id="cb30-6"><a href="#cb30-6"></a>    tmp_df &lt;-<span class="st"> </span>x_sorted</span>
<span id="cb30-7"><a href="#cb30-7"></a>    tmp_df[[var]] &lt;-<span class="st"> </span>tmp_df[[var]][i]</span>
<span id="cb30-8"><a href="#cb30-8"></a>    out[i,] &lt;-<span class="st"> </span><span class="kw">predict</span>(model, tmp_df)</span>
<span id="cb30-9"><a href="#cb30-9"></a>  }</span>
<span id="cb30-10"><a href="#cb30-10"></a>  <span class="kw">return</span>(<span class="kw">data.frame</span>(<span class="st">&quot;value&quot;</span> =<span class="st"> </span>x_sorted[[var]], <span class="st">&quot;ICE&quot;</span> =<span class="st"> </span><span class="kw">t</span>(out)))</span>
<span id="cb30-11"><a href="#cb30-11"></a>}</span></code></pre></div>
<p>Sweet, now lets go ahead and scale this up to run over an entire data frame. First, lets scale the ice function:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>ice_df &lt;-<span class="st"> </span><span class="cf">function</span>(model, df) {</span>
<span id="cb31-2"><a href="#cb31-2"></a>  out &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">colnames</span>(df), <span class="cf">function</span>(x) {</span>
<span id="cb31-3"><a href="#cb31-3"></a>    res &lt;-<span class="st"> </span><span class="kw">ice_var</span>(model, df, x)</span>
<span id="cb31-4"><a href="#cb31-4"></a>    res<span class="op">$</span>variable &lt;-<span class="st"> </span>x</span>
<span id="cb31-5"><a href="#cb31-5"></a>    <span class="kw">return</span>(res)</span>
<span id="cb31-6"><a href="#cb31-6"></a>  })</span>
<span id="cb31-7"><a href="#cb31-7"></a>  <span class="kw">return</span>(out)</span>
<span id="cb31-8"><a href="#cb31-8"></a>}</span>
<span id="cb31-9"><a href="#cb31-9"></a></span>
<span id="cb31-10"><a href="#cb31-10"></a></span>
<span id="cb31-11"><a href="#cb31-11"></a><span class="co"># for reference</span></span>
<span id="cb31-12"><a href="#cb31-12"></a>(rf_ice &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind,<span class="kw">ice_df</span>(trained_models[[<span class="dv">3</span>]], X_test)))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["ICE.1"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["ICE.2"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["ICE.3"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ICE.4"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ICE.5"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["ICE.6"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["ICE.7"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["ICE.8"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["ICE.9"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["ICE.10"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["ICE.11"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["ICE.12"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["ICE.13"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["ICE.14"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["ICE.15"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["ICE.16"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["ICE.17"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["ICE.18"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["ICE.19"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["ICE.20"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["ICE.21"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["ICE.22"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["ICE.23"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["ICE.24"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["ICE.25"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["ICE.26"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["ICE.27"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["ICE.28"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["ICE.29"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["ICE.30"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["ICE.31"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["ICE.32"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["ICE.33"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["ICE.34"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["ICE.35"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["ICE.36"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["ICE.37"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["ICE.38"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["ICE.39"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["ICE.40"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["variable"],"name":[42],"type":["chr"],"align":["left"]}],"data":[{"1":"44.000","2":"8.798182","3":"8.798182","4":"8.798182","5":"8.798182","6":"8.802057","7":"8.802057","8":"8.802057","9":"8.802057","10":"8.802057","11":"8.802057","12":"8.802057","13":"8.802057","14":"8.802057","15":"8.808457","16":"8.958508","17":"8.958508","18":"8.958508","19":"9.525055","20":"9.525055","21":"9.499047","22":"9.499047","23":"9.282435","24":"9.282435","25":"9.282435","26":"9.282435","27":"9.294582","28":"9.294582","29":"9.294582","30":"9.294582","31":"9.253565","32":"9.253565","33":"9.275415","34":"9.275415","35":"9.275415","36":"9.260295","37":"9.260295","38":"9.216262","39":"9.216262","40":"9.216262","41":"9.430022","42":"Age"},{"1":"36.000","2":"3.416403","3":"3.416403","4":"3.419563","5":"3.446730","6":"3.446730","7":"3.446730","8":"3.446730","9":"3.442390","10":"3.442390","11":"3.442390","12":"3.446190","13":"3.446190","14":"3.446190","15":"3.451190","16":"3.517835","17":"3.517835","18":"3.517835","19":"3.517835","20":"3.517835","21":"3.525293","22":"3.525293","23":"3.506913","24":"3.506913","25":"3.506913","26":"3.506913","27":"3.526613","28":"3.526613","29":"3.526613","30":"3.526613","31":"3.532113","32":"3.532113","33":"3.530313","34":"3.530313","35":"3.530313","36":"3.530313","37":"3.530313","38":"3.530313","39":"3.530313","40":"3.530313","41":"3.530313","42":"Age"},{"1":"29.000","2":"5.327943","3":"5.327943","4":"5.347843","5":"5.450072","6":"5.496107","7":"5.496107","8":"5.496107","9":"5.532512","10":"5.532512","11":"5.532512","12":"5.537812","13":"5.537812","14":"5.537812","15":"5.530092","16":"5.576080","17":"5.576080","18":"5.576080","19":"5.576080","20":"5.576080","21":"5.585205","22":"5.585205","23":"5.564805","24":"5.564805","25":"5.564805","26":"5.564805","27":"5.620855","28":"5.620855","29":"5.620855","30":"5.620855","31":"5.622680","32":"5.622680","33":"5.621680","34":"5.621680","35":"5.621680","36":"5.621680","37":"5.621680","38":"5.621680","39":"5.621680","40":"5.621680","41":"5.621680","42":"Age"},{"1":"27.000","2":"1.848342","3":"1.848342","4":"1.848242","5":"1.848242","6":"1.853642","7":"1.853642","8":"1.853642","9":"1.859402","10":"1.859402","11":"1.859402","12":"1.873627","13":"1.873627","14":"1.873627","15":"1.891627","16":"2.029252","17":"2.029252","18":"2.029252","19":"2.029252","20":"2.029252","21":"2.029252","22":"2.029252","23":"2.018652","24":"2.018652","25":"2.018652","26":"2.018652","27":"2.019932","28":"2.019932","29":"2.019932","30":"2.019932","31":"2.019932","32":"2.019932","33":"2.019932","34":"2.019932","35":"2.019932","36":"2.019932","37":"2.019932","38":"2.019932","39":"2.019932","40":"2.019932","41":"2.019932","42":"Age"},{"1":"25.000","2":"5.052277","3":"5.052277","4":"5.072177","5":"5.168085","6":"5.218695","7":"5.218695","8":"5.218695","9":"5.264680","10":"5.264680","11":"5.264680","12":"5.264680","13":"5.264680","14":"5.264680","15":"5.248380","16":"5.278982","17":"5.278982","18":"5.278982","19":"5.278982","20":"5.278982","21":"5.285547","22":"5.285547","23":"5.268447","24":"5.268447","25":"5.268447","26":"5.268447","27":"5.288147","28":"5.288147","29":"5.288147","30":"5.288147","31":"5.295632","32":"5.295632","33":"5.291798","34":"5.291798","35":"5.291798","36":"5.291798","37":"5.291798","38":"5.291798","39":"5.291798","40":"5.291798","41":"5.291798","42":"Age"},{"1":"25.000","2":"6.387058","3":"6.387058","4":"6.435598","5":"6.543457","6":"6.574503","7":"6.574503","8":"6.574503","9":"6.597713","10":"6.597713","11":"6.597713","12":"6.596513","13":"6.596513","14":"6.596513","15":"6.590988","16":"6.636167","17":"6.636167","18":"6.636167","19":"6.640967","20":"6.640967","21":"6.640967","22":"6.640967","23":"6.643717","24":"6.643717","25":"6.643717","26":"6.643717","27":"6.693322","28":"6.693322","29":"6.693322","30":"6.693322","31":"6.705022","32":"6.705022","33":"6.712482","34":"6.712482","35":"6.712482","36":"6.712482","37":"6.712482","38":"6.712482","39":"6.712482","40":"6.712482","41":"6.712482","42":"Age"},{"1":"25.000","2":"8.794651","3":"8.794651","4":"8.794651","5":"8.794651","6":"8.794651","7":"8.794651","8":"8.794651","9":"8.794651","10":"8.794651","11":"8.794651","12":"8.794651","13":"8.794651","14":"8.794651","15":"8.812785","16":"8.881580","17":"8.881580","18":"8.881580","19":"9.085600","20":"9.085600","21":"9.081550","22":"9.081550","23":"9.103250","24":"9.103250","25":"9.103250","26":"9.103250","27":"9.134121","28":"9.134121","29":"9.134121","30":"9.134121","31":"9.128171","32":"9.128171","33":"9.062568","34":"9.062568","35":"9.062568","36":"9.143143","37":"9.143143","38":"9.143143","39":"9.143143","40":"9.143143","41":"9.309010","42":"Age"},{"1":"22.000","2":"5.792243","3":"5.792243","4":"5.814743","5":"5.893507","6":"5.927717","7":"5.927717","8":"5.927717","9":"5.947455","10":"5.947455","11":"5.947455","12":"5.952755","13":"5.952755","14":"5.952755","15":"5.947085","16":"5.932862","17":"5.932862","18":"5.932862","19":"5.924962","20":"5.924962","21":"5.924962","22":"5.924962","23":"5.920222","24":"5.920222","25":"5.920222","26":"5.920222","27":"5.986218","28":"5.986218","29":"5.986218","30":"5.986218","31":"6.006918","32":"6.006918","33":"6.015118","34":"6.015118","35":"6.015118","36":"6.015118","37":"6.015118","38":"6.015118","39":"6.015118","40":"6.015118","41":"6.015118","42":"Age"},{"1":"22.000","2":"9.026442","3":"9.026442","4":"9.026442","5":"9.026442","6":"9.026442","7":"9.026442","8":"9.026442","9":"9.026442","10":"9.026442","11":"9.026442","12":"9.026442","13":"9.026442","14":"9.026442","15":"9.044575","16":"9.118910","17":"9.118910","18":"9.118910","19":"9.314855","20":"9.314855","21":"9.310805","22":"9.310805","23":"9.357765","24":"9.357765","25":"9.357765","26":"9.357765","27":"9.388637","28":"9.388637","29":"9.388637","30":"9.388637","31":"9.382687","32":"9.382687","33":"9.243327","34":"9.243327","35":"9.243327","36":"9.314902","37":"9.314902","38":"9.314902","39":"9.314902","40":"9.314902","41":"9.480843","42":"Age"},{"1":"22.000","2":"1.026795","3":"1.026795","4":"1.026795","5":"1.026795","6":"1.032195","7":"1.032195","8":"1.032195","9":"1.056095","10":"1.056095","11":"1.056095","12":"1.066520","13":"1.066520","14":"1.066520","15":"1.084370","16":"1.249870","17":"1.249870","18":"1.249870","19":"1.249870","20":"1.249870","21":"1.249870","22":"1.249870","23":"1.249870","24":"1.249870","25":"1.249870","26":"1.249870","27":"1.269950","28":"1.269950","29":"1.269950","30":"1.269950","31":"1.269950","32":"1.269950","33":"1.269950","34":"1.269950","35":"1.269950","36":"1.269950","37":"1.269950","38":"1.269950","39":"1.269950","40":"1.269950","41":"1.269950","42":"Age"},{"1":"21.000","2":"3.824703","3":"3.824703","4":"3.839038","5":"3.866205","6":"3.881205","7":"3.881205","8":"3.881205","9":"3.847232","10":"3.847232","11":"3.847232","12":"3.847232","13":"3.847232","14":"3.847232","15":"3.847232","16":"3.904803","17":"3.904803","18":"3.904803","19":"3.904803","20":"3.904803","21":"3.893727","22":"3.893727","23":"3.849563","24":"3.849563","25":"3.849563","26":"3.849563","27":"3.850843","28":"3.850843","29":"3.850843","30":"3.850843","31":"3.850843","32":"3.850843","33":"3.845685","34":"3.845685","35":"3.845685","36":"3.845685","37":"3.845685","38":"3.845685","39":"3.845685","40":"3.845685","41":"3.845685","42":"Age"},{"1":"21.000","2":"5.054805","3":"5.054805","4":"5.113305","5":"5.169822","6":"5.223365","7":"5.223365","8":"5.223365","9":"5.296750","10":"5.296750","11":"5.296750","12":"5.296750","13":"5.296750","14":"5.296750","15":"5.265050","16":"5.274693","17":"5.274693","18":"5.274693","19":"5.274693","20":"5.274693","21":"5.281258","22":"5.281258","23":"5.281258","24":"5.281258","25":"5.281258","26":"5.281258","27":"5.279258","28":"5.279258","29":"5.279258","30":"5.279258","31":"5.286743","32":"5.286743","33":"5.283943","34":"5.283943","35":"5.283943","36":"5.283943","37":"5.283943","38":"5.283943","39":"5.283943","40":"5.283943","41":"5.283943","42":"Age"},{"1":"21.000","2":"3.355727","3":"3.355727","4":"3.365962","5":"3.365962","6":"3.365962","7":"3.365962","8":"3.365962","9":"3.361622","10":"3.361622","11":"3.361622","12":"3.365422","13":"3.365422","14":"3.365422","15":"3.379255","16":"3.418400","17":"3.418400","18":"3.418400","19":"3.418400","20":"3.418400","21":"3.416733","22":"3.416733","23":"3.388878","24":"3.388878","25":"3.388878","26":"3.388878","27":"3.390158","28":"3.390158","29":"3.390158","30":"3.390158","31":"3.390158","32":"3.390158","33":"3.388358","34":"3.388358","35":"3.388358","36":"3.388358","37":"3.388358","38":"3.388358","39":"3.388358","40":"3.388358","41":"3.388358","42":"Age"},{"1":"19.000","2":"1.885545","3":"1.885545","4":"1.885545","5":"1.885545","6":"1.890945","7":"1.890945","8":"1.890945","9":"1.903845","10":"1.903845","11":"1.903845","12":"1.918070","13":"1.918070","14":"1.918070","15":"1.954603","16":"2.080928","17":"2.080928","18":"2.080928","19":"2.080928","20":"2.080928","21":"2.080928","22":"2.080928","23":"2.080928","24":"2.080928","25":"2.080928","26":"2.080928","27":"2.101008","28":"2.101008","29":"2.101008","30":"2.101008","31":"2.101008","32":"2.101008","33":"2.101008","34":"2.101008","35":"2.101008","36":"2.101008","37":"2.101008","38":"2.101008","39":"2.101008","40":"2.101008","41":"2.101008","42":"Age"},{"1":"16.000","2":"8.642663","3":"8.642663","4":"8.642663","5":"8.642663","6":"8.646538","7":"8.646538","8":"8.646538","9":"8.646538","10":"8.646538","11":"8.646538","12":"8.646538","13":"8.646538","14":"8.646538","15":"8.654338","16":"8.735987","17":"8.735987","18":"8.735987","19":"9.092213","20":"9.092213","21":"9.060113","22":"9.060113","23":"8.884900","24":"8.884900","25":"8.884900","26":"8.884900","27":"8.884713","28":"8.884713","29":"8.884713","30":"8.884713","31":"8.841788","32":"8.841788","33":"8.849918","34":"8.849918","35":"8.849918","36":"8.882352","37":"8.882352","38":"8.834207","39":"8.834207","40":"8.834207","41":"9.012033","42":"Age"},{"1":"16.000","2":"5.691713","3":"5.691713","4":"5.714213","5":"5.743220","6":"5.766130","7":"5.766130","8":"5.766130","9":"5.769265","10":"5.769265","11":"5.769265","12":"5.741465","13":"5.741465","14":"5.741465","15":"5.749615","16":"5.770167","17":"5.770167","18":"5.770167","19":"5.776867","20":"5.776867","21":"5.781667","22":"5.781667","23":"5.782967","24":"5.782967","25":"5.782967","26":"5.782967","27":"5.847363","28":"5.847363","29":"5.847363","30":"5.847363","31":"5.890753","32":"5.890753","33":"5.912593","34":"5.912593","35":"5.912593","36":"5.912593","37":"5.912593","38":"5.912593","39":"5.912593","40":"5.912593","41":"5.912593","42":"Age"},{"1":"16.000","2":"1.982937","3":"1.982937","4":"1.982937","5":"1.982937","6":"1.988337","7":"1.988337","8":"1.988337","9":"2.001237","10":"2.001237","11":"2.001237","12":"2.015462","13":"2.015462","14":"2.015462","15":"2.051995","16":"2.152020","17":"2.152020","18":"2.152020","19":"2.152020","20":"2.152020","21":"2.152020","22":"2.152020","23":"2.152020","24":"2.152020","25":"2.152020","26":"2.152020","27":"2.172100","28":"2.172100","29":"2.172100","30":"2.172100","31":"2.172100","32":"2.172100","33":"2.172100","34":"2.172100","35":"2.172100","36":"2.172100","37":"2.172100","38":"2.172100","39":"2.172100","40":"2.172100","41":"2.172100","42":"Age"},{"1":"15.000","2":"3.726655","3":"3.726655","4":"3.742490","5":"3.742490","6":"3.742490","7":"3.742490","8":"3.742490","9":"3.733157","10":"3.733157","11":"3.733157","12":"3.733157","13":"3.733157","14":"3.733157","15":"3.733157","16":"3.828308","17":"3.828308","18":"3.828308","19":"3.828308","20":"3.828308","21":"3.817398","22":"3.817398","23":"3.773268","24":"3.773268","25":"3.773268","26":"3.773268","27":"3.774548","28":"3.774548","29":"3.774548","30":"3.774548","31":"3.774548","32":"3.774548","33":"3.770948","34":"3.770948","35":"3.770948","36":"3.770948","37":"3.770948","38":"3.770948","39":"3.770948","40":"3.770948","41":"3.770948","42":"Age"},{"1":"15.000","2":"8.098560","3":"8.098560","4":"8.098560","5":"8.098560","6":"8.098560","7":"8.098560","8":"8.098560","9":"8.098560","10":"8.098560","11":"8.098560","12":"8.098560","13":"8.098560","14":"8.098560","15":"8.108360","16":"8.044107","17":"8.044107","18":"8.044107","19":"8.297273","20":"8.297273","21":"8.319040","22":"8.319040","23":"8.328728","24":"8.328728","25":"8.328728","26":"8.328728","27":"8.367670","28":"8.367670","29":"8.367670","30":"8.367670","31":"8.326996","32":"8.326996","33":"8.335796","34":"8.335796","35":"8.335796","36":"8.376725","37":"8.376725","38":"8.343950","39":"8.343950","40":"8.343950","41":"8.504567","42":"Age"},{"1":"14.000","2":"10.355616","3":"10.355616","4":"10.355616","5":"10.355616","6":"10.355616","7":"10.355616","8":"10.355616","9":"10.355616","10":"10.355616","11":"10.355616","12":"10.355616","13":"10.355616","14":"10.355616","15":"10.370149","16":"10.393204","17":"10.393204","18":"10.393204","19":"10.571214","20":"10.571214","21":"10.582714","22":"10.582714","23":"10.616214","24":"10.616214","25":"10.616214","26":"10.616214","27":"10.642939","28":"10.642939","29":"10.642939","30":"10.642939","31":"10.641439","32":"10.641439","33":"10.377459","34":"10.377459","35":"10.377459","36":"10.400109","37":"10.400109","38":"10.400109","39":"10.400109","40":"10.400109","41":"10.499809","42":"Age"},{"1":"14.000","2":"3.382663","3":"3.382663","4":"3.386238","5":"3.378038","6":"3.378038","7":"3.378038","8":"3.378038","9":"3.420163","10":"3.420163","11":"3.420163","12":"3.420163","13":"3.420163","14":"3.420163","15":"3.425163","16":"3.517415","17":"3.517415","18":"3.517415","19":"3.517415","20":"3.517415","21":"3.513815","22":"3.513815","23":"3.498065","24":"3.498065","25":"3.498065","26":"3.498065","27":"3.518145","28":"3.518145","29":"3.518145","30":"3.518145","31":"3.508885","32":"3.508885","33":"3.508885","34":"3.508885","35":"3.508885","36":"3.508885","37":"3.508885","38":"3.508885","39":"3.508885","40":"3.508885","41":"3.508885","42":"Age"},{"1":"13.000","2":"10.717611","3":"10.717611","4":"10.717611","5":"10.717611","6":"10.717611","7":"10.717611","8":"10.717611","9":"10.717611","10":"10.717611","11":"10.717611","12":"10.717611","13":"10.717611","14":"10.717611","15":"10.717611","16":"10.754166","17":"10.754166","18":"10.754166","19":"10.940176","20":"10.940176","21":"10.951676","22":"10.951676","23":"10.988076","24":"10.988076","25":"10.988076","26":"10.988076","27":"11.014801","28":"11.014801","29":"11.014801","30":"11.014801","31":"11.013301","32":"11.013301","33":"10.599271","34":"10.599271","35":"10.599271","36":"10.617687","37":"10.617687","38":"10.617687","39":"10.617687","40":"10.617687","41":"10.717387","42":"Age"},{"1":"13.000","2":"9.431028","3":"9.431028","4":"9.431028","5":"9.431028","6":"9.434903","7":"9.434903","8":"9.434903","9":"9.434903","10":"9.434903","11":"9.434903","12":"9.434903","13":"9.434903","14":"9.434903","15":"9.434903","16":"9.521855","17":"9.521855","18":"9.521855","19":"9.906595","20":"9.906595","21":"9.912635","22":"9.912635","23":"9.775968","24":"9.775968","25":"9.775968","26":"9.775968","27":"9.749335","28":"9.749335","29":"9.749335","30":"9.749335","31":"9.640452","32":"9.640452","33":"9.683835","34":"9.683835","35":"9.683835","36":"9.622157","37":"9.622157","38":"9.584657","39":"9.584657","40":"9.584657","41":"9.697850","42":"Age"},{"1":"13.000","2":"9.093023","3":"9.093023","4":"9.093023","5":"9.093023","6":"9.093023","7":"9.093023","8":"9.093023","9":"9.093023","10":"9.093023","11":"9.093023","12":"9.093023","13":"9.093023","14":"9.093023","15":"9.093023","16":"9.155457","17":"9.155457","18":"9.155457","19":"9.511503","20":"9.511503","21":"9.537570","22":"9.537570","23":"9.303813","24":"9.303813","25":"9.303813","26":"9.303813","27":"9.289013","28":"9.289013","29":"9.289013","30":"9.289013","31":"9.215850","32":"9.215850","33":"9.286570","34":"9.286570","35":"9.286570","36":"9.225087","37":"9.225087","38":"9.156350","39":"9.156350","40":"9.156350","41":"9.275587","42":"Age"},{"1":"13.000","2":"3.726655","3":"3.726655","4":"3.742490","5":"3.742490","6":"3.742490","7":"3.742490","8":"3.742490","9":"3.733157","10":"3.733157","11":"3.733157","12":"3.733157","13":"3.733157","14":"3.733157","15":"3.733157","16":"3.828308","17":"3.828308","18":"3.828308","19":"3.828308","20":"3.828308","21":"3.817398","22":"3.817398","23":"3.773268","24":"3.773268","25":"3.773268","26":"3.773268","27":"3.774548","28":"3.774548","29":"3.774548","30":"3.774548","31":"3.774548","32":"3.774548","33":"3.770948","34":"3.770948","35":"3.770948","36":"3.770948","37":"3.770948","38":"3.770948","39":"3.770948","40":"3.770948","41":"3.770948","42":"Age"},{"1":"12.000","2":"9.431028","3":"9.431028","4":"9.431028","5":"9.431028","6":"9.434903","7":"9.434903","8":"9.434903","9":"9.434903","10":"9.434903","11":"9.434903","12":"9.434903","13":"9.434903","14":"9.434903","15":"9.434903","16":"9.521855","17":"9.521855","18":"9.521855","19":"9.906595","20":"9.906595","21":"9.912635","22":"9.912635","23":"9.775968","24":"9.775968","25":"9.775968","26":"9.775968","27":"9.749335","28":"9.749335","29":"9.749335","30":"9.749335","31":"9.640452","32":"9.640452","33":"9.683835","34":"9.683835","35":"9.683835","36":"9.622157","37":"9.622157","38":"9.584657","39":"9.584657","40":"9.584657","41":"9.697850","42":"Age"},{"1":"12.000","2":"1.057360","3":"1.057360","4":"1.057260","5":"1.057260","6":"1.062660","7":"1.062660","8":"1.062660","9":"1.081420","10":"1.081420","11":"1.081420","12":"1.091845","13":"1.091845","14":"1.091845","15":"1.105495","16":"1.235045","17":"1.235045","18":"1.235045","19":"1.235045","20":"1.235045","21":"1.235045","22":"1.235045","23":"1.235045","24":"1.235045","25":"1.235045","26":"1.235045","27":"1.236325","28":"1.236325","29":"1.236325","30":"1.236325","31":"1.236325","32":"1.236325","33":"1.236325","34":"1.236325","35":"1.236325","36":"1.236325","37":"1.236325","38":"1.236325","39":"1.236325","40":"1.236325","41":"1.236325","42":"Age"},{"1":"12.000","2":"11.062612","3":"11.062612","4":"11.062612","5":"11.062612","6":"11.062612","7":"11.062612","8":"11.062612","9":"11.062612","10":"11.062612","11":"11.062612","12":"11.062612","13":"11.062612","14":"11.062612","15":"11.062612","16":"11.205782","17":"11.205782","18":"11.205782","19":"11.328232","20":"11.328232","21":"11.354682","22":"11.354682","23":"11.358365","24":"11.358365","25":"11.358365","26":"11.358365","27":"11.376582","28":"11.376582","29":"11.376582","30":"11.376582","31":"11.387465","32":"11.387465","33":"11.312332","34":"11.312332","35":"11.312332","36":"11.304415","37":"11.304415","38":"11.330415","39":"11.330415","40":"11.330415","41":"11.491785","42":"Age"},{"1":"12.000","2":"4.808322","3":"4.808322","4":"4.811897","5":"4.808997","6":"4.827697","7":"4.827697","8":"4.827697","9":"4.824288","10":"4.824288","11":"4.824288","12":"4.832788","13":"4.832788","14":"4.832788","15":"4.832788","16":"4.913298","17":"4.913298","18":"4.913298","19":"4.913298","20":"4.913298","21":"4.905798","22":"4.905798","23":"4.896323","24":"4.896323","25":"4.896323","26":"4.896323","27":"4.921953","28":"4.921953","29":"4.921953","30":"4.921953","31":"4.921193","32":"4.921193","33":"4.921193","34":"4.921193","35":"4.921193","36":"4.921193","37":"4.921193","38":"4.921193","39":"4.921193","40":"4.921193","41":"4.921193","42":"Age"},{"1":"11.000","2":"9.431028","3":"9.431028","4":"9.431028","5":"9.431028","6":"9.434903","7":"9.434903","8":"9.434903","9":"9.434903","10":"9.434903","11":"9.434903","12":"9.434903","13":"9.434903","14":"9.434903","15":"9.434903","16":"9.521855","17":"9.521855","18":"9.521855","19":"9.906595","20":"9.906595","21":"9.912635","22":"9.912635","23":"9.775968","24":"9.775968","25":"9.775968","26":"9.775968","27":"9.749335","28":"9.749335","29":"9.749335","30":"9.749335","31":"9.640452","32":"9.640452","33":"9.683835","34":"9.683835","35":"9.683835","36":"9.622157","37":"9.622157","38":"9.584657","39":"9.584657","40":"9.584657","41":"9.697850","42":"Age"},{"1":"11.000","2":"9.861548","3":"9.861548","4":"9.861548","5":"9.861548","6":"9.861548","7":"9.861548","8":"9.861548","9":"9.861548","10":"9.861548","11":"9.861548","12":"9.861548","13":"9.861548","14":"9.861548","15":"9.861548","16":"9.918148","17":"9.918148","18":"9.918148","19":"10.258998","20":"10.258998","21":"10.264732","22":"10.264732","23":"10.198275","24":"10.198275","25":"10.198275","26":"10.198275","27":"10.177142","28":"10.177142","29":"10.177142","30":"10.177142","31":"10.183387","32":"10.183387","33":"10.278427","34":"10.278427","35":"10.278427","36":"10.270067","37":"10.270067","38":"10.285067","39":"10.285067","40":"10.285067","41":"10.430020","42":"Age"},{"1":"9.000","2":"10.862173","3":"10.862173","4":"10.862173","5":"10.862173","6":"10.862173","7":"10.862173","8":"10.862173","9":"10.862173","10":"10.862173","11":"10.862173","12":"10.862173","13":"10.862173","14":"10.862173","15":"10.862173","16":"10.982343","17":"10.982343","18":"10.982343","19":"11.126027","20":"11.126027","21":"11.141577","22":"11.141577","23":"11.138352","24":"11.138352","25":"11.138352","26":"11.138352","27":"11.118218","28":"11.118218","29":"11.118218","30":"11.118218","31":"11.142388","32":"11.142388","33":"10.833458","34":"10.833458","35":"10.833458","36":"10.851875","37":"10.851875","38":"10.875225","39":"10.875225","40":"10.875225","41":"10.964365","42":"Age"},{"1":"9.000","2":"8.829205","3":"8.829205","4":"8.829205","5":"8.829205","6":"8.829205","7":"8.829205","8":"8.829205","9":"8.829205","10":"8.829205","11":"8.829205","12":"8.829205","13":"8.829205","14":"8.829205","15":"8.839005","16":"8.805167","17":"8.805167","18":"8.805167","19":"9.080230","20":"9.080230","21":"9.057207","22":"9.057207","23":"8.997940","24":"8.997940","25":"8.997940","26":"8.997940","27":"9.041595","28":"9.041595","29":"9.041595","30":"9.041595","31":"9.028245","32":"9.028245","33":"9.101818","34":"9.101818","35":"9.101818","36":"9.100985","37":"9.100985","38":"9.063392","39":"9.063392","40":"9.063392","41":"9.220018","42":"Age"},{"1":"9.000","2":"9.183041","3":"9.183041","4":"9.183041","5":"9.183041","6":"9.183041","7":"9.183041","8":"9.183041","9":"9.183041","10":"9.183041","11":"9.183041","12":"9.183041","13":"9.183041","14":"9.183041","15":"9.183041","16":"9.170761","17":"9.170761","18":"9.170761","19":"9.391674","20":"9.391674","21":"9.388741","22":"9.388741","23":"9.404807","24":"9.404807","25":"9.404807","26":"9.404807","27":"9.434679","28":"9.434679","29":"9.434679","30":"9.434679","31":"9.426405","32":"9.426405","33":"9.504295","34":"9.504295","35":"9.504295","36":"9.517402","37":"9.517402","38":"9.505752","39":"9.505752","40":"9.505752","41":"9.677619","42":"Age"},{"1":"7.000","2":"9.721157","3":"9.721157","4":"9.721157","5":"9.721157","6":"9.721157","7":"9.721157","8":"9.721157","9":"9.721157","10":"9.721157","11":"9.721157","12":"9.721157","13":"9.721157","14":"9.721157","15":"9.721157","16":"9.700497","17":"9.700497","18":"9.700497","19":"9.844851","20":"9.844851","21":"9.847667","22":"9.847667","23":"9.841967","24":"9.841967","25":"9.841967","26":"9.841967","27":"9.872839","28":"9.872839","29":"9.872839","30":"9.872839","31":"9.866365","32":"9.866365","33":"9.840522","34":"9.840522","35":"9.840522","36":"9.874529","37":"9.874529","38":"9.862879","39":"9.862879","40":"9.862879","41":"10.003746","42":"Age"},{"1":"7.000","2":"12.087293","3":"12.087293","4":"12.087293","5":"12.087293","6":"12.087293","7":"12.087293","8":"12.087293","9":"12.087293","10":"12.087293","11":"12.087293","12":"12.087293","13":"12.087293","14":"12.087293","15":"12.087293","16":"12.207603","17":"12.207603","18":"12.207603","19":"12.399348","20":"12.399348","21":"12.413923","22":"12.413923","23":"12.433623","24":"12.433623","25":"12.433623","26":"12.433623","27":"12.480848","28":"12.480848","29":"12.480848","30":"12.480848","31":"12.480848","32":"12.480848","33":"11.912709","34":"11.912709","35":"11.912709","36":"11.932523","37":"11.932523","38":"11.932523","39":"11.932523","40":"11.932523","41":"12.245471","42":"Age"},{"1":"6.000","2":"3.701380","3":"3.701380","4":"3.713615","5":"3.740782","6":"3.755782","7":"3.755782","8":"3.755782","9":"3.720108","10":"3.720108","11":"3.720108","12":"3.720108","13":"3.720108","14":"3.720108","15":"3.720108","16":"3.801810","17":"3.801810","18":"3.801810","19":"3.801810","20":"3.801810","21":"3.789233","22":"3.789233","23":"3.748003","24":"3.748003","25":"3.748003","26":"3.748003","27":"3.749283","28":"3.749283","29":"3.749283","30":"3.749283","31":"3.749283","32":"3.749283","33":"3.741558","34":"3.741558","35":"3.741558","36":"3.741558","37":"3.741558","38":"3.741558","39":"3.741558","40":"3.741558","41":"3.741558","42":"Age"},{"1":"6.000","2":"12.093506","3":"12.093506","4":"12.093506","5":"12.093506","6":"12.093506","7":"12.093506","8":"12.093506","9":"12.093506","10":"12.093506","11":"12.093506","12":"12.093506","13":"12.093506","14":"12.093506","15":"12.093506","16":"12.205816","17":"12.205816","18":"12.205816","19":"12.385816","20":"12.385816","21":"12.393391","22":"12.393391","23":"12.405891","24":"12.405891","25":"12.405891","26":"12.405891","27":"12.465966","28":"12.465966","29":"12.465966","30":"12.465966","31":"12.465966","32":"12.465966","33":"11.928147","34":"11.928147","35":"11.928147","36":"11.940582","37":"11.940582","38":"11.940582","39":"11.940582","40":"11.940582","41":"12.175628","42":"Age"},{"1":"6.000","2":"9.832593","3":"9.832593","4":"9.832593","5":"9.832593","6":"9.832593","7":"9.832593","8":"9.832593","9":"9.832593","10":"9.832593","11":"9.832593","12":"9.832593","13":"9.832593","14":"9.832593","15":"9.832593","16":"9.892693","17":"9.892693","18":"9.892693","19":"10.232293","20":"10.232293","21":"10.208627","22":"10.208627","23":"10.133692","24":"10.133692","25":"10.133692","26":"10.133692","27":"10.112558","28":"10.112558","29":"10.112558","30":"10.112558","31":"10.118428","32":"10.118428","33":"10.188135","34":"10.188135","35":"10.188135","36":"10.211235","37":"10.211235","38":"10.226235","39":"10.226235","40":"10.226235","41":"10.393168","42":"Age"},{"1":"5.000","2":"12.260011","3":"12.260011","4":"12.260011","5":"12.260011","6":"12.260011","7":"12.260011","8":"12.260011","9":"12.260011","10":"12.260011","11":"12.260011","12":"12.260011","13":"12.260011","14":"12.260011","15":"12.260011","16":"12.334668","17":"12.334668","18":"12.334668","19":"12.492401","20":"12.492401","21":"12.492401","22":"12.492401","23":"12.495901","24":"12.495901","25":"12.495901","26":"12.495901","27":"12.544126","28":"12.544126","29":"12.544126","30":"12.544126","31":"12.544126","32":"12.544126","33":"12.089361","34":"12.089361","35":"12.089361","36":"12.156138","37":"12.156138","38":"12.156138","39":"12.156138","40":"12.156138","41":"12.450731","42":"Age"},{"1":"133.500","2":"12.450731","3":"12.860483","4":"13.451240","5":"13.182820","6":"12.444416","7":"12.423976","8":"12.423976","9":"12.358647","10":"12.373647","11":"12.373647","12":"12.373647","13":"12.344814","14":"12.347814","15":"12.311194","16":"12.190411","17":"12.190411","18":"12.176611","19":"12.176611","20":"12.128404","21":"12.128404","22":"12.177916","23":"10.346732","24":"10.201512","25":"10.201512","26":"10.222202","27":"10.235427","28":"10.235427","29":"10.211602","30":"10.211602","31":"9.934063","32":"9.934063","33":"9.934063","34":"9.936563","35":"9.877338","36":"9.877338","37":"9.877338","38":"9.877338","39":"9.872838","40":"9.872838","41":"9.872838","42":"Tonnage"},{"1":"116.000","2":"11.857950","3":"11.932523","4":"12.475468","5":"12.238881","6":"11.607128","7":"11.472495","8":"11.472495","9":"11.250765","10":"11.265765","11":"11.265765","12":"11.265765","13":"11.236931","14":"11.236931","15":"11.200311","16":"11.124661","17":"11.124661","18":"11.109961","19":"11.109961","20":"11.047225","21":"11.047225","22":"11.112736","23":"9.613815","24":"9.462545","25":"9.462545","26":"9.483235","27":"9.496460","28":"9.496460","29":"9.472635","30":"9.472635","31":"9.186497","32":"9.186497","33":"9.186497","34":"9.188997","35":"9.129772","36":"9.129772","37":"9.129772","38":"9.129772","39":"9.125272","40":"9.125272","41":"9.125272","42":"Tonnage"},{"1":"110.239","2":"11.692063","3":"11.691073","4":"11.940582","5":"11.741615","6":"11.203862","7":"11.023128","8":"11.023128","9":"10.786755","10":"10.801755","11":"10.801755","12":"10.801755","13":"10.772922","14":"10.772922","15":"10.750502","16":"10.640768","17":"10.637168","18":"10.623368","19":"10.623368","20":"10.593632","21":"10.593632","22":"10.652943","23":"9.339167","24":"9.193947","25":"9.193947","26":"9.214637","27":"9.227862","28":"9.227862","29":"9.204037","30":"9.204037","31":"8.956152","32":"8.956152","33":"8.956152","34":"8.958652","35":"8.899427","36":"8.899427","37":"8.899427","38":"8.899427","39":"8.894927","40":"8.894927","41":"8.894927","42":"Tonnage"},{"1":"108.865","2":"11.553157","3":"11.556157","4":"11.648590","5":"11.376582","6":"10.926535","7":"10.737952","8":"10.737952","9":"10.458145","10":"10.473145","11":"10.473145","12":"10.473145","13":"10.429472","14":"10.429472","15":"10.383752","16":"10.269950","17":"10.242150","18":"10.227450","19":"10.227450","20":"10.196287","21":"10.196287","22":"10.266273","23":"9.226172","24":"9.080562","25":"9.080562","26":"9.105585","27":"9.118810","28":"9.118810","29":"9.094985","30":"9.094985","31":"8.808147","32":"8.808147","33":"8.808147","34":"8.810647","35":"8.752455","36":"8.752455","37":"8.752455","38":"8.752455","39":"8.747955","40":"8.747955","41":"8.747955","42":"Tonnage"},{"1":"105.000","2":"11.465835","3":"11.464335","4":"11.579745","5":"11.356878","6":"10.833458","7":"10.765915","8":"10.765915","9":"10.612465","10":"10.627465","11":"10.627465","12":"10.627465","13":"10.587592","14":"10.587592","15":"10.541872","16":"10.469112","17":"10.441312","18":"10.426612","19":"10.426612","20":"10.369595","21":"10.364055","22":"10.410058","23":"9.201958","24":"9.053348","25":"9.053348","26":"9.074038","27":"9.087263","28":"9.087263","29":"9.063438","30":"9.063438","31":"8.776267","32":"8.776267","33":"8.776267","34":"8.778767","35":"8.720575","36":"8.720575","37":"8.720575","38":"8.720575","39":"8.716075","40":"8.716075","41":"8.716075","42":"Tonnage"},{"1":"101.509","2":"11.508033","3":"11.508033","4":"11.653037","5":"11.402270","6":"10.723907","7":"10.582714","8":"10.582714","9":"10.362046","10":"10.377046","11":"10.377046","12":"10.377046","13":"10.329226","14":"10.329226","15":"10.314406","16":"10.190211","17":"10.158811","18":"10.144111","19":"10.144111","20":"10.066181","21":"10.060641","22":"10.159126","23":"9.191738","24":"9.048118","25":"9.048118","26":"9.073142","27":"9.086367","28":"9.086367","29":"9.062542","30":"9.062542","31":"8.784317","32":"8.784317","33":"8.784317","34":"8.786817","35":"8.727592","36":"8.727592","37":"8.727592","38":"8.727592","39":"8.723092","40":"8.723092","41":"8.723092","42":"Tonnage"},{"1":"101.509","2":"11.936045","3":"11.936045","4":"12.175448","5":"11.920882","6":"11.129269","7":"10.988076","8":"10.988076","9":"10.779641","10":"10.794641","11":"10.794641","12":"10.794641","13":"10.750621","14":"10.750621","15":"10.728201","16":"10.644381","17":"10.612981","18":"10.598281","19":"10.598281","20":"10.541044","21":"10.535504","22":"10.608929","23":"9.532713","24":"9.389093","25":"9.389093","26":"9.414117","27":"9.427342","28":"9.427342","29":"9.403517","30":"9.403517","31":"9.117712","32":"9.117712","33":"9.117712","34":"9.120212","35":"9.060987","36":"9.060987","37":"9.060987","38":"9.060987","39":"9.056487","40":"9.056487","41":"9.056487","42":"Tonnage"},{"1":"93.000","2":"11.634365","3":"11.637098","4":"11.756937","5":"11.534370","6":"10.725013","7":"10.489202","8":"10.489202","9":"10.226235","10":"10.241235","11":"10.241235","12":"10.241235","13":"10.197562","14":"10.200562","15":"10.125572","16":"10.020045","17":"9.978365","18":"9.950665","19":"9.950665","20":"9.977998","21":"9.977998","22":"10.051385","23":"8.993973","24":"8.845363","25":"8.845363","26":"8.866053","27":"8.879278","28":"8.879278","29":"8.855453","30":"8.855453","31":"8.568282","32":"8.568282","33":"8.568282","34":"8.570782","35":"8.512590","36":"8.512590","37":"8.512590","38":"8.512590","39":"8.508090","40":"8.508090","41":"8.508090","42":"Tonnage"},{"1":"91.000","2":"11.011503","3":"11.009237","4":"11.158847","5":"10.963147","6":"10.269157","7":"9.959348","8":"9.959348","9":"9.615552","10":"9.640452","11":"9.640452","12":"9.640452","13":"9.596990","14":"9.599990","15":"9.603023","16":"9.570480","17":"9.544963","18":"9.503388","19":"9.503388","20":"9.791317","21":"9.791317","22":"9.837457","23":"8.693988","24":"8.558518","25":"8.558518","26":"8.579208","27":"8.592433","28":"8.592433","29":"8.568608","30":"8.568608","31":"8.281437","32":"8.281437","33":"8.281437","34":"8.283937","35":"8.225745","36":"8.225745","37":"8.225745","38":"8.225745","39":"8.221245","40":"8.221245","41":"8.221245","42":"Tonnage"},{"1":"91.000","2":"11.093120","3":"11.097278","4":"11.246888","5":"11.060463","6":"10.382673","7":"10.080065","8":"10.080065","9":"9.751068","10":"9.775968","11":"9.775968","12":"9.775968","13":"9.735273","14":"9.738273","15":"9.741307","16":"9.696863","17":"9.678463","18":"9.626138","19":"9.626138","20":"9.864842","21":"9.864842","22":"9.910982","23":"8.762997","24":"8.630527","25":"8.630527","26":"8.655550","27":"8.668775","28":"8.668775","29":"8.644950","30":"8.644950","31":"8.358112","32":"8.358112","33":"8.358112","34":"8.360612","35":"8.302420","36":"8.302420","37":"8.302420","38":"8.302420","39":"8.297920","40":"8.297920","41":"8.297920","42":"Tonnage"},{"1":"91.000","2":"11.068287","3":"11.070645","4":"11.220255","5":"11.033830","6":"10.356040","7":"10.053432","8":"10.053432","9":"9.724435","10":"9.749335","11":"9.749335","12":"9.749335","13":"9.708640","14":"9.711640","15":"9.714673","16":"9.670230","17":"9.649830","18":"9.597505","19":"9.597505","20":"9.836208","21":"9.836208","22":"9.882348","23":"8.715463","24":"8.582993","25":"8.582993","26":"8.608017","27":"8.621242","28":"8.621242","29":"8.597417","30":"8.597417","31":"8.310578","32":"8.310578","33":"8.310578","34":"8.313078","35":"8.254887","36":"8.254887","37":"8.254887","38":"8.254887","39":"8.250387","40":"8.250387","41":"8.250387","42":"Tonnage"},{"1":"90.090","2":"11.149870","3":"11.156103","4":"11.296066","5":"11.084600","6":"10.246479","7":"9.905337","8":"9.905337","9":"9.532969","10":"9.547969","11":"9.547969","12":"9.547969","13":"9.504295","14":"9.504295","15":"9.445572","16":"9.330375","17":"9.294245","18":"9.278885","19":"9.278885","20":"9.279056","21":"9.279056","22":"9.389521","23":"8.604710","24":"8.458090","25":"8.458090","26":"8.478780","27":"8.492005","28":"8.492005","29":"8.468180","30":"8.468180","31":"8.182042","32":"8.182042","33":"8.182042","34":"8.184542","35":"8.125317","36":"8.125317","37":"8.125317","38":"8.125317","39":"8.120817","40":"8.120817","41":"8.120817","42":"Tonnage"},{"1":"90.000","2":"11.636322","3":"11.638922","4":"11.765620","5":"11.545645","6":"10.854768","7":"10.574657","8":"10.574657","9":"10.210247","10":"10.228247","11":"10.228247","12":"10.228247","13":"10.180387","14":"10.183387","15":"10.087663","16":"9.991243","17":"9.943503","18":"9.915803","19":"9.915803","20":"10.015290","21":"10.015290","22":"10.067963","23":"8.986788","24":"8.838178","25":"8.838178","26":"8.858868","27":"8.872093","28":"8.872093","29":"8.848268","30":"8.848268","31":"8.561097","32":"8.561097","33":"8.561097","34":"8.563597","35":"8.505405","36":"8.505405","37":"8.505405","38":"8.505405","39":"8.500905","40":"8.500905","41":"8.500905","42":"Tonnage"},{"1":"89.600","2":"11.324522","3":"11.379522","4":"11.496120","5":"11.272473","6":"10.394109","7":"10.209411","8":"10.209411","9":"9.947892","10":"9.962892","11":"9.962892","12":"9.962892","13":"9.919219","14":"9.919219","15":"9.874529","16":"9.792309","17":"9.758229","18":"9.742869","19":"9.742869","20":"9.740666","21":"9.740666","22":"9.823077","23":"8.956440","24":"8.809820","25":"8.809820","26":"8.830510","27":"8.843735","28":"8.843735","29":"8.819910","30":"8.819910","31":"8.529772","32":"8.529772","33":"8.529772","34":"8.532272","35":"8.473047","36":"8.473047","37":"8.473047","38":"8.473047","39":"8.468547","40":"8.468547","41":"8.468547","42":"Tonnage"},{"1":"85.619","2":"11.013698","3":"11.002823","4":"11.122863","5":"10.914330","6":"10.279897","7":"9.942182","8":"9.942182","9":"9.532948","10":"9.560848","11":"9.560848","12":"9.560848","13":"9.492063","14":"9.492063","15":"9.422740","16":"9.303813","17":"9.266088","18":"9.244528","19":"9.244528","20":"9.491792","21":"9.491792","22":"9.570398","23":"8.621023","24":"8.475413","25":"8.475413","26":"8.500437","27":"8.513662","28":"8.513662","29":"8.489837","30":"8.489837","31":"8.202998","32":"8.202998","33":"8.202998","34":"8.205498","35":"8.147307","36":"8.147307","37":"8.147307","38":"8.147307","39":"8.142807","40":"8.142807","41":"8.142807","42":"Tonnage"},{"1":"81.000","2":"10.037417","3":"9.980750","4":"10.055280","5":"9.945680","6":"9.674715","7":"9.503248","8":"9.503248","9":"9.303847","10":"9.318847","11":"9.318847","12":"9.318847","13":"9.264073","14":"9.264073","15":"9.219150","16":"9.123433","17":"9.101818","18":"9.080258","19":"9.080258","20":"9.090495","21":"9.090495","22":"9.205007","23":"8.466665","24":"8.318055","25":"8.318055","26":"8.338745","27":"8.351970","28":"8.351970","29":"8.328145","30":"8.328145","31":"8.042007","32":"8.042007","33":"8.042007","34":"8.044507","35":"7.985282","36":"7.985282","37":"7.985282","38":"7.985282","39":"7.980782","40":"7.980782","41":"7.980782","42":"Tonnage"},{"1":"78.491","2":"9.456482","3":"9.362882","4":"9.422342","5":"9.333875","6":"8.951087","7":"8.726787","8":"8.726787","9":"8.448445","10":"8.463445","11":"8.463445","12":"8.463445","13":"8.434582","14":"8.434582","15":"8.434582","16":"8.354907","17":"8.333358","18":"8.297273","19":"8.297273","20":"8.467480","21":"8.467480","22":"8.617718","23":"8.044595","24":"7.902375","25":"7.902375","26":"7.927398","27":"7.940623","28":"7.940623","29":"7.916798","30":"7.916798","31":"7.649573","32":"7.649573","33":"7.649573","34":"7.652073","35":"7.590448","36":"7.590448","37":"7.590448","38":"7.590448","39":"7.585948","40":"7.585948","41":"7.585948","42":"Tonnage"},{"1":"77.713","2":"9.701235","3":"9.620035","4":"9.685495","5":"9.557595","6":"9.206845","7":"8.954130","8":"8.954130","9":"8.761130","10":"8.774030","11":"8.774030","12":"8.774030","13":"8.772717","14":"8.772717","15":"8.772717","16":"8.703228","17":"8.758420","18":"8.735987","19":"8.735987","20":"8.715190","21":"8.718605","22":"8.773058","23":"8.121393","24":"7.955443","25":"7.955443","26":"7.980467","27":"7.959842","28":"7.959842","29":"7.926117","30":"7.926117","31":"7.649258","32":"7.649258","33":"7.649258","34":"7.651758","35":"7.591167","36":"7.591167","37":"7.591167","38":"7.591167","39":"7.586667","40":"7.586667","41":"7.586667","42":"Tonnage"},{"1":"73.941","2":"10.673098","3":"10.624798","4":"10.658492","5":"10.433438","6":"9.769888","7":"9.573155","8":"9.573155","9":"9.383193","10":"9.398193","11":"9.398193","12":"9.398193","13":"9.350373","14":"9.350373","15":"9.349353","16":"9.169608","17":"9.138208","18":"9.124408","19":"9.124408","20":"9.026442","21":"9.026442","22":"9.156480","23":"8.388587","24":"8.254767","25":"8.254767","26":"8.292890","27":"8.306115","28":"8.306115","29":"8.282290","30":"8.282290","31":"8.015065","32":"8.015065","33":"8.015065","34":"8.017565","35":"7.955940","36":"7.955940","37":"7.955940","38":"7.955940","39":"7.951440","40":"7.951440","41":"7.951440","42":"Tonnage"},{"1":"73.192","2":"10.212983","3":"10.169883","4":"10.219801","5":"10.035335","6":"9.520538","7":"9.348905","8":"9.348905","9":"9.162310","10":"9.177310","11":"9.177310","12":"9.177310","13":"9.129490","14":"9.129490","15":"9.121436","16":"8.935225","17":"8.903825","18":"8.890025","19":"8.890025","20":"8.794651","21":"8.794651","22":"8.911630","23":"8.143240","24":"8.027426","25":"8.027426","26":"8.044976","27":"8.059701","28":"8.059701","29":"8.035876","30":"8.035876","31":"7.797971","32":"7.797971","33":"7.797971","34":"7.800471","35":"7.738846","36":"7.738846","37":"7.738846","38":"7.738846","39":"7.734346","40":"7.734346","41":"7.734346","42":"Tonnage"},{"1":"70.327","2":"10.758283","3":"10.744050","4":"10.874910","5":"10.703485","6":"9.681388","7":"9.336933","8":"9.336933","9":"8.910680","10":"8.923580","11":"8.923580","12":"8.923580","13":"8.939100","14":"8.945100","15":"8.945100","16":"8.884623","17":"8.906398","18":"8.857165","19":"8.857165","20":"8.765968","21":"8.765968","22":"8.798182","23":"7.962007","24":"7.846603","25":"7.846603","26":"7.868487","27":"7.843412","28":"7.843412","29":"7.809687","30":"7.809687","31":"7.528728","32":"7.528728","33":"7.528728","34":"7.531228","35":"7.474737","36":"7.474737","37":"7.474737","38":"7.474737","39":"7.470237","40":"7.470237","41":"7.470237","42":"Tonnage"},{"1":"59.652","2":"6.977612","3":"6.942312","4":"6.942312","5":"6.943312","6":"6.860222","7":"6.784172","8":"6.784172","9":"6.723672","10":"6.733572","11":"6.733572","12":"6.733572","13":"6.744658","14":"6.744658","15":"6.744658","16":"6.682878","17":"6.713213","18":"6.713213","19":"6.713213","20":"6.691100","21":"6.691100","22":"6.691100","23":"5.770167","24":"5.757975","25":"5.746433","26":"5.741025","27":"5.737313","28":"5.671887","29":"5.533537","30":"5.533537","31":"5.107573","32":"5.107573","33":"5.107573","34":"5.110073","35":"5.021598","36":"5.021598","37":"4.978198","38":"4.978198","39":"4.904723","40":"4.882423","41":"4.882423","42":"Tonnage"},{"1":"52.926","2":"7.074643","3":"7.039343","4":"7.036943","5":"7.037943","6":"6.971053","7":"6.895003","8":"6.895003","9":"6.844503","10":"6.857403","11":"6.857403","12":"6.857403","13":"6.868490","14":"6.868490","15":"6.868490","16":"6.787460","17":"6.820562","18":"6.820562","19":"6.820562","20":"6.789282","21":"6.789282","22":"6.789282","23":"5.951642","24":"5.947455","25":"5.935833","26":"5.952237","27":"5.943385","28":"5.836500","29":"5.712840","30":"5.712840","31":"5.277060","32":"5.277060","33":"5.277060","34":"5.279560","35":"5.187285","36":"5.187285","37":"5.143885","38":"5.143885","39":"5.070410","40":"5.051910","41":"5.051910","42":"Tonnage"},{"1":"50.000","2":"6.527725","3":"6.496925","4":"6.496925","5":"6.497925","6":"6.388345","7":"6.312295","8":"6.312295","9":"6.236495","10":"6.246395","11":"6.246395","12":"6.246395","13":"6.257482","14":"6.257482","15":"6.257482","16":"6.225787","17":"6.252827","18":"6.288627","19":"6.288627","20":"6.279847","21":"6.279847","22":"6.279847","23":"4.970685","24":"4.919220","25":"4.921953","26":"4.881317","27":"4.861530","28":"4.798663","29":"4.632162","30":"4.632162","31":"4.245893","32":"4.245893","33":"4.245893","34":"4.245893","35":"4.010467","36":"4.010467","37":"3.954800","38":"3.954800","39":"3.824845","40":"3.782318","41":"3.782318","42":"Tonnage"},{"1":"42.000","2":"7.524205","3":"7.488905","4":"7.486505","5":"7.487505","6":"7.413065","7":"7.370532","8":"7.370532","9":"7.310332","10":"7.310332","11":"7.310332","12":"7.310332","13":"7.321418","14":"7.321418","15":"7.321418","16":"7.268038","17":"7.255958","18":"7.255958","19":"7.255958","20":"7.207228","21":"7.207228","22":"7.236895","23":"6.629488","24":"6.472413","25":"6.481572","26":"6.574503","27":"6.550508","28":"6.420493","29":"6.216302","30":"6.216302","31":"5.611353","32":"5.611353","33":"5.611353","34":"5.613853","35":"5.521453","36":"5.521453","37":"5.473853","38":"5.473853","39":"5.399853","40":"5.381353","41":"5.381353","42":"Tonnage"},{"1":"38.000","2":"6.766310","3":"6.731010","4":"6.728610","5":"6.729610","6":"6.664270","7":"6.581353","8":"6.581353","9":"6.530853","10":"6.530853","11":"6.530853","12":"6.530853","13":"6.541940","14":"6.541940","15":"6.541940","16":"6.507960","17":"6.507860","18":"6.507860","19":"6.507860","20":"6.436430","21":"6.436430","22":"6.466097","23":"5.541292","24":"5.450217","25":"5.433182","26":"5.377910","27":"5.296750","28":"5.130805","29":"4.987068","30":"4.987068","31":"4.493827","32":"4.493827","33":"4.493827","34":"4.496327","35":"4.340098","36":"4.340098","37":"4.276548","38":"4.276548","39":"4.177253","40":"4.145927","41":"4.145927","42":"Tonnage"},{"1":"34.250","2":"6.890898","3":"6.855598","4":"6.853198","5":"6.854198","6":"6.777758","7":"6.716975","8":"6.716975","9":"6.656775","10":"6.656775","11":"6.656775","12":"6.656775","13":"6.667862","14":"6.667862","15":"6.667862","16":"6.614482","17":"6.602402","18":"6.602402","19":"6.602402","20":"6.553672","21":"6.553672","22":"6.583338","23":"5.659263","24":"5.552608","25":"5.544868","26":"5.486567","27":"5.406907","28":"5.218695","29":"5.064267","30":"5.064267","31":"4.579108","32":"4.579108","33":"4.579108","34":"4.581608","35":"4.416597","36":"4.416597","37":"4.353047","38":"4.353047","39":"4.253752","40":"4.226225","41":"4.226225","42":"Tonnage"},{"1":"33.920","2":"7.053718","3":"7.018418","4":"7.016018","5":"7.017018","6":"6.942578","7":"6.881795","8":"6.881795","9":"6.821595","10":"6.821595","11":"6.821595","12":"6.821595","13":"6.832682","14":"6.832682","15":"6.832682","16":"6.779302","17":"6.767222","18":"6.767222","19":"6.767222","20":"6.718492","21":"6.718492","22":"6.748158","23":"5.852723","24":"5.760788","25":"5.749007","26":"5.694400","27":"5.658765","28":"5.495533","29":"5.347843","30":"5.347843","31":"4.873035","32":"4.873035","33":"4.873035","34":"4.875535","35":"4.783135","36":"4.783135","37":"4.745885","38":"4.745885","39":"4.671885","40":"4.653385","41":"4.653385","42":"Tonnage"},{"1":"33.000","2":"5.891583","3":"5.860783","4":"5.860783","5":"5.861783","6":"5.781103","7":"5.705053","8":"5.705053","9":"5.629253","10":"5.639153","11":"5.639153","12":"5.639153","13":"5.650240","14":"5.650240","15":"5.650240","16":"5.618545","17":"5.654205","18":"5.690005","19":"5.690005","20":"5.681225","21":"5.681225","22":"5.681225","23":"3.955370","24":"3.907660","25":"3.898560","26":"3.861100","27":"3.796337","28":"3.693990","29":"3.513815","30":"3.513815","31":"3.081990","32":"3.081990","33":"3.081990","34":"3.081990","35":"2.880030","36":"2.880030","37":"2.824363","38":"2.824363","39":"2.724383","40":"2.672265","41":"2.672265","42":"Tonnage"},{"1":"30.277","2":"6.123453","3":"6.080953","4":"6.080953","5":"6.081953","6":"5.993333","7":"5.917283","8":"5.917283","9":"5.866008","10":"5.866008","11":"5.866008","12":"5.866008","13":"5.877095","14":"5.877095","15":"5.877095","16":"5.838615","17":"5.862602","18":"5.898402","19":"5.898402","20":"5.898830","21":"5.898830","22":"5.898830","23":"4.431820","24":"4.418490","25":"4.424890","26":"4.407923","27":"4.363833","28":"4.270147","29":"4.119293","30":"4.119293","31":"3.741558","32":"3.741558","33":"3.741558","34":"3.744058","35":"3.501282","36":"3.501282","37":"3.437882","38":"3.437882","39":"3.288252","40":"3.245725","41":"3.245725","42":"Tonnage"},{"1":"30.277","2":"6.172518","3":"6.127218","4":"6.127218","5":"6.128218","6":"6.076748","7":"6.000698","8":"6.000698","9":"5.940198","10":"5.950098","11":"5.950098","12":"5.950098","13":"5.961185","14":"5.961185","15":"5.961185","16":"5.917730","17":"5.948065","18":"5.993865","19":"5.993865","20":"6.009085","21":"6.009085","22":"6.009085","23":"4.559108","24":"4.520258","25":"4.514758","26":"4.455508","27":"4.413978","28":"4.298192","29":"4.166723","30":"4.166723","31":"3.828308","32":"3.828308","33":"3.828308","34":"3.828308","35":"3.509962","36":"3.509962","37":"3.440262","38":"3.440262","39":"3.276382","40":"3.231855","41":"3.231855","42":"Tonnage"},{"1":"30.277","2":"6.179818","3":"6.137318","4":"6.137318","5":"6.138318","6":"6.049132","7":"5.973082","8":"5.973082","9":"5.912582","10":"5.922482","11":"5.922482","12":"5.922482","13":"5.933568","14":"5.933568","15":"5.933568","16":"5.890113","17":"5.907253","18":"5.943053","19":"5.943053","20":"5.955473","21":"5.955473","22":"5.955473","23":"4.546033","24":"4.507183","25":"4.501683","26":"4.442433","27":"4.398343","28":"4.282557","29":"4.142463","30":"4.142463","31":"3.773268","32":"3.773268","33":"3.773268","34":"3.773268","35":"3.472197","36":"3.472197","37":"3.402497","38":"3.402497","39":"3.238617","40":"3.194090","41":"3.194090","42":"Tonnage"},{"1":"28.430","2":"6.358212","3":"6.322912","4":"6.320512","5":"6.321512","6":"6.256172","7":"6.195388","8":"6.195388","9":"6.144888","10":"6.144888","11":"6.144888","12":"6.144888","13":"6.155975","14":"6.155975","15":"6.155975","16":"6.121995","17":"6.121895","18":"6.121895","19":"6.121895","20":"6.050465","21":"6.050465","22":"6.080132","23":"4.806760","24":"4.722643","25":"4.715843","26":"4.642257","27":"4.561097","28":"4.388385","29":"4.250223","30":"4.250223","31":"3.844732","32":"3.844732","33":"3.844732","34":"3.847232","35":"3.596662","36":"3.596662","37":"3.526312","38":"3.526312","39":"3.385017","40":"3.342490","41":"3.342490","42":"Tonnage"},{"1":"19.200","2":"5.335040","3":"5.299740","4":"5.299740","5":"5.300740","6":"5.205890","7":"5.129840","8":"5.129840","9":"5.054040","10":"5.063940","11":"5.063940","12":"5.063940","13":"5.075027","14":"5.075027","15":"5.075027","16":"5.025007","17":"5.060667","18":"5.060667","19":"5.060667","20":"5.029053","21":"5.029053","22":"5.029053","23":"3.285338","24":"3.263148","25":"3.254048","26":"3.243202","27":"3.180902","28":"3.089635","29":"2.911570","30":"2.911570","31":"2.331420","32":"2.331420","33":"2.331420","34":"2.331420","35":"2.152020","36":"2.152020","37":"2.096353","38":"2.096353","39":"1.991773","40":"1.821502","41":"1.821502","42":"Tonnage"},{"1":"19.093","2":"6.083548","3":"6.048248","4":"6.045848","5":"6.046848","6":"5.972408","7":"5.911625","8":"5.911625","9":"5.851425","10":"5.851425","11":"5.851425","12":"5.851425","13":"5.862512","14":"5.862512","15":"5.862512","16":"5.809132","17":"5.797052","18":"5.797052","19":"5.797052","20":"5.748322","21":"5.748322","22":"5.777988","23":"4.481333","24":"4.397217","25":"4.386517","26":"4.337737","27":"4.295157","28":"4.122445","29":"4.019463","30":"4.019463","31":"3.604433","32":"3.604433","33":"3.604433","34":"3.606933","35":"3.365422","36":"3.365422","37":"3.295072","38":"3.295072","39":"3.157777","40":"3.105150","41":"3.105150","42":"Tonnage"},{"1":"16.852","2":"6.118018","3":"6.082718","4":"6.080318","5":"6.081318","6":"6.006878","7":"5.946095","8":"5.946095","9":"5.885895","10":"5.885895","11":"5.885895","12":"5.885895","13":"5.896982","14":"5.896982","15":"5.896982","16":"5.843602","17":"5.831522","18":"5.831522","19":"5.831522","20":"5.782792","21":"5.782792","22":"5.812458","23":"4.592590","24":"4.507513","25":"4.502313","26":"4.435548","27":"4.384508","28":"4.233397","29":"4.103707","30":"4.103707","31":"3.688265","32":"3.688265","33":"3.688265","34":"3.690765","35":"3.486753","36":"3.486753","37":"3.416403","38":"3.416403","39":"3.319383","40":"3.270557","41":"3.270557","42":"Tonnage"},{"1":"16.800","2":"5.246472","3":"5.211172","4":"5.211172","5":"5.212172","6":"5.127322","7":"5.051272","8":"5.051272","9":"5.000772","10":"5.010672","11":"5.010672","12":"5.010672","13":"5.021758","14":"5.021758","15":"5.021758","16":"4.955488","17":"4.991148","18":"4.991148","19":"4.991148","20":"4.959535","21":"4.959535","22":"4.959535","23":"3.212745","24":"3.190555","25":"3.181455","26":"3.159375","27":"3.097075","28":"2.970725","29":"2.803893","30":"2.803893","31":"2.223743","32":"2.223743","33":"2.223743","34":"2.223743","35":"2.036570","36":"2.036570","37":"1.954603","38":"1.954603","39":"1.850023","40":"1.679752","41":"1.679752","42":"Tonnage"},{"1":"12.500","2":"5.427448","3":"5.392148","4":"5.389748","5":"5.390748","6":"5.314308","7":"5.253525","8":"5.253525","9":"5.193325","10":"5.193325","11":"5.193325","12":"5.193325","13":"5.204412","14":"5.204412","15":"5.204412","16":"5.151032","17":"5.138952","18":"5.138952","19":"5.138952","20":"5.090222","21":"5.090222","22":"5.119888","23":"3.446210","24":"3.404660","25":"3.404660","26":"3.385293","27":"3.339820","28":"3.150748","29":"2.978617","30":"2.978617","31":"2.372610","32":"2.372610","33":"2.372610","34":"2.372610","35":"2.087772","36":"2.087772","37":"1.984572","38":"1.984572","39":"1.848242","40":"1.743143","41":"1.743143","42":"Tonnage"},{"1":"3.341","2":"4.982777","3":"4.947477","4":"4.947477","5":"4.948477","6":"4.863627","7":"4.787577","8":"4.787577","9":"4.737077","10":"4.746977","11":"4.746977","12":"4.746977","13":"4.758063","14":"4.758063","15":"4.758063","16":"4.691793","17":"4.727453","18":"4.727453","19":"4.727453","20":"4.689440","21":"4.689440","22":"4.689440","23":"2.887688","24":"2.874358","25":"2.868858","26":"2.846778","27":"2.784478","28":"2.654128","29":"2.464917","30":"2.464917","31":"1.784888","32":"1.784888","33":"1.784888","34":"1.784888","35":"1.457963","36":"1.457963","37":"1.345797","38":"1.345797","39":"1.211133","40":"1.056095","41":"1.056095","42":"Tonnage"},{"1":"2.329","2":"5.239792","3":"5.197292","4":"5.194892","5":"5.195892","6":"5.093272","7":"5.032488","8":"5.032488","9":"4.959838","10":"4.959838","11":"4.959838","12":"4.959838","13":"4.970925","14":"4.970925","15":"4.970925","16":"4.943870","17":"4.931790","18":"4.967590","19":"4.967590","20":"4.963193","21":"4.963193","22":"4.992860","23":"3.139660","24":"3.099070","25":"3.093570","26":"3.073353","27":"3.033280","28":"2.936447","29":"2.737027","30":"2.737027","31":"1.933258","32":"1.933258","33":"1.933258","34":"1.933258","35":"1.621402","36":"1.621402","37":"1.533902","38":"1.533902","39":"1.380813","40":"1.236325","41":"1.236325","42":"Tonnage"},{"1":"39.590","2":"12.450731","3":"12.479426","4":"12.462028","5":"12.261019","6":"12.321799","7":"12.321799","8":"12.321799","9":"12.354799","10":"12.324899","11":"11.700690","12":"11.692730","13":"11.692730","14":"11.692730","15":"11.723397","16":"11.713757","17":"11.713757","18":"11.713757","19":"11.713757","20":"11.713757","21":"11.661490","22":"11.661490","23":"10.651523","24":"10.636107","25":"10.636107","26":"10.615467","27":"10.615467","28":"10.615467","29":"10.615467","30":"10.558623","31":"10.558623","32":"10.558623","33":"10.558623","34":"10.558623","35":"10.558623","36":"10.526707","37":"10.526707","38":"10.516207","39":"10.516207","40":"10.516207","41":"10.516207","42":"passengers"},{"1":"37.000","2":"11.869248","3":"11.940582","4":"11.887357","5":"11.568647","6":"11.650980","7":"11.650980","8":"11.650980","9":"11.683980","10":"11.654080","11":"11.055142","12":"11.031642","13":"11.031642","14":"11.031642","15":"11.072275","16":"11.056075","17":"11.056075","18":"11.051275","19":"11.051275","20":"11.051275","21":"11.003822","22":"11.003822","23":"10.236763","24":"10.221347","25":"10.221347","26":"10.184347","27":"10.184347","28":"10.184347","29":"10.184347","30":"10.143863","31":"10.143863","32":"10.143863","33":"10.143863","34":"10.143863","35":"10.143863","36":"10.111947","37":"10.111947","38":"10.101447","39":"10.101447","40":"10.101447","41":"10.101447","42":"passengers"},{"1":"31.000","2":"11.846326","3":"11.959608","4":"11.932523","5":"11.884933","6":"11.972547","7":"11.972547","8":"11.972547","9":"12.005547","10":"11.975647","11":"11.278925","12":"11.270965","13":"11.270965","14":"11.270965","15":"11.302498","16":"11.302498","17":"11.302498","18":"11.297698","19":"11.297698","20":"11.297698","21":"11.250245","22":"11.250245","23":"10.508030","24":"10.469210","25":"10.469210","26":"10.448570","27":"10.448570","28":"10.448570","29":"10.448570","30":"10.391727","31":"10.391727","32":"10.391727","33":"10.391727","34":"10.391727","35":"10.391727","36":"10.359810","37":"10.359810","38":"10.349310","39":"10.349310","40":"10.349310","41":"10.349310","42":"passengers"},{"1":"28.520","2":"9.271395","3":"9.271395","4":"9.241395","5":"8.794651","6":"8.807388","7":"8.807388","8":"8.807388","9":"8.840388","10":"8.840388","11":"8.815092","12":"8.816925","13":"8.811225","14":"8.821025","15":"8.945025","16":"8.918025","17":"8.917025","18":"8.923485","19":"8.923485","20":"8.923485","21":"8.592023","22":"8.583373","23":"8.255467","24":"8.217225","25":"8.217225","26":"8.180225","27":"8.167425","28":"8.167425","29":"8.115325","30":"8.084582","31":"8.084582","32":"8.084582","33":"8.084582","34":"8.084582","35":"8.084582","36":"8.052665","37":"8.052665","38":"8.042165","39":"8.042165","40":"8.042165","41":"8.042165","42":"passengers"},{"1":"27.580","2":"10.913334","3":"10.911134","4":"10.941409","5":"10.580077","6":"10.582714","7":"10.582714","8":"10.582714","9":"10.615714","10":"10.513614","11":"10.066624","12":"10.043124","13":"10.043124","14":"10.043124","15":"10.069657","16":"10.044257","17":"10.038591","18":"10.035782","19":"10.035782","20":"10.035782","21":"10.006166","22":"10.006966","23":"9.361409","24":"9.319272","25":"9.319272","26":"9.294032","27":"9.294032","28":"9.294032","29":"9.294032","30":"9.256289","31":"9.256289","32":"9.256289","33":"9.256289","34":"9.256289","35":"9.256289","36":"9.224372","37":"9.224372","38":"9.213872","39":"9.213872","40":"9.213872","41":"9.213872","42":"passengers"},{"1":"27.580","2":"11.272129","3":"11.269929","4":"11.319070","5":"10.962039","6":"10.988076","7":"10.988076","8":"10.988076","9":"11.021076","10":"10.918976","11":"10.414541","12":"10.391041","13":"10.391041","14":"10.391041","15":"10.430974","16":"10.405574","17":"10.399907","18":"10.397099","19":"10.397099","20":"10.397099","21":"10.363622","22":"10.364422","23":"9.685882","24":"9.643746","25":"9.643746","26":"9.618506","27":"9.618506","28":"9.618506","29":"9.618506","30":"9.580762","31":"9.580762","32":"9.580762","33":"9.580762","34":"9.580762","35":"9.580762","36":"9.548846","37":"9.548846","38":"9.538346","39":"9.538346","40":"9.538346","41":"9.538346","42":"passengers"},{"1":"27.580","2":"11.514121","3":"11.565455","4":"11.534010","5":"11.240191","6":"11.376582","7":"11.376582","8":"11.376582","9":"11.409582","10":"11.409582","11":"10.892367","12":"10.868867","13":"10.868867","14":"10.868867","15":"10.896708","16":"10.852042","17":"10.845792","18":"10.836992","19":"10.836992","20":"10.836992","21":"10.736802","22":"10.726802","23":"10.068478","24":"10.035658","25":"10.035658","26":"10.015018","27":"10.015018","28":"10.015018","29":"10.015018","30":"9.963675","31":"9.963675","32":"9.963675","33":"9.963675","34":"9.963675","35":"9.963675","36":"9.931758","37":"9.931758","38":"9.921258","39":"9.921258","40":"9.921258","41":"9.921258","42":"passengers"},{"1":"27.440","2":"9.412448","3":"9.412448","4":"9.447723","5":"8.980705","6":"8.993442","7":"8.993442","8":"8.993442","9":"9.026442","10":"9.026442","11":"8.829732","12":"8.831565","13":"8.825865","14":"8.835665","15":"8.957665","16":"8.930665","17":"8.929665","18":"8.936125","19":"8.936125","20":"8.936125","21":"8.596663","22":"8.588013","23":"8.248267","24":"8.210025","25":"8.210025","26":"8.173025","27":"8.160225","28":"8.160225","29":"8.081925","30":"8.051182","31":"8.051182","32":"8.051182","33":"8.051182","34":"8.051182","35":"8.051182","36":"8.019265","37":"8.019265","38":"8.008765","39":"8.008765","40":"8.008765","41":"8.008765","42":"passengers"},{"1":"27.200","2":"11.114107","3":"11.116707","4":"11.044848","5":"10.773178","6":"10.800458","7":"10.800458","8":"10.800458","9":"10.833458","10":"10.833458","11":"10.542433","12":"10.570233","13":"10.570233","14":"10.570233","15":"10.597757","16":"10.561907","17":"10.547007","18":"10.521273","19":"10.521273","20":"10.521273","21":"10.463858","22":"10.463858","23":"9.845940","24":"9.807120","25":"9.807120","26":"9.786480","27":"9.786480","28":"9.786480","29":"9.786480","30":"9.729637","31":"9.729637","32":"9.729637","33":"9.729637","34":"9.729637","35":"9.729637","36":"9.697720","37":"9.697720","38":"9.687220","39":"9.687220","40":"9.687220","41":"9.687220","42":"passengers"},{"1":"25.500","2":"11.018556","3":"11.018556","4":"11.009597","5":"10.582472","6":"10.637572","7":"10.637572","8":"10.637572","9":"10.670572","10":"10.640672","11":"9.874529","12":"9.851029","13":"9.851029","14":"9.851029","15":"9.893429","16":"9.871896","17":"9.838629","18":"9.820129","19":"9.820129","20":"9.820129","21":"9.734057","22":"9.717424","23":"9.267006","24":"9.238139","25":"9.238139","26":"9.217499","27":"9.217499","28":"9.217499","29":"9.217499","30":"9.160656","31":"9.160656","32":"9.160656","33":"9.160656","34":"9.160656","35":"9.160656","36":"9.128739","37":"9.128739","38":"9.118239","39":"9.118239","40":"9.118239","41":"9.118239","42":"passengers"},{"1":"25.010","2":"10.744542","3":"10.744542","4":"10.731784","5":"10.200062","6":"10.252862","7":"10.252862","8":"10.252862","9":"10.285862","10":"10.255962","11":"9.527795","12":"9.504295","13":"9.494595","14":"9.494595","15":"9.600619","16":"9.567826","17":"9.554559","18":"9.536059","19":"9.536059","20":"9.536059","21":"9.438957","22":"9.422324","23":"8.991482","24":"8.946929","25":"8.946929","26":"8.926289","27":"8.926289","28":"8.926289","29":"8.926289","30":"8.869446","31":"8.869446","32":"8.869446","33":"8.869446","34":"8.869446","35":"8.869446","36":"8.837529","37":"8.837529","38":"8.827029","39":"8.827029","40":"8.827029","41":"8.827029","42":"passengers"},{"1":"24.350","2":"9.447478","3":"9.447478","4":"9.494753","5":"8.882378","6":"8.911658","7":"8.911658","8":"8.911658","9":"8.921158","10":"8.819058","11":"8.359973","12":"8.302973","13":"8.297273","14":"8.297273","15":"8.442565","16":"8.438182","17":"8.437182","18":"8.512660","19":"8.512660","20":"8.512660","21":"8.604425","22":"8.592742","23":"8.277438","24":"8.258705","25":"8.258705","26":"8.233465","27":"8.233465","28":"8.233465","29":"8.233465","30":"8.195722","31":"8.195722","32":"8.195722","33":"8.195722","34":"8.195722","35":"8.195722","36":"8.163805","37":"8.163805","38":"8.153305","39":"8.153305","40":"8.153305","41":"8.153305","42":"passengers"},{"1":"23.940","2":"11.211738","3":"11.211738","4":"11.173980","5":"10.739483","6":"10.803283","7":"10.803283","8":"10.803283","9":"10.836283","10":"10.836283","11":"10.259435","12":"10.235935","13":"10.226235","14":"10.226235","15":"10.273368","16":"10.174575","17":"10.123058","18":"10.088758","19":"10.088758","20":"10.088758","21":"9.866045","22":"9.849412","23":"9.391955","24":"9.339685","25":"9.339685","26":"9.319045","27":"9.319045","28":"9.319045","29":"9.319045","30":"9.262202","31":"9.262202","32":"9.262202","33":"9.262202","34":"9.262202","35":"9.262202","36":"9.230285","37":"9.230285","38":"9.219785","39":"9.219785","40":"9.219785","41":"9.219785","42":"passengers"},{"1":"22.400","2":"11.149265","3":"11.149265","4":"11.127820","5":"10.675795","6":"10.741602","7":"10.741602","8":"10.741602","9":"10.774602","10":"10.774602","11":"10.167787","12":"10.144287","13":"10.134587","14":"10.134587","15":"10.183387","16":"10.048440","17":"10.021963","18":"9.979563","19":"9.979563","20":"9.979563","21":"9.672787","22":"9.655103","23":"9.206147","24":"9.153877","25":"9.153877","26":"9.133237","27":"9.133237","28":"9.133237","29":"9.133237","30":"9.076393","31":"9.076393","32":"9.076393","33":"9.076393","34":"9.076393","35":"9.076393","36":"9.044477","37":"9.044477","38":"9.033977","39":"9.033977","40":"9.033977","41":"9.033977","42":"passengers"},{"1":"21.440","2":"9.849360","3":"9.849360","4":"9.798035","5":"9.283483","6":"9.316963","7":"9.316963","8":"9.316963","9":"9.349963","10":"9.349963","11":"9.054861","12":"8.997861","13":"8.992161","14":"8.992161","15":"9.118412","16":"9.101818","17":"9.095152","18":"9.112118","19":"9.112118","20":"9.112118","21":"8.946080","22":"8.938397","23":"8.589952","24":"8.537682","25":"8.537682","26":"8.517042","27":"8.517042","28":"8.517042","29":"8.517042","30":"8.460198","31":"8.460198","32":"8.460198","33":"8.460198","34":"8.460198","35":"8.460198","36":"8.428282","37":"8.428282","38":"8.417782","39":"8.417782","40":"8.417782","41":"8.417782","42":"passengers"},{"1":"21.140","2":"10.636417","3":"10.636417","4":"10.626972","5":"9.988067","6":"10.041967","7":"10.041967","8":"10.041967","9":"10.074967","10":"10.074967","11":"9.375542","12":"9.318542","13":"9.308842","14":"9.308842","15":"9.428183","16":"9.349147","17":"9.303813","18":"9.284313","19":"9.284313","20":"9.284313","21":"8.915567","22":"8.905123","23":"8.496395","24":"8.454258","25":"8.454258","26":"8.429018","27":"8.429018","28":"8.429018","29":"8.429018","30":"8.391275","31":"8.391275","32":"8.391275","33":"8.391275","34":"8.391275","35":"8.391275","36":"8.359358","37":"8.359358","38":"8.348858","39":"8.348858","40":"8.348858","41":"8.348858","42":"passengers"},{"1":"20.320","2":"10.579462","3":"10.579462","4":"10.570017","5":"10.093932","6":"10.167732","7":"10.167732","8":"10.167732","9":"10.177232","10":"10.177232","11":"9.643960","12":"9.625460","13":"9.615760","14":"9.615760","15":"9.757125","16":"9.657110","17":"9.623550","18":"9.640452","19":"9.640452","20":"9.640452","21":"9.174453","22":"9.165403","23":"8.723277","24":"8.666507","25":"8.666507","26":"8.618800","27":"8.618800","28":"8.618800","29":"8.618800","30":"8.515112","31":"8.515112","32":"8.515112","33":"8.515112","34":"8.515112","35":"8.515112","36":"8.483195","37":"8.483195","38":"8.472695","39":"8.472695","40":"8.472695","41":"8.472695","42":"passengers"},{"1":"20.320","2":"10.689228","3":"10.689228","4":"10.679783","5":"10.203698","6":"10.277498","7":"10.277498","8":"10.277498","9":"10.286998","10":"10.286998","11":"9.778602","12":"9.760102","13":"9.750402","14":"9.750402","15":"9.883042","16":"9.783027","17":"9.757067","18":"9.775968","19":"9.775968","20":"9.775968","21":"9.296048","22":"9.286998","23":"8.787423","24":"8.740787","25":"8.740787","26":"8.715547","27":"8.715547","28":"8.715547","29":"8.715547","30":"8.655378","31":"8.655378","32":"8.655378","33":"8.655378","34":"8.655378","35":"8.655378","36":"8.623462","37":"8.623462","38":"8.612962","39":"8.612962","40":"8.612962","41":"8.612962","42":"passengers"},{"1":"20.320","2":"10.663495","3":"10.663495","4":"10.654050","5":"10.177965","6":"10.251765","7":"10.251765","8":"10.251765","9":"10.261265","10":"10.261265","11":"9.751968","12":"9.733468","13":"9.723768","14":"9.723768","15":"9.856408","16":"9.756393","17":"9.730433","18":"9.749335","19":"9.749335","20":"9.749335","21":"9.296362","22":"9.287312","23":"8.811370","24":"8.760600","25":"8.760600","26":"8.703160","27":"8.703160","28":"8.703160","29":"8.703160","30":"8.604972","31":"8.604972","32":"8.604972","33":"8.604972","34":"8.604972","35":"8.604972","36":"8.573055","37":"8.573055","38":"8.562555","39":"8.562555","40":"8.562555","41":"8.562555","42":"passengers"},{"1":"18.820","2":"9.783107","3":"9.783107","4":"9.759162","5":"9.230243","6":"9.249523","7":"9.249523","8":"9.249523","9":"9.259023","10":"9.259023","11":"9.173172","12":"9.164725","13":"9.159025","14":"9.159025","15":"9.277715","16":"9.251317","17":"9.217575","18":"9.271172","19":"9.271172","20":"9.271172","21":"8.735987","22":"8.742978","23":"8.364760","24":"8.322623","25":"8.322623","26":"8.297383","27":"8.297383","28":"8.297383","29":"8.297383","30":"8.259640","31":"8.259640","32":"8.259640","33":"8.259640","34":"8.259640","35":"8.259640","36":"8.227723","37":"8.227723","38":"8.217223","39":"8.217223","40":"8.217223","41":"8.217223","42":"passengers"},{"1":"17.910","2":"10.078375","3":"10.078375","4":"10.132650","5":"9.527812","6":"9.574878","7":"9.574878","8":"9.574878","9":"9.584378","10":"9.584378","11":"9.218545","12":"9.174078","13":"9.164378","14":"9.164378","15":"9.315078","16":"9.289098","17":"9.258132","18":"9.247992","19":"9.247992","20":"9.247992","21":"8.813282","22":"8.798182","23":"8.448418","24":"8.379048","25":"8.379048","26":"8.358408","27":"8.345608","28":"8.345608","29":"8.267308","30":"8.232965","31":"8.232965","32":"8.232965","33":"8.232965","34":"8.232965","35":"8.232965","36":"8.201048","37":"8.201048","38":"8.190548","39":"8.190548","40":"8.190548","41":"8.190548","42":"passengers"},{"1":"15.040","2":"6.859352","3":"6.859352","4":"6.859352","5":"6.794372","6":"6.794372","7":"6.794372","8":"6.794372","9":"6.794372","10":"6.794372","11":"6.750022","12":"6.750022","13":"6.744322","14":"6.744322","15":"6.759822","16":"6.759822","17":"6.759822","18":"6.743157","19":"6.743157","20":"6.743157","21":"6.736167","22":"6.736167","23":"6.574503","24":"6.588520","25":"6.588520","26":"6.299433","27":"6.194183","28":"6.194183","29":"6.108043","30":"5.928337","31":"5.928337","32":"5.897188","33":"5.739398","34":"5.700803","35":"5.700803","36":"5.507957","37":"5.507957","38":"5.412068","39":"5.412068","40":"5.364717","41":"5.364717","42":"passengers"},{"1":"13.200","2":"6.514223","3":"6.514223","4":"6.523003","5":"6.386243","6":"6.386243","7":"6.386243","8":"6.386243","9":"6.386243","10":"6.386243","11":"6.320743","12":"6.320743","13":"6.315043","14":"6.315043","15":"6.319493","16":"6.311293","17":"6.290518","18":"6.292008","19":"6.292008","20":"6.292008","21":"6.277918","22":"6.277918","23":"5.925983","24":"5.770167","25":"5.764267","26":"5.657127","27":"5.645662","28":"5.645662","29":"5.550963","30":"5.344778","31":"5.344778","32":"5.298870","33":"5.192075","34":"5.166060","35":"5.166060","36":"4.894070","37":"4.894070","38":"4.775162","39":"4.775162","40":"4.738735","41":"4.738735","42":"passengers"},{"1":"13.020","2":"6.526645","3":"6.526645","4":"6.535425","5":"6.463665","6":"6.463665","7":"6.463665","8":"6.463665","9":"6.463665","10":"6.463665","11":"6.398165","12":"6.398165","13":"6.392465","14":"6.392465","15":"6.396915","16":"6.389915","17":"6.377173","18":"6.360508","19":"6.360508","20":"6.360508","21":"6.353518","22":"6.353518","23":"6.049955","24":"5.953455","25":"5.947455","26":"5.731625","27":"5.663350","28":"5.663350","29":"5.507870","30":"5.309002","31":"5.309002","32":"5.277853","33":"5.150488","34":"5.129173","35":"5.129173","36":"4.986293","37":"4.986293","38":"4.890405","39":"4.890405","40":"4.843053","41":"4.843053","42":"passengers"},{"1":"12.140","2":"6.114458","3":"6.114458","4":"6.114458","5":"6.049478","6":"6.049478","7":"6.049478","8":"6.049478","9":"6.049478","10":"6.049478","11":"6.007878","12":"6.007878","13":"6.002178","14":"6.002178","15":"6.017678","16":"6.004178","17":"6.004178","18":"5.983638","19":"5.983638","20":"5.983638","21":"5.976648","22":"5.976648","23":"5.717727","24":"5.652172","25":"5.650972","26":"5.347843","27":"5.294273","28":"5.294273","29":"5.198593","30":"5.071345","31":"5.073620","32":"5.041072","33":"4.926868","34":"4.892548","35":"4.892548","36":"4.691477","37":"4.691477","38":"4.595588","39":"4.595588","40":"4.548237","41":"4.548237","42":"passengers"},{"1":"10.560","2":"6.211468","3":"6.211468","4":"6.293468","5":"6.228488","6":"6.228488","7":"6.228488","8":"6.228488","9":"6.228488","10":"6.228488","11":"6.082988","12":"6.082988","13":"6.077288","14":"6.077288","15":"6.092788","16":"6.077788","17":"6.077788","18":"6.061123","19":"6.061123","20":"6.061123","21":"6.054133","22":"6.054133","23":"5.668768","24":"5.686977","25":"5.684577","26":"5.416895","27":"5.296750","28":"5.296750","29":"5.100328","30":"4.823693","31":"4.827193","32":"4.799658","33":"4.684650","34":"4.653530","35":"4.653530","36":"4.453870","37":"4.453870","38":"4.229762","39":"4.229762","40":"4.149568","41":"4.149568","42":"passengers"},{"1":"10.520","2":"6.124890","3":"6.124890","4":"6.206890","5":"6.141910","6":"6.141910","7":"6.141910","8":"6.141910","9":"6.141910","10":"6.141910","11":"5.996410","12":"5.996410","13":"5.990710","14":"5.990710","15":"6.006210","16":"5.991210","17":"5.991210","18":"5.974545","19":"5.974545","20":"5.974545","21":"5.967555","22":"5.967555","23":"5.657853","24":"5.678672","25":"5.677472","26":"5.349823","27":"5.218695","28":"5.218695","29":"5.056573","30":"4.767238","31":"4.770738","32":"4.735590","33":"4.612287","34":"4.581167","35":"4.581167","36":"4.379973","37":"4.379973","38":"4.202965","39":"4.202965","40":"4.125913","41":"4.125913","42":"passengers"},{"1":"9.520","2":"4.753657","3":"4.753657","4":"4.753657","5":"4.688677","6":"4.688677","7":"4.688677","8":"4.688677","9":"4.688677","10":"4.688677","11":"4.647077","12":"4.647077","13":"4.641377","14":"4.641377","15":"4.656877","16":"4.643377","17":"4.643377","18":"4.622837","19":"4.622837","20":"4.622837","21":"4.615847","22":"4.615847","23":"3.986743","24":"3.953998","25":"3.952798","26":"3.715802","27":"3.552073","28":"3.552073","29":"3.416403","30":"3.279602","31":"3.285377","32":"3.232795","33":"3.137007","34":"3.065612","35":"3.065612","36":"2.900773","37":"2.814727","38":"2.527275","39":"2.527275","40":"2.285827","41":"2.285827","42":"passengers"},{"1":"8.080","2":"5.404133","3":"5.404133","4":"5.486133","5":"5.421153","6":"5.421153","7":"5.421153","8":"5.421153","9":"5.421153","10":"5.421153","11":"5.275653","12":"5.275653","13":"5.269953","14":"5.269953","15":"5.285453","16":"5.270453","17":"5.270453","18":"5.253788","19":"5.253788","20":"5.253788","21":"5.246798","22":"5.246798","23":"4.689373","24":"4.695953","25":"4.694753","26":"4.363780","27":"4.221652","28":"4.221652","29":"4.053222","30":"3.847232","31":"3.853007","32":"3.833950","33":"3.727567","34":"3.711172","35":"3.711172","36":"3.425733","37":"3.339687","38":"3.042778","39":"3.042778","40":"2.915505","41":"2.915505","42":"passengers"},{"1":"8.000","2":"4.822643","3":"4.822643","4":"4.822643","5":"4.757663","6":"4.757663","7":"4.757663","8":"4.757663","9":"4.757663","10":"4.757663","11":"4.716063","12":"4.716063","13":"4.710363","14":"4.710363","15":"4.725863","16":"4.712363","17":"4.712363","18":"4.695698","19":"4.695698","20":"4.695698","21":"4.688708","22":"4.688708","23":"4.081855","24":"4.058435","25":"4.057235","26":"3.820238","27":"3.682810","28":"3.682810","29":"3.516540","30":"3.359647","31":"3.365422","32":"3.342240","33":"3.246452","34":"3.179457","35":"3.179457","36":"3.007858","37":"2.921812","38":"2.634360","39":"2.634360","40":"2.407812","41":"2.407812","42":"passengers"},{"1":"7.000","2":"6.316453","3":"6.316453","4":"6.325233","5":"6.207953","6":"6.207953","7":"6.207953","8":"6.207953","9":"6.207953","10":"6.207953","11":"6.181553","12":"6.181553","13":"6.175853","14":"6.175853","15":"6.191353","16":"6.183153","17":"6.157153","18":"6.157753","19":"6.157753","20":"6.157753","21":"6.181163","22":"6.176163","23":"5.565320","24":"5.516713","25":"5.513113","26":"5.356900","27":"5.311540","28":"5.311540","29":"5.234740","30":"4.943660","31":"4.943660","32":"4.921953","33":"4.821703","34":"4.797428","35":"4.797428","36":"4.452610","37":"4.452610","38":"4.263202","39":"4.263202","40":"4.223740","41":"4.223740","42":"passengers"},{"1":"6.940","2":"5.513805","3":"5.513805","4":"5.511605","5":"5.401105","6":"5.401105","7":"5.401105","8":"5.401105","9":"5.401105","10":"5.401105","11":"5.378905","12":"5.378905","13":"5.373205","14":"5.373205","15":"5.388705","16":"5.380505","17":"5.354505","18":"5.355105","19":"5.355105","20":"5.355105","21":"5.388515","22":"5.383515","23":"4.569513","24":"4.577293","25":"4.576093","26":"4.310197","27":"4.181358","28":"4.181358","29":"4.034328","30":"3.800243","31":"3.804818","32":"3.793375","33":"3.741558","34":"3.742988","35":"3.742988","36":"3.446643","37":"3.362263","38":"3.076227","39":"3.076227","40":"2.948978","41":"2.948978","42":"passengers"},{"1":"6.840","2":"5.502403","3":"5.502403","4":"5.511183","5":"5.393903","6":"5.393903","7":"5.393903","8":"5.393903","9":"5.393903","10":"5.393903","11":"5.367503","12":"5.367503","13":"5.361803","14":"5.361803","15":"5.377303","16":"5.369103","17":"5.348328","18":"5.355428","19":"5.355428","20":"5.355428","21":"5.388838","22":"5.388838","23":"4.567893","24":"4.581873","25":"4.580673","26":"4.327102","27":"4.198263","28":"4.198263","29":"4.072083","30":"3.882323","31":"3.886898","32":"3.878875","33":"3.830478","34":"3.828308","35":"3.828308","36":"3.436663","37":"3.405463","38":"3.071557","39":"3.071557","40":"2.944308","41":"2.944308","42":"passengers"},{"1":"6.840","2":"5.466835","3":"5.466835","4":"5.475615","5":"5.358335","6":"5.358335","7":"5.358335","8":"5.358335","9":"5.358335","10":"5.358335","11":"5.331935","12":"5.331935","13":"5.326235","14":"5.326235","15":"5.341735","16":"5.333535","17":"5.307535","18":"5.308135","19":"5.308135","20":"5.308135","21":"5.341545","22":"5.336545","23":"4.528278","24":"4.542258","25":"4.541058","26":"4.294262","27":"4.165423","28":"4.165423","29":"4.039243","30":"3.827283","31":"3.831858","32":"3.823835","33":"3.775438","34":"3.773268","35":"3.773268","36":"3.386533","37":"3.355333","38":"3.037027","39":"3.037027","40":"2.909778","41":"2.909778","42":"passengers"},{"1":"4.900","2":"5.693195","3":"5.693195","4":"5.701975","5":"5.584695","6":"5.584695","7":"5.584695","8":"5.584695","9":"5.584695","10":"5.584695","11":"5.558295","12":"5.558295","13":"5.552595","14":"5.552595","15":"5.568095","16":"5.559895","17":"5.539120","18":"5.539720","19":"5.539720","20":"5.539720","21":"5.563130","22":"5.563130","23":"4.735800","24":"4.759110","25":"4.757910","26":"4.543813","27":"4.421758","28":"4.421758","29":"4.287692","30":"3.987580","31":"3.987580","32":"3.977782","33":"3.903710","34":"3.861385","35":"3.861385","36":"3.513815","37":"3.513815","38":"3.255292","39":"3.255292","40":"3.182563","41":"3.182563","42":"passengers"},{"1":"3.940","2":"4.213093","3":"4.213093","4":"4.295093","5":"4.230113","6":"4.230113","7":"4.230113","8":"4.230113","9":"4.230113","10":"4.230113","11":"4.084613","12":"4.084613","13":"4.078913","14":"4.078913","15":"4.094413","16":"4.080913","17":"4.080913","18":"4.060373","19":"4.060373","20":"4.060373","21":"4.053383","22":"4.053383","23":"3.276617","24":"3.282412","25":"3.281212","26":"3.060575","27":"2.841160","28":"2.841160","29":"2.658887","30":"2.364127","31":"2.364127","32":"2.304985","33":"2.189667","34":"2.104667","35":"2.104667","36":"1.936608","37":"1.848242","38":"1.534337","39":"1.534337","40":"1.192108","41":"1.192108","42":"passengers"},{"1":"3.200","2":"4.615478","3":"4.615478","4":"4.624258","5":"4.487498","6":"4.487498","7":"4.487498","8":"4.487498","9":"4.487498","10":"4.487498","11":"4.421998","12":"4.421998","13":"4.416298","14":"4.416298","15":"4.420748","16":"4.412548","17":"4.391773","18":"4.398873","19":"4.398873","20":"4.398873","21":"4.391883","22":"4.391883","23":"3.530308","24":"3.544288","25":"3.543088","26":"3.392827","27":"3.242088","28":"3.242088","29":"3.071415","30":"2.807640","31":"2.807640","32":"2.778242","33":"2.720420","34":"2.654270","35":"2.654270","36":"2.417042","37":"2.417042","38":"2.152020","39":"2.152020","40":"1.861800","41":"1.861800","42":"passengers"},{"1":"2.960","2":"4.502035","3":"4.502035","4":"4.510815","5":"4.439055","6":"4.439055","7":"4.439055","8":"4.439055","9":"4.439055","10":"4.439055","11":"4.373555","12":"4.373555","13":"4.367855","14":"4.367855","15":"4.372305","16":"4.364105","17":"4.343330","18":"4.326665","19":"4.326665","20":"4.326665","21":"4.319675","22":"4.319675","23":"3.423252","24":"3.429757","25":"3.428557","26":"3.244675","27":"3.051137","28":"3.051137","29":"2.870763","30":"2.638653","31":"2.638653","32":"2.596155","33":"2.507003","34":"2.445553","35":"2.445553","36":"2.219625","37":"2.219625","38":"1.954603","39":"1.954603","40":"1.630658","41":"1.630658","42":"passengers"},{"1":"0.940","2":"4.375477","3":"4.375477","4":"4.375477","5":"4.290977","6":"4.290977","7":"4.290977","8":"4.290977","9":"4.290977","10":"4.290977","11":"4.288477","12":"4.288477","13":"4.282777","14":"4.282777","15":"4.298277","16":"4.284777","17":"4.284777","18":"4.272877","19":"4.272877","20":"4.272877","21":"4.306287","22":"4.306287","23":"3.293590","24":"3.283065","25":"3.281865","26":"3.069273","27":"2.883632","28":"2.883632","29":"2.675898","30":"2.390603","31":"2.390603","32":"2.331462","33":"2.259123","34":"2.170123","35":"2.170123","36":"1.969073","37":"1.882373","38":"1.547978","39":"1.547978","40":"1.236325","41":"1.236325","42":"passengers"},{"1":"0.660","2":"4.264565","3":"4.264565","4":"4.273345","5":"4.201585","6":"4.201585","7":"4.201585","8":"4.201585","9":"4.201585","10":"4.201585","11":"4.136085","12":"4.136085","13":"4.130385","14":"4.130385","15":"4.134835","16":"4.126635","17":"4.105860","18":"4.089195","19":"4.089195","20":"4.089195","21":"4.075105","22":"4.075105","23":"3.176908","24":"3.187333","25":"3.186133","26":"3.002252","27":"2.763500","28":"2.763500","29":"2.573067","30":"2.255332","31":"2.255332","32":"2.203390","33":"2.110788","34":"2.043688","35":"2.043688","36":"1.802368","37":"1.802368","38":"1.401023","39":"1.401023","40":"1.056095","41":"1.056095","42":"passengers"},{"1":"10.930","2":"12.450731","3":"12.466554","4":"12.466554","5":"12.466554","6":"12.466554","7":"12.466554","8":"12.466554","9":"12.466554","10":"12.466554","11":"12.525311","12":"11.878863","13":"11.878863","14":"11.878863","15":"11.789413","16":"11.789413","17":"11.755142","18":"11.755142","19":"11.717342","20":"11.678543","21":"11.678543","22":"11.558309","23":"10.841733","24":"10.839126","25":"10.839126","26":"10.839126","27":"10.839126","28":"10.827132","29":"10.827132","30":"10.827132","31":"10.827132","32":"10.827132","33":"10.827132","34":"10.827132","35":"10.782732","36":"10.782732","37":"10.782732","38":"10.782732","39":"10.782732","40":"10.782732","41":"10.782732","42":"length"},{"1":"9.650","2":"9.920777","3":"9.640452","4":"9.640452","5":"9.640452","6":"9.640452","7":"9.640452","8":"9.413213","9":"9.244848","10":"9.211095","11":"9.166662","12":"9.166662","13":"9.166662","14":"9.166662","15":"9.142160","16":"9.142160","17":"9.332923","18":"9.332923","19":"9.332923","20":"9.395282","21":"9.395282","22":"9.353237","23":"8.744493","24":"8.749885","25":"8.749885","26":"8.749885","27":"8.749885","28":"8.739892","29":"8.739892","30":"8.739892","31":"8.739892","32":"8.739892","33":"8.739892","34":"8.739892","35":"8.695492","36":"8.695492","37":"8.695492","38":"8.695492","39":"8.695492","40":"8.695492","41":"8.695492","42":"length"},{"1":"9.650","2":"10.046393","3":"9.775968","4":"9.775968","5":"9.775968","6":"9.775968","7":"9.775968","8":"9.533822","9":"9.356857","10":"9.324703","11":"9.294103","12":"9.294103","13":"9.294103","14":"9.294103","15":"9.249777","16":"9.249777","17":"9.428690","18":"9.428690","19":"9.428690","20":"9.491048","21":"9.491048","22":"9.457078","23":"8.788302","24":"8.793693","25":"8.793693","26":"8.793693","27":"8.793693","28":"8.783700","29":"8.783700","30":"8.783700","31":"8.783700","32":"8.783700","33":"8.783700","34":"8.783700","35":"8.739300","36":"8.739300","37":"8.739300","38":"8.739300","39":"8.739300","40":"8.739300","41":"8.739300","42":"length"},{"1":"9.650","2":"10.019760","3":"9.749335","4":"9.749335","5":"9.749335","6":"9.749335","7":"9.749335","8":"9.507188","9":"9.330223","10":"9.302570","11":"9.271970","12":"9.271970","13":"9.271970","14":"9.271970","15":"9.235093","16":"9.235093","17":"9.406557","18":"9.406557","19":"9.406557","20":"9.468915","21":"9.468915","22":"9.434945","23":"8.833602","24":"8.838993","25":"8.838993","26":"8.838993","27":"8.838993","28":"8.829000","29":"8.829000","30":"8.829000","31":"8.829000","32":"8.829000","33":"8.829000","34":"8.829000","35":"8.784600","36":"8.784600","37":"8.784600","38":"8.784600","39":"8.784600","40":"8.784600","41":"8.784600","42":"length"},{"1":"9.650","2":"10.480850","3":"10.183387","4":"10.183387","5":"10.183387","6":"10.183387","7":"10.183387","8":"10.072600","9":"9.937227","10":"9.922787","11":"10.001787","12":"9.921787","13":"9.921787","14":"9.921787","15":"9.756850","16":"9.756850","17":"9.813023","18":"9.813023","19":"9.813023","20":"9.863688","21":"9.863688","22":"9.746063","23":"9.130063","24":"9.139555","25":"9.139555","26":"9.139555","27":"9.139555","28":"9.117042","29":"9.117042","30":"9.117042","31":"9.117042","32":"9.117042","33":"9.117042","34":"9.117042","35":"9.072642","36":"9.072642","37":"9.072642","38":"9.072642","39":"9.072642","40":"9.072642","41":"9.072642","42":"length"},{"1":"9.650","2":"10.562078","3":"10.226235","4":"10.226235","5":"10.226235","6":"10.226235","7":"10.226235","8":"10.132832","9":"9.971418","10":"9.965978","11":"10.008978","12":"9.894828","13":"9.894828","14":"9.894828","15":"9.758528","16":"9.758528","17":"9.837102","18":"9.837102","19":"9.837102","20":"9.887767","21":"9.887767","22":"9.799308","23":"9.153577","24":"9.148228","25":"9.148228","26":"9.148228","27":"9.148228","28":"9.125715","29":"9.125715","30":"9.125715","31":"9.125715","32":"9.125715","33":"9.125715","34":"9.125715","35":"9.081315","36":"9.081315","37":"9.081315","38":"9.081315","39":"9.081315","40":"9.081315","41":"9.081315","42":"length"},{"1":"9.630","2":"9.326388","3":"8.903345","4":"8.903345","5":"8.903345","6":"8.903345","7":"8.903345","8":"8.798182","9":"8.711675","10":"8.672058","11":"8.627778","12":"8.627778","13":"8.627778","14":"8.627778","15":"8.570770","16":"8.574903","17":"8.588187","18":"8.588187","19":"8.626412","20":"8.761265","21":"8.761265","22":"8.742625","23":"8.057467","24":"8.069838","25":"8.069838","26":"8.069838","27":"8.069838","28":"8.038475","29":"8.038475","30":"8.038475","31":"8.038475","32":"8.038475","33":"8.038475","34":"8.038475","35":"7.994075","36":"7.994075","37":"7.994075","38":"7.994075","39":"7.994075","40":"7.994075","41":"7.994075","42":"length"},{"1":"9.620","2":"10.107986","3":"9.815392","4":"9.815392","5":"9.815392","6":"9.815392","7":"9.815392","8":"9.681819","9":"9.504295","10":"9.508855","11":"9.600855","12":"9.520855","13":"9.520855","14":"9.520855","15":"9.376227","16":"9.376227","17":"9.424034","18":"9.424034","19":"9.424034","20":"9.483424","21":"9.483424","22":"9.384342","23":"8.955982","24":"8.953376","25":"8.953376","26":"8.953376","27":"8.953376","28":"8.948732","29":"8.948732","30":"8.948732","31":"8.948732","32":"8.948732","33":"8.948732","34":"8.948732","35":"8.904332","36":"8.904332","37":"8.904332","38":"8.904332","39":"8.904332","40":"8.904332","41":"8.904332","42":"length"},{"1":"9.610","2":"10.338712","3":"10.084789","4":"10.084789","5":"10.084789","6":"10.084789","7":"10.084789","8":"10.002732","9":"9.861969","10":"9.874529","11":"9.940529","12":"9.787129","13":"9.787129","14":"9.787129","15":"9.616824","16":"9.616824","17":"9.659431","18":"9.659431","19":"9.608131","20":"9.689396","21":"9.689396","22":"9.618697","23":"9.151037","24":"9.148431","25":"9.148431","26":"9.148431","27":"9.148431","28":"9.143787","29":"9.143787","30":"9.143787","31":"9.143787","32":"9.143787","33":"9.143787","34":"9.143787","35":"9.099387","36":"9.099387","37":"9.099387","38":"9.099387","39":"9.099387","40":"9.099387","41":"9.099387","42":"length"},{"1":"9.570","2":"9.953342","3":"9.646332","4":"9.646332","5":"9.646332","6":"9.646332","7":"9.646332","8":"9.517562","9":"9.378715","10":"9.347813","11":"9.303813","12":"9.300980","13":"9.300980","14":"9.300980","15":"9.227688","16":"9.227688","17":"9.342372","18":"9.342372","19":"9.359963","20":"9.475828","21":"9.475828","22":"9.363302","23":"8.755088","24":"8.762730","25":"8.762730","26":"8.762730","27":"8.762730","28":"8.740217","29":"8.740217","30":"8.740217","31":"8.740217","32":"8.740217","33":"8.740217","34":"8.740217","35":"8.695817","36":"8.695817","37":"8.695817","38":"8.695817","39":"8.695817","40":"8.695817","41":"8.695817","42":"length"},{"1":"9.510","2":"13.106380","3":"13.210987","4":"13.210987","5":"13.210987","6":"13.210987","7":"13.210987","8":"13.210987","9":"13.210987","10":"13.210987","11":"13.265987","12":"11.940582","13":"11.940582","14":"11.940582","15":"11.878798","16":"11.838778","17":"11.785928","18":"11.785928","19":"11.734628","20":"11.695828","21":"11.695828","22":"11.580595","23":"10.872412","24":"10.872378","25":"10.872378","26":"10.872378","27":"10.872378","28":"10.860385","29":"10.860385","30":"10.860385","31":"10.860385","32":"10.860385","33":"10.860385","34":"10.860385","35":"10.815985","36":"10.815985","37":"10.815985","38":"10.815985","39":"10.815985","40":"10.815985","41":"10.815985","42":"length"},{"1":"9.510","2":"12.934728","3":"13.083084","4":"13.083084","5":"13.083084","6":"13.083084","7":"13.083084","8":"13.083084","9":"13.083084","10":"13.083084","11":"13.141841","12":"11.932523","13":"11.932523","14":"11.932523","15":"11.834833","16":"11.776655","17":"11.725598","18":"11.725598","19":"11.689838","20":"11.656038","21":"11.656038","22":"11.556438","23":"10.807348","24":"10.802000","25":"10.802000","26":"10.802000","27":"10.802000","28":"10.772136","29":"10.772136","30":"10.772136","31":"10.772136","32":"10.772136","33":"10.772136","34":"10.772136","35":"10.727736","36":"10.727736","37":"10.727736","38":"10.727736","39":"10.727736","40":"10.727736","41":"10.727736","42":"length"},{"1":"9.510","2":"12.425490","3":"12.676117","4":"12.676117","5":"12.676117","6":"12.676117","7":"12.676117","8":"12.664283","9":"12.664283","10":"12.664283","11":"12.747783","12":"11.376582","13":"11.376582","14":"11.376582","15":"11.161785","16":"11.138265","17":"11.089948","18":"11.089948","19":"11.038648","20":"11.004048","21":"11.004048","22":"10.955015","23":"10.171002","24":"10.180493","25":"10.180493","26":"10.180493","27":"10.180493","28":"10.150630","29":"10.150630","30":"10.150630","31":"10.150630","32":"10.150630","33":"10.150630","34":"10.150630","35":"10.106230","36":"10.106230","37":"10.106230","38":"10.106230","39":"10.106230","40":"10.106230","41":"10.106230","42":"length"},{"1":"9.210","2":"9.792540","3":"9.474327","4":"9.474327","5":"9.474327","6":"9.474327","7":"9.474327","8":"9.365630","9":"9.200290","10":"9.183880","11":"9.171880","12":"9.171880","13":"9.171880","14":"9.171880","15":"9.101818","16":"9.101818","17":"9.172952","18":"9.172952","19":"9.177852","20":"9.298592","21":"9.298592","22":"9.155330","23":"8.684703","24":"8.679355","25":"8.679355","26":"8.679355","27":"8.679355","28":"8.656842","29":"8.656842","30":"8.656842","31":"8.656842","32":"8.656842","33":"8.656842","34":"8.656842","35":"8.612442","36":"8.612442","37":"8.612442","38":"8.612442","39":"8.612442","40":"8.612442","41":"8.612442","42":"length"},{"1":"9.150","2":"9.198310","3":"8.730247","4":"8.730247","5":"8.730247","6":"8.730247","7":"8.730247","8":"8.552638","9":"8.348545","10":"8.352135","11":"8.352135","12":"8.352135","13":"8.352135","14":"8.352135","15":"8.297273","16":"8.297273","17":"8.361427","18":"8.361427","19":"8.352527","20":"8.509040","21":"8.509040","22":"8.446008","23":"8.154168","24":"8.164902","25":"8.164902","26":"8.164902","27":"8.164902","28":"8.160258","29":"8.160258","30":"8.160258","31":"8.160258","32":"8.160258","33":"8.160258","34":"8.160258","35":"8.115858","36":"8.115858","37":"8.115858","38":"8.115858","39":"8.115858","40":"8.115858","41":"8.115858","42":"length"},{"1":"8.930","2":"11.658352","3":"11.567966","4":"11.567966","5":"11.567966","6":"11.567966","7":"11.567966","8":"11.542666","9":"11.505869","10":"11.518429","11":"11.602829","12":"10.885826","13":"10.885826","14":"10.885826","15":"10.617744","16":"10.579124","17":"10.582714","18":"10.582714","19":"10.531414","20":"10.506814","21":"10.506814","22":"10.445834","23":"9.854817","24":"9.872476","25":"9.872476","26":"9.872476","27":"9.872476","28":"9.834446","29":"9.834446","30":"9.834446","31":"9.834446","32":"9.834446","33":"9.834446","34":"9.834446","35":"9.790046","36":"9.790046","37":"9.790046","38":"9.790046","39":"9.790046","40":"9.790046","41":"9.790046","42":"length"},{"1":"8.930","2":"12.077557","3":"11.998907","4":"11.998907","5":"11.998907","6":"11.998907","7":"11.998907","8":"11.973607","9":"11.936811","10":"11.949371","11":"12.022771","12":"11.233187","13":"11.233187","14":"11.233187","15":"11.032306","16":"10.993686","17":"10.988076","18":"10.988076","19":"10.936776","20":"10.912176","21":"10.912176","22":"10.854996","23":"10.260279","24":"10.277937","25":"10.277937","26":"10.277937","27":"10.277937","28":"10.239907","29":"10.239907","30":"10.239907","31":"10.239907","32":"10.239907","33":"10.239907","34":"10.239907","35":"10.195507","36":"10.195507","37":"10.195507","38":"10.195507","39":"10.195507","40":"10.195507","41":"10.195507","42":"length"},{"1":"8.900","2":"12.066109","3":"12.030813","4":"12.030813","5":"12.030813","6":"12.030813","7":"12.030813","8":"12.005700","9":"11.997033","10":"11.997033","11":"12.069533","12":"11.172485","13":"11.172485","14":"11.172485","15":"11.003195","16":"10.942275","17":"10.884758","18":"10.884758","19":"10.833458","20":"10.798858","21":"10.798858","22":"10.753625","23":"10.121040","24":"10.115692","25":"10.115692","26":"10.115692","27":"10.115692","28":"10.085828","29":"10.085828","30":"10.085828","31":"10.085828","32":"10.085828","33":"10.085828","34":"10.085828","35":"10.041428","36":"10.041428","37":"10.041428","38":"10.041428","39":"10.041428","40":"10.041428","41":"10.041428","42":"length"},{"1":"8.800","2":"10.041193","3":"9.714667","4":"9.714667","5":"9.714667","6":"9.714667","7":"9.714667","8":"9.584942","9":"9.507565","10":"9.512125","11":"9.512125","12":"9.198338","13":"9.198338","14":"9.198338","15":"9.056225","16":"9.056225","17":"9.102342","18":"9.102342","19":"9.051042","20":"9.026442","21":"9.026442","22":"9.001368","23":"8.727200","24":"8.737933","25":"8.737933","26":"8.737933","27":"8.737933","28":"8.725940","29":"8.725940","30":"8.725940","31":"8.725940","32":"8.725940","33":"8.725940","34":"8.725940","35":"8.681540","36":"8.681540","37":"8.681540","38":"8.681540","39":"8.681540","40":"8.681540","41":"8.681540","42":"length"},{"1":"8.800","2":"9.685723","3":"9.381796","4":"9.381796","5":"9.381796","6":"9.381796","7":"9.381796","8":"9.252071","9":"9.179895","10":"9.184455","11":"9.184455","12":"8.949455","13":"8.949455","14":"8.949455","15":"8.832435","16":"8.832435","17":"8.870551","18":"8.870551","19":"8.819251","20":"8.794651","21":"8.794651","22":"8.771578","23":"8.493505","24":"8.507551","25":"8.507551","26":"8.507551","27":"8.507551","28":"8.495558","29":"8.495558","30":"8.495558","31":"8.495558","32":"8.495558","33":"8.495558","34":"8.495558","35":"8.451158","36":"8.451158","37":"8.451158","38":"8.451158","39":"8.451158","40":"8.451158","41":"8.451158","42":"length"},{"1":"8.660","2":"9.365727","3":"8.979783","4":"8.979783","5":"8.979783","6":"8.979783","7":"8.979783","8":"8.792760","9":"8.694073","10":"8.627063","11":"8.584330","12":"8.571497","13":"8.571497","14":"8.571497","15":"8.524960","16":"8.525318","17":"8.574968","18":"8.574968","19":"8.613193","20":"8.781047","21":"8.781047","22":"8.735987","23":"8.140203","24":"8.147845","25":"8.147845","26":"8.147845","27":"8.147845","28":"8.115132","29":"8.115132","30":"8.115132","31":"8.115132","32":"8.115132","33":"8.115132","34":"8.115132","35":"8.070732","36":"8.070732","37":"8.070732","38":"8.070732","39":"8.070732","40":"8.070732","41":"8.070732","42":"length"},{"1":"7.770","2":"6.513920","3":"6.458620","4":"6.458620","5":"6.458620","6":"6.458620","7":"6.458620","8":"6.458620","9":"6.452453","10":"6.452453","11":"6.452453","12":"6.452453","13":"6.452453","14":"6.452453","15":"6.429665","16":"6.429665","17":"6.429665","18":"6.429665","19":"6.429665","20":"6.429665","21":"6.429665","22":"6.429665","23":"5.770167","24":"5.828903","25":"5.871500","26":"5.871500","27":"5.886580","28":"5.767065","29":"5.767065","30":"5.767065","31":"5.767065","32":"5.767065","33":"5.677182","34":"5.677182","35":"5.382440","36":"5.382440","37":"5.382440","38":"5.382440","39":"5.298298","40":"5.298298","41":"5.298298","42":"length"},{"1":"7.180","2":"6.563400","3":"6.508100","4":"6.508100","5":"6.508100","6":"6.508100","7":"6.508100","8":"6.508100","9":"6.501933","10":"6.501933","11":"6.501933","12":"6.501933","13":"6.501933","14":"6.501933","15":"6.479145","16":"6.479145","17":"6.479145","18":"6.479145","19":"6.479145","20":"6.479145","21":"6.479145","22":"6.479145","23":"5.851225","24":"5.947455","25":"5.991252","26":"5.991252","27":"6.006332","28":"5.859485","29":"5.859485","30":"5.859485","31":"5.859485","32":"5.859485","33":"5.695902","34":"5.695902","35":"5.394893","36":"5.394893","37":"5.394893","38":"5.394893","39":"5.310752","40":"5.310752","41":"5.310752","42":"length"},{"1":"7.090","2":"5.716788","3":"5.661488","4":"5.661488","5":"5.661488","6":"5.661488","7":"5.661488","8":"5.661488","9":"5.655322","10":"5.655322","11":"5.655322","12":"5.655322","13":"5.655322","14":"5.655322","15":"5.653908","16":"5.653908","17":"5.653908","18":"5.653908","19":"5.653908","20":"5.653908","21":"5.653908","22":"5.653908","23":"4.894918","24":"4.909267","25":"4.921953","26":"4.921953","27":"4.921953","28":"4.504517","29":"4.504517","30":"4.523350","31":"4.523350","32":"4.523350","33":"4.496117","34":"4.496117","35":"4.243990","36":"4.243990","37":"4.243990","38":"4.243990","39":"4.169082","40":"4.169082","41":"4.169082","42":"length"},{"1":"7.080","2":"6.926120","3":"6.870820","4":"6.870820","5":"6.870820","6":"6.870820","7":"6.870820","8":"6.870820","9":"6.864653","10":"6.864653","11":"6.864653","12":"6.864653","13":"6.864653","14":"6.864653","15":"6.828065","16":"6.828065","17":"6.828065","18":"6.828065","19":"6.828065","20":"6.828065","21":"6.828065","22":"6.828065","23":"6.494427","24":"6.568687","25":"6.574503","26":"6.574503","27":"6.582503","28":"6.426752","29":"6.426752","30":"6.426752","31":"6.426752","32":"6.426752","33":"6.224588","34":"6.224588","35":"5.876600","36":"5.876600","37":"5.876600","38":"5.876600","39":"5.792458","40":"5.792458","41":"5.792458","42":"length"},{"1":"7.040","2":"5.945977","3":"5.890677","4":"5.890677","5":"5.890677","6":"5.890677","7":"5.890677","8":"5.890677","9":"5.884510","10":"5.884510","11":"5.884510","12":"5.884510","13":"5.884510","14":"5.884510","15":"5.847922","16":"5.847922","17":"5.847922","18":"5.847922","19":"5.847922","20":"5.847922","21":"5.847922","22":"5.847922","23":"5.307652","24":"5.338927","25":"5.347843","26":"5.347843","27":"5.347843","28":"5.115107","29":"5.115107","30":"5.111765","31":"5.111765","32":"5.111765","33":"4.993473","34":"4.993473","35":"4.784645","36":"4.784645","37":"4.733195","38":"4.733195","39":"4.649053","40":"4.649053","41":"4.649053","42":"length"},{"1":"6.160","2":"5.063132","3":"5.007832","4":"5.007832","5":"5.007832","6":"5.007832","7":"5.007832","8":"5.007832","9":"5.001665","10":"5.001665","11":"5.001665","12":"5.001665","13":"5.001665","14":"5.001665","15":"4.965077","16":"4.965077","17":"4.965077","18":"4.965077","19":"4.965077","20":"4.965077","21":"4.965077","22":"4.965077","23":"4.305717","24":"4.317912","25":"4.323898","26":"4.323898","27":"4.323898","28":"3.847232","29":"3.847232","30":"3.848857","31":"3.848857","32":"3.848857","33":"3.792132","34":"3.792132","35":"3.582508","36":"3.582508","37":"3.531058","38":"3.531058","39":"3.412607","40":"3.412607","41":"3.412607","42":"length"},{"1":"6.150","2":"6.044835","3":"5.989535","4":"5.989535","5":"5.989535","6":"5.989535","7":"5.989535","8":"5.989535","9":"5.983368","10":"5.983368","11":"5.983368","12":"5.983368","13":"5.983368","14":"5.983368","15":"5.946780","16":"5.946780","17":"5.946780","18":"5.946780","19":"5.946780","20":"5.946780","21":"5.946780","22":"5.946780","23":"5.489817","24":"5.523532","25":"5.535698","26":"5.535698","27":"5.535698","28":"5.218695","29":"5.218695","30":"5.217662","31":"5.217662","32":"5.217662","33":"5.102662","34":"5.102662","35":"4.835793","36":"4.835793","37":"4.835793","38":"4.835793","39":"4.751652","40":"4.751652","41":"4.751652","42":"length"},{"1":"5.940","2":"5.057840","3":"5.002540","4":"5.002540","5":"5.002540","6":"5.002540","7":"5.002540","8":"5.002540","9":"4.996373","10":"4.996373","11":"4.990173","12":"4.990173","13":"4.990173","14":"4.990173","15":"5.044340","16":"5.044340","17":"5.044340","18":"5.044340","19":"5.044340","20":"5.044340","21":"5.044340","22":"5.044340","23":"4.206945","24":"4.217053","25":"4.229740","26":"4.229740","27":"4.229740","28":"3.718987","29":"3.718987","30":"3.741558","31":"3.741558","32":"3.741558","33":"3.692158","34":"3.692158","35":"3.493695","36":"3.493695","37":"3.444945","38":"3.444945","39":"3.338093","40":"3.338093","41":"3.338093","42":"length"},{"1":"5.940","2":"5.138940","3":"5.083640","4":"5.083640","5":"5.083640","6":"5.083640","7":"5.083640","8":"5.083640","9":"5.077473","10":"5.077473","11":"5.077473","12":"5.077473","13":"5.077473","14":"5.077473","15":"5.070885","16":"5.070885","17":"5.070885","18":"5.070885","19":"5.070885","20":"5.070885","21":"5.070885","22":"5.070885","23":"4.243163","24":"4.237422","25":"4.250108","26":"4.250108","27":"4.250108","28":"3.796975","29":"3.796975","30":"3.828308","31":"3.828308","32":"3.828308","33":"3.813058","34":"3.813058","35":"3.634695","36":"3.634695","37":"3.585945","38":"3.585945","39":"3.479093","40":"3.479093","41":"3.479093","42":"length"},{"1":"5.940","2":"5.090120","3":"5.034820","4":"5.034820","5":"5.034820","6":"5.034820","7":"5.034820","8":"5.034820","9":"5.028653","10":"5.028653","11":"5.028653","12":"5.028653","13":"5.028653","14":"5.028653","15":"5.022065","16":"5.022065","17":"5.022065","18":"5.022065","19":"5.022065","20":"5.022065","21":"5.022065","22":"5.022065","23":"4.193283","24":"4.187542","25":"4.200228","26":"4.200228","27":"4.200228","28":"3.740735","29":"3.740735","30":"3.773268","31":"3.773268","32":"3.773268","33":"3.760368","34":"3.760368","35":"3.584565","36":"3.584565","37":"3.535815","38":"3.535815","39":"3.428963","40":"3.428963","41":"3.428963","42":"length"},{"1":"5.670","2":"6.207497","3":"6.152197","4":"6.152197","5":"6.152197","6":"6.152197","7":"6.152197","8":"6.152197","9":"6.146030","10":"6.146030","11":"6.146030","12":"6.146030","13":"6.146030","14":"6.146030","15":"6.109442","16":"6.109442","17":"6.109442","18":"6.109442","19":"6.109442","20":"6.109442","21":"6.109442","22":"6.109442","23":"5.619572","24":"5.656653","25":"5.673140","26":"5.673140","27":"5.673140","28":"5.396983","29":"5.396983","30":"5.395950","31":"5.395950","32":"5.395950","33":"5.296750","34":"5.296750","35":"5.029882","36":"5.029882","37":"5.029882","38":"5.029882","39":"4.945740","40":"4.945740","41":"4.945740","42":"length"},{"1":"5.600","2":"4.937612","3":"4.882312","4":"4.882312","5":"4.882312","6":"4.882312","7":"4.882312","8":"4.882312","9":"4.876145","10":"4.876145","11":"4.876145","12":"4.876145","13":"4.876145","14":"4.876145","15":"4.874732","16":"4.874732","17":"4.874732","18":"4.874732","19":"4.874732","20":"4.874732","21":"4.874732","22":"4.874732","23":"3.961977","24":"3.980785","25":"3.980785","26":"3.980785","27":"3.980785","28":"3.475457","29":"3.475457","30":"3.511690","31":"3.511690","32":"3.511690","33":"3.513815","34":"3.513815","35":"3.410718","36":"3.410718","37":"3.389868","38":"3.389868","39":"3.331610","40":"3.331610","41":"3.331610","42":"length"},{"1":"5.410","2":"4.898417","3":"4.843117","4":"4.843117","5":"4.843117","6":"4.843117","7":"4.843117","8":"4.843117","9":"4.836950","10":"4.836950","11":"4.836950","12":"4.836950","13":"4.836950","14":"4.836950","15":"4.800362","16":"4.800362","17":"4.800362","18":"4.800362","19":"4.800362","20":"4.800362","21":"4.800362","22":"4.800362","23":"4.133178","24":"4.145373","25":"4.147040","26":"4.147040","27":"4.147040","28":"3.691997","29":"3.691997","30":"3.688130","31":"3.688130","32":"3.688130","33":"3.645947","34":"3.645947","35":"3.416403","36":"3.416403","37":"3.364453","38":"3.364453","39":"3.245262","40":"3.220102","41":"3.220102","42":"length"},{"1":"5.370","2":"4.899718","3":"4.844418","4":"4.844418","5":"4.844418","6":"4.844418","7":"4.844418","8":"4.844418","9":"4.838252","10":"4.838252","11":"4.838252","12":"4.838252","13":"4.838252","14":"4.838252","15":"4.801663","16":"4.801663","17":"4.801663","18":"4.801663","19":"4.801663","20":"4.801663","21":"4.801663","22":"4.801663","23":"4.135645","24":"4.147840","25":"4.149507","26":"4.149507","27":"4.149507","28":"3.631662","29":"3.631662","30":"3.635595","31":"3.635595","32":"3.635595","33":"3.572745","34":"3.572745","35":"3.365422","36":"3.365422","37":"3.313472","38":"3.313472","39":"3.191020","40":"3.165860","41":"3.165860","42":"length"},{"1":"5.140","2":"3.642938","3":"3.587638","4":"3.587638","5":"3.587638","6":"3.587638","7":"3.587638","8":"3.587638","9":"3.581472","10":"3.581472","11":"3.581472","12":"3.581472","13":"3.581472","14":"3.581472","15":"3.563858","16":"3.563858","17":"3.563858","18":"3.563858","19":"3.563858","20":"3.563858","21":"3.563858","22":"3.563858","23":"2.631683","24":"2.641792","25":"2.641792","26":"2.641792","27":"2.641792","28":"2.052083","29":"2.052083","30":"2.062583","31":"2.062583","32":"2.062583","33":"2.065783","34":"2.065783","35":"1.979453","36":"1.979453","37":"1.954603","38":"1.954603","39":"1.898645","40":"1.858385","41":"1.858385","42":"length"},{"1":"5.130","2":"3.895122","3":"3.839822","4":"3.839822","5":"3.839822","6":"3.839822","7":"3.839822","8":"3.839822","9":"3.833655","10":"3.833655","11":"3.833655","12":"3.833655","13":"3.833655","14":"3.833655","15":"3.816042","16":"3.816042","17":"3.816042","18":"3.816042","19":"3.816042","20":"3.816042","21":"3.816042","22":"3.816042","23":"2.844800","24":"2.854908","25":"2.854908","26":"2.854908","27":"2.854908","28":"2.242420","29":"2.242420","30":"2.260000","31":"2.260000","32":"2.260000","33":"2.263200","34":"2.263200","35":"2.176870","36":"2.176870","37":"2.152020","38":"2.152020","39":"2.100462","40":"2.060202","41":"2.060202","42":"length"},{"1":"4.360","2":"3.738047","3":"3.682747","4":"3.682747","5":"3.682747","6":"3.682747","7":"3.682747","8":"3.682747","9":"3.676580","10":"3.676580","11":"3.676580","12":"3.676580","13":"3.676580","14":"3.676580","15":"3.639992","16":"3.639992","17":"3.639992","18":"3.639992","19":"3.639992","20":"3.639992","21":"3.639992","22":"3.639992","23":"2.771355","24":"2.783550","25":"2.783550","26":"2.783550","27":"2.783550","28":"2.198037","29":"2.198037","30":"2.204023","31":"2.204023","32":"2.204023","33":"2.146798","34":"2.146798","35":"1.999183","36":"1.999183","37":"1.950433","38":"1.950433","39":"1.848242","40":"1.828082","41":"1.828082","42":"length"},{"1":"2.960","2":"3.477152","3":"3.421852","4":"3.421852","5":"3.421852","6":"3.421852","7":"3.421852","8":"3.421852","9":"3.415685","10":"3.415685","11":"3.415685","12":"3.415685","13":"3.415685","14":"3.415685","15":"3.409097","16":"3.409097","17":"3.409097","18":"3.409097","19":"3.409097","20":"3.409097","21":"3.409097","22":"3.409097","23":"2.426515","24":"2.433290","25":"2.433290","26":"2.433290","27":"2.433290","28":"1.673222","29":"1.673222","30":"1.690802","31":"1.690802","32":"1.690802","33":"1.627635","34":"1.627635","35":"1.424753","36":"1.424753","37":"1.358443","38":"1.358443","39":"1.256485","40":"1.236325","41":"1.236325","42":"length"},{"1":"2.790","2":"3.156335","3":"3.101035","4":"3.101035","5":"3.101035","6":"3.101035","7":"3.101035","8":"3.101035","9":"3.094868","10":"3.094868","11":"3.094868","12":"3.094868","13":"3.094868","14":"3.094868","15":"3.077255","16":"3.077255","17":"3.077255","18":"3.077255","19":"3.077255","20":"3.077255","21":"3.077255","22":"3.077255","23":"2.032968","24":"2.043077","25":"2.043077","26":"2.043077","27":"2.043077","28":"1.377428","29":"1.377428","30":"1.387928","31":"1.387928","32":"1.387928","33":"1.357712","34":"1.357712","35":"1.186090","36":"1.186090","37":"1.147680","38":"1.147680","39":"1.087555","40":"1.056095","41":"1.056095","42":"length"},{"1":"16.370","2":"12.450731","3":"12.450731","4":"12.562631","5":"12.514881","6":"12.514881","7":"12.311723","8":"12.200223","9":"12.200223","10":"12.049969","11":"12.042203","12":"12.042203","13":"12.042203","14":"11.904278","15":"11.609058","16":"11.527838","17":"11.438071","18":"11.361471","19":"11.361471","20":"11.361471","21":"11.318671","22":"11.318671","23":"9.622249","24":"9.562156","25":"9.547836","26":"9.505436","27":"9.420161","28":"9.420161","29":"9.367911","30":"9.367911","31":"9.367911","32":"9.367911","33":"9.367911","34":"9.367911","35":"9.367911","36":"9.327111","37":"9.306798","38":"9.306798","39":"9.306798","40":"9.306798","41":"9.306798","42":"cabins"},{"1":"15.570","2":"11.932523","3":"11.932523","4":"11.842455","5":"11.814982","6":"11.814982","7":"11.640503","8":"11.527293","9":"11.527293","10":"11.317227","11":"11.293080","12":"11.276980","13":"11.276980","14":"11.150055","15":"10.857365","16":"10.761112","17":"10.655885","18":"10.583485","19":"10.583485","20":"10.583485","21":"10.524645","22":"10.524645","23":"9.242050","24":"9.171657","25":"9.157337","26":"9.114937","27":"9.025462","28":"9.025462","29":"8.973212","30":"8.973212","31":"8.973212","32":"8.973212","33":"8.973212","34":"8.973212","35":"8.973212","36":"8.932412","37":"8.912098","38":"8.912098","39":"8.912098","40":"8.912098","41":"8.912098","42":"cabins"},{"1":"14.870","2":"12.341360","3":"12.341360","4":"11.940582","5":"11.885815","6":"11.885815","7":"11.700320","8":"11.507710","9":"11.507710","10":"11.285157","11":"11.261010","12":"11.261010","13":"11.261010","14":"11.143460","15":"10.834257","16":"10.726253","17":"10.612107","18":"10.539707","19":"10.539707","20":"10.539707","21":"10.484067","22":"10.484067","23":"9.200765","24":"9.140672","25":"9.126352","26":"9.083952","27":"8.998677","28":"8.998677","29":"8.946427","30":"8.946427","31":"8.946427","32":"8.946427","33":"8.946427","34":"8.946427","35":"8.946427","36":"8.905627","37":"8.885313","38":"8.885313","39":"8.885313","40":"8.885313","41":"8.885313","42":"cabins"},{"1":"13.790","2":"11.341576","3":"11.341576","4":"11.037079","5":"10.988076","6":"10.988076","7":"10.616214","8":"10.499437","9":"10.499437","10":"10.144134","11":"10.136134","12":"10.138534","13":"10.138534","14":"10.113544","15":"9.927864","16":"9.876694","17":"9.634458","18":"9.647193","19":"9.647193","20":"9.647193","21":"9.544937","22":"9.544937","23":"8.494765","24":"8.426330","25":"8.412010","26":"8.369610","27":"8.280135","28":"8.280135","29":"8.227885","30":"8.227885","31":"8.227885","32":"8.227885","33":"8.227885","34":"8.227885","35":"8.227885","36":"8.187085","37":"8.166772","38":"8.166772","39":"8.166772","40":"8.166772","41":"8.166772","42":"cabins"},{"1":"13.560","2":"11.174592","3":"11.174592","4":"10.861795","5":"10.833458","6":"10.833458","7":"10.619197","8":"10.517770","9":"10.517770","10":"10.232547","11":"10.232547","12":"10.234947","13":"10.234947","14":"10.220673","15":"10.037993","16":"10.036223","17":"9.758153","18":"9.785598","19":"9.785598","20":"9.785598","21":"9.671292","22":"9.671292","23":"8.656230","24":"8.588587","25":"8.588717","26":"8.548517","27":"8.459042","28":"8.459042","29":"8.406792","30":"8.406792","31":"8.406792","32":"8.406792","33":"8.406792","34":"8.406792","35":"8.406792","36":"8.365992","37":"8.345678","38":"8.345678","39":"8.345678","40":"8.345678","41":"8.345678","42":"cabins"},{"1":"13.210","2":"11.305176","3":"11.305176","4":"11.000679","5":"10.951676","6":"10.951676","7":"10.582714","8":"10.465937","9":"10.465937","10":"10.095934","11":"10.087934","12":"10.082334","13":"10.082334","14":"10.057344","15":"9.926864","16":"9.875694","17":"9.620278","18":"9.633013","19":"9.633013","20":"9.633013","21":"9.520357","22":"9.520357","23":"8.508465","24":"8.440030","25":"8.425710","26":"8.403510","27":"8.314035","28":"8.314035","29":"8.261785","30":"8.261785","31":"8.261785","32":"8.261785","33":"8.261785","34":"8.261785","35":"8.261785","36":"8.220985","37":"8.200672","38":"8.200672","39":"8.200672","40":"8.200672","41":"8.200672","42":"cabins"},{"1":"13.000","2":"12.459799","3":"12.459799","4":"11.974499","5":"11.952430","6":"11.927230","7":"11.529168","8":"11.376582","9":"11.376582","10":"11.069445","11":"11.045298","12":"11.034198","13":"11.034198","14":"10.948248","15":"10.641952","16":"10.580827","17":"10.433568","18":"10.386038","19":"10.386038","20":"10.386038","21":"10.334632","22":"10.334632","23":"8.896637","24":"8.793043","25":"8.793173","26":"8.752973","27":"8.663498","28":"8.663498","29":"8.611248","30":"8.611248","31":"8.611248","32":"8.611248","33":"8.611248","34":"8.611248","35":"8.611248","36":"8.570448","37":"8.550135","38":"8.550135","39":"8.550135","40":"8.550135","41":"8.550135","42":"cabins"},{"1":"12.750","2":"10.671492","3":"10.671492","4":"10.321972","5":"10.249716","6":"10.249716","7":"10.014666","8":"9.874529","9":"9.874529","10":"9.537176","11":"9.505029","12":"9.511496","13":"9.511496","14":"9.484706","15":"9.161052","16":"9.016929","17":"8.700000","18":"8.690475","19":"8.690475","20":"8.690475","21":"8.717052","22":"8.688032","23":"8.042185","24":"7.969092","25":"7.954772","26":"7.912372","27":"7.827097","28":"7.827097","29":"7.774847","30":"7.774847","31":"7.774847","32":"7.774847","33":"7.774847","34":"7.774847","35":"7.774847","36":"7.734047","37":"7.713733","38":"7.713733","39":"7.713733","40":"7.713733","41":"7.713733","42":"cabins"},{"1":"11.970","2":"11.336152","3":"11.336152","4":"10.901682","5":"10.869225","6":"10.869225","7":"10.642325","8":"10.527488","9":"10.527488","10":"10.226235","11":"10.218468","12":"10.186718","13":"10.186718","14":"10.194808","15":"9.826258","16":"9.751530","17":"9.417177","18":"9.482162","19":"9.482162","20":"9.482162","21":"9.434228","22":"9.412228","23":"8.407177","24":"8.311553","25":"8.311683","26":"8.271483","27":"8.182008","28":"8.182008","29":"8.129758","30":"8.129758","31":"8.129758","32":"8.129758","33":"8.129758","34":"8.129758","35":"8.129758","36":"8.088958","37":"8.068645","38":"8.068645","39":"8.068645","40":"8.068645","41":"8.068645","42":"cabins"},{"1":"11.770","2":"10.307990","3":"10.307990","4":"10.081623","5":"10.030942","6":"10.030942","7":"9.589182","8":"9.451122","9":"9.451122","10":"9.034442","11":"9.026442","12":"9.018442","13":"9.018442","14":"8.974692","15":"8.785732","16":"8.790932","17":"8.616248","18":"8.619863","19":"8.619863","20":"8.619863","21":"8.546943","22":"8.546943","23":"7.931583","24":"7.860823","25":"7.857703","26":"7.844437","27":"7.762362","28":"7.762362","29":"7.711778","30":"7.711778","31":"7.711778","32":"7.711778","33":"7.711778","34":"7.711778","35":"7.711778","36":"7.670978","37":"7.650665","38":"7.650665","39":"7.650665","40":"7.650665","41":"7.650665","42":"cabins"},{"1":"11.380","2":"9.991900","3":"9.991900","4":"9.765533","5":"9.707051","6":"9.707051","7":"9.378091","8":"9.222131","9":"9.222131","10":"8.810651","11":"8.802651","12":"8.794651","13":"8.794651","14":"8.750901","15":"8.570298","16":"8.575498","17":"8.419215","18":"8.437630","19":"8.437630","20":"8.437630","21":"8.388443","22":"8.388443","23":"7.798423","24":"7.712018","25":"7.708898","26":"7.695632","27":"7.615777","28":"7.615777","29":"7.565193","30":"7.565193","31":"7.565193","32":"7.565193","33":"7.565193","34":"7.565193","35":"7.565193","36":"7.524393","37":"7.504080","38":"7.504080","39":"7.504080","40":"7.504080","41":"7.504080","42":"cabins"},{"1":"11.200","2":"11.400687","3":"11.400687","4":"10.980717","5":"10.948260","6":"10.948260","7":"10.559660","8":"10.444823","9":"10.444823","10":"10.222903","11":"10.215137","12":"10.183387","13":"10.183387","14":"10.190343","15":"9.920835","16":"9.866927","17":"9.601795","18":"9.651230","19":"9.651230","20":"9.651230","21":"9.618350","22":"9.567030","23":"8.556522","24":"8.433198","25":"8.433328","26":"8.393128","27":"8.303653","28":"8.303653","29":"8.251403","30":"8.251403","31":"8.251403","32":"8.251403","33":"8.251403","34":"8.251403","35":"8.251403","36":"8.210603","37":"8.190290","38":"8.190290","39":"8.190290","40":"8.190290","41":"8.190290","42":"cabins"},{"1":"10.940","2":"10.636715","3":"10.636715","4":"10.272995","5":"10.219872","6":"10.219872","7":"9.984822","8":"9.844685","9":"9.844685","10":"9.541732","11":"9.517585","12":"9.531085","13":"9.531085","14":"9.504295","15":"9.188909","16":"9.027935","17":"8.636976","18":"8.686251","19":"8.686251","20":"8.686251","21":"8.721118","22":"8.692098","23":"8.092795","24":"8.015758","25":"8.001438","26":"7.959038","27":"7.869563","28":"7.869563","29":"7.817313","30":"7.817313","31":"7.817313","32":"7.817313","33":"7.817313","34":"7.817313","35":"7.817313","36":"7.776513","37":"7.756200","38":"7.756200","39":"7.756200","40":"7.756200","41":"7.756200","42":"cabins"},{"1":"10.720","2":"10.260972","3":"10.260972","4":"9.959742","5":"9.896485","6":"9.896485","7":"9.640385","8":"9.503325","9":"9.503325","10":"9.320812","11":"9.312812","12":"9.301712","13":"9.301712","14":"9.273412","15":"9.101818","16":"9.002295","17":"8.773955","18":"8.799335","19":"8.799335","20":"8.799335","21":"8.839833","22":"8.788513","23":"8.213907","24":"8.107813","25":"8.093493","26":"8.051093","27":"7.961618","28":"7.961618","29":"7.909368","30":"7.909368","31":"7.909368","32":"7.909368","33":"7.909368","34":"7.909368","35":"7.909368","36":"7.868568","37":"7.848255","38":"7.848255","39":"7.848255","40":"7.848255","41":"7.848255","42":"cabins"},{"1":"10.560","2":"11.139312","3":"11.139312","4":"10.700342","5":"10.667885","6":"10.642685","7":"10.243385","8":"10.097532","9":"10.097532","10":"9.763075","11":"9.730928","12":"9.685678","13":"9.685678","14":"9.643845","15":"9.340813","16":"9.303813","17":"9.030855","18":"9.053875","19":"9.053875","20":"9.053875","21":"9.063662","22":"8.999717","23":"8.258437","24":"8.141702","25":"8.141832","26":"8.103932","27":"8.014457","28":"8.014457","29":"7.959907","30":"7.959907","31":"7.959907","32":"7.959907","33":"7.959907","34":"7.959907","35":"7.959907","36":"7.919107","37":"7.898793","38":"7.898793","39":"7.898793","40":"7.898793","41":"7.898793","42":"cabins"},{"1":"10.000","2":"10.012002","3":"10.012002","4":"9.811022","5":"9.752541","6":"9.752541","7":"9.364801","8":"9.240624","9":"9.240624","10":"8.936817","11":"8.928817","12":"8.928817","13":"8.928817","14":"8.851967","15":"8.627747","16":"8.571052","17":"8.297273","18":"8.362548","19":"8.362548","20":"8.362548","21":"8.388200","22":"8.377080","23":"7.904383","24":"7.823048","25":"7.808728","26":"7.786528","27":"7.708753","28":"7.708753","29":"7.658170","30":"7.658170","31":"7.658170","32":"7.658170","33":"7.658170","34":"7.658170","35":"7.658170","36":"7.617370","37":"7.597057","38":"7.597057","39":"7.597057","40":"7.597057","41":"7.597057","42":"cabins"},{"1":"9.750","2":"11.206407","3":"11.206407","4":"10.830477","5":"10.799200","6":"10.799200","7":"10.504905","8":"10.392428","9":"10.392428","10":"10.130718","11":"10.130718","12":"10.098968","13":"10.098968","14":"10.122448","15":"9.887777","16":"9.840693","17":"9.595907","18":"9.640452","19":"9.640452","20":"9.640452","21":"9.592177","22":"9.557077","23":"8.532030","24":"8.412837","25":"8.412967","26":"8.409167","27":"8.327292","28":"8.327292","29":"8.297142","30":"8.297142","31":"8.297142","32":"8.297142","33":"8.297142","34":"8.297142","35":"8.297142","36":"8.256342","37":"8.149678","38":"8.149678","39":"8.149678","40":"8.149678","41":"8.149678","42":"cabins"},{"1":"9.750","2":"11.248645","3":"11.248645","4":"10.873615","5":"10.842338","6":"10.817138","7":"10.520113","8":"10.407637","9":"10.407637","10":"10.145927","11":"10.145927","12":"10.114177","13":"10.114177","14":"10.158357","15":"9.955465","16":"9.934640","17":"9.731423","18":"9.775968","19":"9.775968","20":"9.775968","21":"9.720493","22":"9.680768","23":"8.558197","24":"8.443612","25":"8.443742","26":"8.439942","27":"8.368567","28":"8.368567","29":"8.338417","30":"8.338417","31":"8.338417","32":"8.338417","33":"8.338417","34":"8.338417","35":"8.338417","36":"8.297617","37":"8.190953","38":"8.190953","39":"8.190953","40":"8.190953","41":"8.190953","42":"cabins"},{"1":"9.750","2":"11.228412","3":"11.228412","4":"10.852482","5":"10.821205","6":"10.796005","7":"10.498980","8":"10.386503","9":"10.386503","10":"10.124793","11":"10.124793","12":"10.093043","13":"10.093043","14":"10.137223","15":"9.929832","16":"9.907007","17":"9.704790","18":"9.749335","19":"9.749335","20":"9.749335","21":"9.693860","22":"9.654135","23":"8.546838","24":"8.421295","25":"8.421425","26":"8.417625","27":"8.346250","28":"8.346250","29":"8.316100","30":"8.316100","31":"8.316100","32":"8.316100","33":"8.316100","34":"8.316100","35":"8.316100","36":"8.275300","37":"8.168637","38":"8.168637","39":"8.168637","40":"8.168637","41":"8.168637","42":"cabins"},{"1":"9.500","2":"10.648895","3":"10.648895","4":"10.200605","5":"10.146908","6":"10.146908","7":"9.685242","8":"9.565805","9":"9.565805","10":"9.210877","11":"9.203110","12":"9.164240","13":"9.164240","14":"9.169510","15":"8.952370","16":"8.936570","17":"8.869293","18":"8.866295","19":"8.866295","20":"8.866295","21":"8.798182","22":"8.807912","23":"8.017330","24":"7.890985","25":"7.891115","26":"7.871115","27":"7.804460","28":"7.804460","29":"7.753877","30":"7.753877","31":"7.753877","32":"7.753877","33":"7.753877","34":"7.753877","35":"7.753877","36":"7.713077","37":"7.692763","38":"7.692763","39":"7.692763","40":"7.692763","41":"7.692763","42":"cabins"},{"1":"9.350","2":"10.309515","3":"10.309515","4":"10.008285","5":"9.992362","6":"9.992362","7":"9.596987","8":"9.464677","9":"9.464677","10":"9.172032","11":"9.172032","12":"9.151032","13":"9.151032","14":"9.095263","15":"8.992645","16":"8.985920","17":"8.849105","18":"8.850652","19":"8.850652","20":"8.850652","21":"8.732737","22":"8.735987","23":"8.051952","24":"7.932467","25":"7.932597","26":"7.914897","27":"7.851022","28":"7.851022","29":"7.798138","30":"7.798138","31":"7.798138","32":"7.798138","33":"7.798138","34":"7.798138","35":"7.798138","36":"7.757338","37":"7.737025","38":"7.737025","39":"7.737025","40":"7.737025","41":"7.737025","42":"cabins"},{"1":"7.520","2":"7.563933","3":"7.563933","4":"7.454233","5":"7.454233","6":"7.454233","7":"7.262700","8":"7.262700","9":"7.262700","10":"7.158500","11":"7.158500","12":"7.158500","13":"7.158500","14":"7.144000","15":"7.114667","16":"7.114667","17":"7.086837","18":"7.086837","19":"7.086837","20":"7.086837","21":"7.017203","22":"7.017203","23":"6.574503","24":"6.246402","25":"6.231402","26":"6.178087","27":"6.064268","28":"6.064268","29":"5.779142","30":"5.779142","31":"5.779142","32":"5.746752","33":"5.746752","34":"5.748502","35":"5.748502","36":"5.680977","37":"5.640403","38":"5.640403","39":"5.640403","40":"5.640403","41":"5.640403","42":"cabins"},{"1":"6.600","2":"7.384670","3":"7.384670","4":"7.274970","5":"7.274970","6":"7.274970","7":"7.080920","8":"7.080920","9":"7.080920","10":"6.987210","11":"6.987210","12":"6.987210","13":"6.987210","14":"7.000030","15":"6.961047","16":"6.961047","17":"6.941137","18":"6.941137","19":"6.941137","20":"6.941137","21":"6.857737","22":"6.857737","23":"6.085198","24":"5.770167","25":"5.766697","26":"5.717193","27":"5.657280","28":"5.657280","29":"5.419418","30":"5.419418","31":"5.419418","32":"5.395668","33":"5.395668","34":"5.401068","35":"5.401068","36":"5.354202","37":"5.227278","38":"5.227278","39":"5.227278","40":"5.227278","41":"5.227278","42":"cabins"},{"1":"6.540","2":"7.543700","3":"7.543700","4":"7.434000","5":"7.434000","6":"7.434000","7":"7.160467","8":"7.160467","9":"7.160467","10":"7.031527","11":"7.031527","12":"7.031527","13":"7.031527","14":"7.044347","15":"7.005363","16":"7.005363","17":"6.973033","18":"6.973033","19":"6.973033","20":"6.973033","21":"6.901267","22":"6.901267","23":"6.238002","24":"5.955905","25":"5.947455","26":"5.869252","27":"5.783483","28":"5.783483","29":"5.462775","30":"5.462775","31":"5.462775","32":"5.439025","33":"5.439025","34":"5.444425","35":"5.444425","36":"5.399733","37":"5.359160","38":"5.359160","39":"5.359160","40":"5.359160","41":"5.359160","42":"cabins"},{"1":"6.070","2":"7.094598","3":"7.094598","4":"6.984898","5":"6.984898","6":"6.984898","7":"6.793365","8":"6.793365","9":"6.793365","10":"6.689165","11":"6.689165","12":"6.689165","13":"6.689165","14":"6.674665","15":"6.645332","16":"6.645332","17":"6.617502","18":"6.617502","19":"6.617502","20":"6.617502","21":"6.523335","22":"6.523335","23":"5.760487","24":"5.422135","25":"5.422135","26":"5.347843","27":"5.247855","28":"5.247855","29":"4.937335","30":"4.937335","31":"4.937335","32":"4.920585","33":"4.920585","34":"4.922335","35":"4.922335","36":"4.852810","37":"4.750302","38":"4.750302","39":"4.750302","40":"4.750302","41":"4.750302","42":"cabins"},{"1":"5.280","2":"7.206993","3":"7.206993","4":"7.097293","5":"7.097293","6":"7.097293","7":"6.823760","8":"6.823760","9":"6.823760","10":"6.719560","11":"6.719560","12":"6.719560","13":"6.719560","14":"6.705060","15":"6.663127","16":"6.663127","17":"6.630797","18":"6.630797","19":"6.630797","20":"6.630797","21":"6.545030","22":"6.545030","23":"5.791275","24":"5.464987","25":"5.423467","26":"5.380535","27":"5.296750","28":"5.296750","29":"4.918320","30":"4.918320","31":"4.918320","32":"4.913870","33":"4.913870","34":"4.918320","35":"4.918320","36":"4.826708","37":"4.666170","38":"4.666170","39":"4.642803","40":"4.642803","41":"4.642803","42":"cabins"},{"1":"5.260","2":"7.129643","3":"7.129643","4":"7.019943","5":"7.019943","6":"7.019943","7":"6.746410","8":"6.746410","9":"6.746410","10":"6.642210","11":"6.642210","12":"6.642210","13":"6.642210","14":"6.627710","15":"6.598377","16":"6.598377","17":"6.570547","18":"6.570547","19":"6.570547","20":"6.570547","21":"6.484780","22":"6.484780","23":"5.784125","24":"5.436112","25":"5.394592","26":"5.334960","27":"5.218695","28":"5.218695","29":"4.847065","30":"4.847065","31":"4.847065","32":"4.842615","33":"4.842615","34":"4.844365","35":"4.844365","36":"4.748920","37":"4.572022","38":"4.572022","39":"4.548655","40":"4.548655","41":"4.548655","42":"cabins"},{"1":"4.100","2":"6.306217","3":"6.306217","4":"6.196517","5":"6.196517","6":"6.196517","7":"5.922983","8":"5.922983","9":"5.922983","10":"5.818783","11":"5.818783","12":"5.818783","13":"5.818783","14":"5.804283","15":"5.774950","16":"5.774950","17":"5.742620","18":"5.742620","19":"5.742620","20":"5.742620","21":"5.648453","22":"5.648453","23":"4.509832","24":"4.359713","25":"4.322473","26":"4.253308","27":"4.209348","28":"4.209348","29":"3.847232","30":"3.847232","31":"3.847232","32":"3.837865","33":"3.837865","34":"3.859268","35":"3.859268","36":"3.711742","37":"3.333970","38":"3.333970","39":"3.310603","40":"3.310603","41":"3.310603","42":"cabins"},{"1":"4.000","2":"5.865320","3":"5.865320","4":"5.755620","5":"5.755620","6":"5.755620","7":"5.564087","8":"5.564087","9":"5.564087","10":"5.459887","11":"5.459887","12":"5.459887","13":"5.459887","14":"5.445387","15":"5.416053","16":"5.416053","17":"5.388223","18":"5.388223","19":"5.388223","20":"5.388223","21":"5.294057","22":"5.294057","23":"3.983627","24":"3.841508","25":"3.801508","26":"3.769343","27":"3.706423","28":"3.706423","29":"3.365422","30":"3.365422","31":"3.365422","32":"3.323472","33":"3.323472","34":"3.339862","35":"3.339862","36":"3.218188","37":"2.853592","38":"2.853592","39":"2.781148","40":"2.781148","41":"2.781148","42":"cabins"},{"1":"3.830","2":"5.895267","3":"5.895267","4":"5.785567","5":"5.785567","6":"5.785567","7":"5.594033","8":"5.594033","9":"5.594033","10":"5.489833","11":"5.489833","12":"5.489833","13":"5.489833","14":"5.475333","15":"5.446000","16":"5.446000","17":"5.418170","18":"5.418170","19":"5.418170","20":"5.418170","21":"5.324003","22":"5.324003","23":"4.020825","24":"3.869890","25":"3.829890","26":"3.803875","27":"3.724755","28":"3.724755","29":"3.416403","30":"3.416403","31":"3.416403","32":"3.375653","33":"3.375653","34":"3.387293","35":"3.387293","36":"3.256195","37":"2.920548","38":"2.920548","39":"2.855972","40":"2.855972","41":"2.855972","42":"cabins"},{"1":"3.550","2":"6.290265","3":"6.290265","4":"6.180565","5":"6.180565","6":"6.180565","7":"6.072540","8":"6.072540","9":"6.072540","10":"5.939920","11":"5.939920","12":"5.939920","13":"5.939920","14":"5.952740","15":"5.890950","16":"5.812480","17":"5.730150","18":"5.730150","19":"5.730150","20":"5.730150","21":"5.632625","22":"5.632625","23":"4.288448","24":"4.149800","25":"4.112560","26":"4.073995","27":"4.026935","28":"4.026935","29":"3.751258","30":"3.751258","31":"3.751258","32":"3.741558","33":"3.741558","34":"3.765178","35":"3.765178","36":"3.605047","37":"3.284730","38":"3.284730","39":"3.261363","40":"3.261363","41":"3.261363","42":"cabins"},{"1":"3.540","2":"7.173718","3":"7.173718","4":"7.064018","5":"7.064018","6":"7.038818","7":"6.857493","8":"6.857493","9":"6.857493","10":"6.821283","11":"6.821283","12":"6.821283","13":"6.821283","14":"6.834103","15":"6.809933","16":"6.743663","17":"6.721453","18":"6.721453","19":"6.721453","20":"6.721453","21":"6.612578","22":"6.612578","23":"5.603962","24":"5.287648","25":"5.282898","26":"5.264997","27":"5.168162","28":"5.168162","29":"4.937403","30":"4.937403","31":"4.937403","32":"4.921953","33":"4.921953","34":"4.924653","35":"4.924653","36":"4.842387","37":"4.702303","38":"4.702303","39":"4.689137","40":"4.689137","41":"4.689137","42":"cabins"},{"1":"3.420","2":"6.259482","3":"6.259482","4":"6.149782","5":"6.149782","6":"6.124582","7":"5.961282","8":"5.961282","9":"5.961282","10":"5.867572","11":"5.867572","12":"5.867572","13":"5.867572","14":"5.880392","15":"5.899542","16":"5.896492","17":"5.912082","18":"5.912082","19":"5.912082","20":"5.912082","21":"5.762007","22":"5.762007","23":"4.247517","24":"4.137102","25":"4.099862","26":"4.083497","27":"4.037637","28":"4.037637","29":"3.808905","30":"3.808905","31":"3.808905","32":"3.801088","33":"3.801088","34":"3.828308","35":"3.828308","36":"3.636197","37":"3.265360","38":"3.265360","39":"3.241993","40":"3.241993","41":"3.241993","42":"cabins"},{"1":"3.420","2":"6.232480","3":"6.232480","4":"6.122780","5":"6.122780","6":"6.097580","7":"5.916255","8":"5.916255","9":"5.916255","10":"5.801395","11":"5.801395","12":"5.801395","13":"5.801395","14":"5.814215","15":"5.793365","16":"5.790315","17":"5.768105","18":"5.768105","19":"5.768105","20":"5.768105","21":"5.646605","22":"5.646605","23":"4.200560","24":"4.090145","25":"4.052905","26":"4.036540","27":"3.989480","28":"3.989480","29":"3.758398","30":"3.758398","31":"3.758398","32":"3.751448","33":"3.751448","34":"3.773268","35":"3.773268","36":"3.581157","37":"3.232575","38":"3.232575","39":"3.209208","40":"3.209208","41":"3.209208","42":"cabins"},{"1":"2.450","2":"6.333888","3":"6.333888","4":"6.224188","5":"6.224188","6":"6.198988","7":"6.035688","8":"6.035688","9":"6.035688","10":"6.008978","11":"6.008978","12":"6.008978","13":"6.008978","14":"6.021798","15":"6.040948","16":"6.037898","17":"6.053488","18":"6.053488","19":"6.053488","20":"6.053488","21":"5.892913","22":"5.892913","23":"4.318393","24":"4.056867","25":"4.056867","26":"4.046652","27":"3.968537","28":"3.968537","29":"3.708318","30":"3.708318","31":"3.708318","32":"3.679552","33":"3.679552","34":"3.682252","35":"3.682252","36":"3.513815","37":"3.292573","38":"3.292573","39":"3.263607","40":"3.263607","41":"3.263607","42":"cabins"},{"1":"1.600","2":"5.389237","3":"5.389237","4":"5.279537","5":"5.279537","6":"5.279537","7":"5.085487","8":"5.085487","9":"5.085487","10":"5.056627","11":"5.056627","12":"5.056627","13":"5.056627","14":"5.069447","15":"5.030463","16":"5.030463","17":"5.010553","18":"5.010553","19":"5.010553","20":"5.010553","21":"4.901753","22":"4.901753","23":"3.125137","24":"3.014722","25":"3.014722","26":"3.004507","27":"2.939687","28":"2.939687","29":"2.628942","30":"2.628942","31":"2.628942","32":"2.579642","33":"2.579642","34":"2.581962","35":"2.581962","36":"2.458562","37":"2.152020","38":"2.152020","39":"2.046677","40":"2.043777","41":"2.043777","42":"cabins"},{"1":"1.480","2":"5.255477","3":"5.255477","4":"5.145777","5":"5.145777","6":"5.145777","7":"4.951727","8":"4.951727","9":"4.951727","10":"4.881767","11":"4.881767","12":"4.881767","13":"4.881767","14":"4.894587","15":"4.855603","16":"4.855603","17":"4.823273","18":"4.823273","19":"4.823273","20":"4.823273","21":"4.714473","22":"4.714473","23":"2.939653","24":"2.834688","25":"2.834688","26":"2.824473","27":"2.759653","28":"2.759653","29":"2.439925","30":"2.439925","31":"2.439925","32":"2.390625","33":"2.390625","34":"2.392945","35":"2.392945","36":"2.269545","37":"1.954603","38":"1.954603","39":"1.832610","40":"1.829710","41":"1.829710","42":"cabins"},{"1":"0.880","2":"5.352177","3":"5.352177","4":"5.242477","5":"5.242477","6":"5.242477","7":"4.968943","8":"4.968943","9":"4.968943","10":"4.864743","11":"4.864743","12":"4.864743","13":"4.864743","14":"4.850243","15":"4.820910","16":"4.820910","17":"4.793080","18":"4.793080","19":"4.793080","20":"4.793080","21":"4.690813","22":"4.690813","23":"3.083355","24":"2.965140","25":"2.965140","26":"2.939125","27":"2.858105","28":"2.858105","29":"2.483805","30":"2.483805","31":"2.483805","32":"2.434605","33":"2.434605","34":"2.443925","35":"2.443925","36":"2.302167","37":"1.944810","38":"1.944810","39":"1.848242","40":"1.848242","41":"1.848242","42":"cabins"},{"1":"0.450","2":"5.142263","3":"5.142263","4":"5.032563","5":"5.032563","6":"5.032563","7":"4.851463","8":"4.851463","9":"4.851463","10":"4.761263","11":"4.761263","12":"4.761263","13":"4.761263","14":"4.740563","15":"4.743543","16":"4.677273","17":"4.670113","18":"4.670113","19":"4.670113","20":"4.670113","21":"4.536388","22":"4.536388","23":"2.574052","24":"2.443403","25":"2.443403","26":"2.425588","27":"2.359568","28":"2.359568","29":"1.931975","30":"1.931975","31":"1.931975","32":"1.871675","33":"1.871675","34":"1.873995","35":"1.873995","36":"1.779750","37":"1.360343","38":"1.360343","39":"1.245025","40":"1.236325","41":"1.236325","42":"cabins"},{"1":"0.330","2":"4.851718","3":"4.851718","4":"4.742018","5":"4.742018","6":"4.742018","7":"4.541435","8":"4.541435","9":"4.541435","10":"4.418175","11":"4.418175","12":"4.418175","13":"4.418175","14":"4.430995","15":"4.392012","16":"4.392012","17":"4.359682","18":"4.359682","19":"4.359682","20":"4.359682","21":"4.257415","22":"4.257415","23":"2.328517","24":"2.231152","25":"2.231152","26":"2.220937","27":"2.156117","28":"2.156117","29":"1.820512","30":"1.820512","31":"1.820512","32":"1.769412","33":"1.769412","34":"1.771732","35":"1.771732","36":"1.658057","37":"1.184430","38":"1.184430","39":"1.064795","40":"1.056095","41":"1.056095","42":"cabins"},{"1":"71.430","2":"4.921953","3":"4.921953","4":"4.935340","5":"4.905900","6":"4.937567","7":"4.922568","8":"4.922568","9":"4.922568","10":"4.922568","11":"4.922568","12":"4.922568","13":"4.889090","14":"4.882680","15":"4.882680","16":"4.897680","17":"4.897680","18":"4.914380","19":"4.914380","20":"4.926880","21":"4.921695","22":"4.976795","23":"4.976795","24":"5.012778","25":"5.012778","26":"5.078678","27":"5.078678","28":"5.121112","29":"5.121112","30":"5.107202","31":"5.120577","32":"5.122077","33":"5.122077","34":"5.122077","35":"5.122077","36":"5.130877","37":"5.130877","38":"5.130877","39":"5.130877","40":"5.130877","41":"5.130877","42":"passenger_density"},{"1":"67.350","2":"3.513815","3":"3.513815","4":"3.482482","5":"3.467057","6":"3.541413","7":"3.637522","8":"3.637522","9":"3.637522","10":"3.637522","11":"3.637522","12":"3.637522","13":"3.679152","14":"3.679152","15":"3.679152","16":"3.679152","17":"3.679152","18":"3.679152","19":"3.679152","20":"3.679152","21":"3.673967","22":"3.673967","23":"3.676767","24":"3.683767","25":"3.683767","26":"3.722453","27":"3.722453","28":"3.722453","29":"3.722453","30":"3.722453","31":"3.735828","32":"3.735828","33":"3.735828","34":"3.735828","35":"3.735828","36":"3.734053","37":"3.734053","38":"3.734053","39":"3.734053","40":"3.734053","41":"3.734053","42":"passenger_density"},{"1":"60.000","2":"2.170087","3":"2.170087","4":"2.152020","5":"2.136595","6":"2.134720","7":"2.201312","8":"2.201312","9":"2.201312","10":"2.201312","11":"2.201312","12":"2.201312","13":"2.198312","14":"2.198312","15":"2.159312","16":"2.159312","17":"2.159312","18":"2.135512","19":"2.135512","20":"2.135512","21":"2.135512","22":"2.135512","23":"2.138312","24":"2.138312","25":"2.138312","26":"2.138312","27":"2.138312","28":"2.138312","29":"2.138312","30":"2.138312","31":"2.138312","32":"2.138312","33":"2.138312","34":"2.138312","35":"2.138312","36":"2.136037","37":"2.136037","38":"2.136037","39":"2.136037","40":"2.136037","41":"2.136037","42":"passenger_density"},{"1":"56.760","2":"1.988095","3":"1.988095","4":"1.970028","5":"1.954603","6":"1.933128","7":"2.005287","8":"2.005287","9":"2.005287","10":"2.005287","11":"2.005287","12":"2.005287","13":"2.019237","14":"2.019237","15":"1.965837","16":"1.965837","17":"1.965837","18":"1.942037","19":"1.942037","20":"1.942037","21":"1.942037","22":"1.942037","23":"1.944837","24":"1.944837","25":"1.944837","26":"1.944837","27":"1.944837","28":"1.944837","29":"1.944837","30":"1.944837","31":"1.944837","32":"1.944837","33":"1.944837","34":"1.944837","35":"1.944837","36":"1.968762","37":"1.968762","38":"1.968762","39":"1.968762","40":"1.968762","41":"1.968762","42":"passenger_density"},{"1":"50.620","2":"1.120737","3":"1.120737","4":"1.087570","5":"1.072145","6":"1.056095","7":"1.073720","8":"1.073720","9":"1.073720","10":"1.073720","11":"1.073720","12":"1.073720","13":"1.115820","14":"1.118720","15":"1.074020","16":"1.074020","17":"1.074020","18":"1.055220","19":"1.055220","20":"1.055220","21":"1.055220","22":"1.055220","23":"1.055220","24":"1.055220","25":"1.055220","26":"1.055220","27":"1.055220","28":"1.055220","29":"1.055220","30":"1.055220","31":"1.055220","32":"1.055220","33":"1.055220","34":"1.055220","35":"1.055220","36":"1.081420","37":"1.081420","38":"1.081420","39":"1.081420","40":"1.081420","41":"1.081420","42":"passenger_density"},{"1":"45.190","2":"5.768022","3":"5.768022","4":"5.809542","5":"5.749202","6":"5.734142","7":"5.770167","8":"5.770167","9":"5.770167","10":"5.770167","11":"5.770167","12":"5.770167","13":"5.778592","14":"5.833332","15":"5.872852","16":"5.905365","17":"5.903515","18":"5.926075","19":"5.926075","20":"5.943825","21":"5.930640","22":"6.069312","23":"6.073172","24":"6.102802","25":"6.102802","26":"6.189520","27":"6.185320","28":"6.245120","29":"6.245120","30":"6.242197","31":"6.250072","32":"6.251772","33":"6.251772","34":"6.251772","35":"6.245922","36":"6.224822","37":"6.224822","38":"6.224822","39":"6.224822","40":"6.224822","41":"6.224822","42":"passenger_density"},{"1":"44.780","2":"9.687700","3":"9.687700","4":"9.687700","5":"9.687700","6":"9.554183","7":"9.583678","8":"9.640452","9":"9.640452","10":"9.640452","11":"9.624362","12":"9.624362","13":"9.642622","14":"9.672662","15":"9.576768","16":"9.563528","17":"9.556362","18":"9.543962","19":"9.621237","20":"9.574370","21":"9.587348","22":"9.263547","23":"9.259147","24":"9.265097","25":"9.265097","26":"9.230063","27":"9.230063","28":"9.181197","29":"9.203757","30":"9.146935","31":"9.058210","32":"9.058210","33":"9.058210","34":"9.058210","35":"9.058210","36":"9.058210","37":"9.058210","38":"9.058210","39":"9.058210","40":"9.058210","41":"9.058210","42":"passenger_density"},{"1":"44.780","2":"9.749883","3":"9.749883","4":"9.749883","5":"9.749883","6":"9.616367","7":"9.723695","8":"9.775968","9":"9.775968","10":"9.775968","11":"9.759878","12":"9.759878","13":"9.775138","14":"9.784753","15":"9.679527","16":"9.666287","17":"9.659120","18":"9.646720","19":"9.723995","20":"9.677128","21":"9.675307","22":"9.302572","23":"9.298172","24":"9.306955","25":"9.306955","26":"9.271922","27":"9.271922","28":"9.223055","29":"9.245615","30":"9.188793","31":"9.088668","32":"9.088668","33":"9.088668","34":"9.088668","35":"9.088668","36":"9.088668","37":"9.088668","38":"9.088668","39":"9.088668","40":"9.088668","41":"9.088668","42":"passenger_density"},{"1":"44.780","2":"9.786783","3":"9.786783","4":"9.786783","5":"9.786783","6":"9.653267","7":"9.692562","8":"9.749335","9":"9.749335","10":"9.749335","11":"9.733245","12":"9.733245","13":"9.748505","14":"9.762620","15":"9.664727","16":"9.651487","17":"9.644320","18":"9.631920","19":"9.709195","20":"9.662328","21":"9.660507","22":"9.334305","23":"9.329905","24":"9.331155","25":"9.331155","26":"9.296122","27":"9.296122","28":"9.247255","29":"9.269815","30":"9.212993","31":"9.112868","32":"9.112868","33":"9.112868","34":"9.112868","35":"9.112868","36":"9.112868","37":"9.112868","38":"9.112868","39":"9.112868","40":"9.112868","41":"9.112868","42":"passenger_density"},{"1":"44.260","2":"3.673837","3":"3.673837","4":"3.645170","5":"3.629745","6":"3.757632","7":"3.828308","8":"3.828308","9":"3.828308","10":"3.828308","11":"3.828308","12":"3.828308","13":"3.828660","14":"3.828660","15":"3.828660","16":"3.828660","17":"3.828660","18":"3.828660","19":"3.828660","20":"3.828660","21":"3.828660","22":"3.828193","23":"3.830993","24":"3.830993","25":"3.830993","26":"3.830993","27":"3.830993","28":"3.830993","29":"3.830993","30":"3.830993","31":"3.830993","32":"3.830993","33":"3.830993","34":"3.830993","35":"3.830993","36":"3.835743","37":"3.835743","38":"3.835743","39":"3.835743","40":"3.835743","41":"3.835743","42":"passenger_density"},{"1":"44.260","2":"3.621197","3":"3.621197","4":"3.592530","5":"3.577105","6":"3.702592","7":"3.773268","8":"3.773268","9":"3.773268","10":"3.773268","11":"3.773268","12":"3.773268","13":"3.769453","14":"3.769453","15":"3.769453","16":"3.769453","17":"3.769453","18":"3.769453","19":"3.769453","20":"3.769453","21":"3.769453","22":"3.770487","23":"3.773287","24":"3.773287","25":"3.773287","26":"3.773287","27":"3.773287","28":"3.773287","29":"3.773287","30":"3.773287","31":"3.773287","32":"3.773287","33":"3.773287","34":"3.773287","35":"3.773287","36":"3.779812","37":"3.779812","38":"3.779812","39":"3.779812","40":"3.779812","41":"3.779812","42":"passenger_density"},{"1":"42.640","2":"3.642432","3":"3.642432","4":"3.610485","5":"3.595060","6":"3.700842","7":"3.747698","8":"3.747698","9":"3.747698","10":"3.747698","11":"3.747698","12":"3.747698","13":"3.741558","14":"3.741558","15":"3.741558","16":"3.741558","17":"3.741558","18":"3.741558","19":"3.741558","20":"3.741558","21":"3.741558","22":"3.750842","23":"3.759142","24":"3.759142","25":"3.759142","26":"3.760642","27":"3.760642","28":"3.760642","29":"3.760642","30":"3.760642","31":"3.760642","32":"3.760642","33":"3.760642","34":"3.760642","35":"3.760642","36":"3.765767","37":"3.765767","38":"3.765767","39":"3.765767","40":"3.765767","41":"3.765767","42":"passenger_density"},{"1":"41.290","2":"8.837007","3":"8.837007","4":"8.837007","5":"8.837007","6":"8.681372","7":"8.684153","8":"8.724587","9":"8.724587","10":"8.724587","11":"8.724587","12":"8.724587","13":"8.735987","14":"8.735987","15":"8.734540","16":"8.731950","17":"8.731050","18":"8.736050","19":"8.932372","20":"8.839625","21":"8.973483","22":"8.492163","23":"8.492163","24":"8.536867","25":"8.536867","26":"8.521233","27":"8.521233","28":"8.512780","29":"8.518980","30":"8.467627","31":"8.371793","32":"8.371793","33":"8.371793","34":"8.371793","35":"8.371793","36":"8.380360","37":"8.380360","38":"8.380360","39":"8.380360","40":"8.380360","41":"8.380360","42":"passenger_density"},{"1":"40.650","2":"5.781600","3":"5.781600","4":"5.823120","5":"5.778080","6":"5.771720","7":"5.807645","8":"5.807645","9":"5.807645","10":"5.807645","11":"5.807645","12":"5.807645","13":"5.909375","14":"5.948235","15":"5.947455","16":"5.964968","17":"5.964968","18":"5.986748","19":"5.986748","20":"6.006648","21":"5.993463","22":"6.038272","23":"6.039472","24":"6.082735","25":"6.082735","26":"6.185395","27":"6.185395","28":"6.240663","29":"6.240663","30":"6.240340","31":"6.248215","32":"6.248195","33":"6.248195","34":"6.248195","35":"6.236745","36":"6.215645","37":"6.215645","38":"6.216078","39":"6.216078","40":"6.216078","41":"6.216078","42":"passenger_density"},{"1":"40.500","2":"9.432435","3":"9.432435","4":"9.432435","5":"9.432435","6":"9.257335","7":"9.316128","8":"9.358802","9":"9.358802","10":"9.358802","11":"9.365322","12":"9.365322","13":"9.394882","14":"9.412142","15":"9.323298","16":"9.303813","17":"9.303813","18":"9.300403","19":"9.377087","20":"9.326087","21":"9.361215","22":"9.011280","23":"9.007680","24":"8.990089","25":"8.990089","26":"8.980902","27":"8.980902","28":"8.942336","29":"8.973136","30":"8.882006","31":"8.777056","32":"8.777056","33":"8.777056","34":"8.773170","35":"8.773170","36":"8.778370","37":"8.778370","38":"8.778370","39":"8.778370","40":"8.778370","41":"8.778370","42":"passenger_density"},{"1":"40.180","2":"10.369998","3":"10.369998","4":"10.369998","5":"10.369998","6":"10.219492","7":"10.199192","8":"10.238032","9":"10.238032","10":"10.238032","11":"10.241032","12":"10.241032","13":"10.256292","14":"10.253392","15":"10.195807","16":"10.183387","17":"10.183387","18":"10.168963","19":"10.159005","20":"10.102038","21":"10.115017","22":"9.843303","23":"9.822203","24":"9.812472","25":"9.812472","26":"9.797486","27":"9.797486","28":"9.778352","29":"9.790052","30":"9.759321","31":"9.723321","32":"9.723321","33":"9.723321","34":"9.719435","35":"9.719435","36":"9.691635","37":"9.691635","38":"9.691635","39":"9.691635","40":"9.691635","41":"9.691635","42":"passenger_density"},{"1":"39.470","2":"11.548267","3":"11.548267","4":"11.548267","5":"11.548267","6":"11.469517","7":"11.444217","8":"11.462197","9":"11.462197","10":"11.462197","11":"11.507663","12":"11.507663","13":"11.521623","14":"11.421037","15":"11.405512","16":"11.404332","17":"11.383732","18":"11.376582","19":"11.620157","20":"11.620157","21":"11.607107","22":"11.538502","23":"11.659102","24":"11.666035","25":"11.666035","26":"11.675035","27":"11.675035","28":"11.433215","29":"11.433215","30":"11.446990","31":"11.452490","32":"11.452490","33":"11.505490","34":"11.505490","35":"11.423490","36":"11.172353","37":"11.172353","38":"11.172353","39":"11.172353","40":"11.172353","41":"11.172353","42":"passenger_density"},{"1":"39.270","2":"8.804317","3":"8.804317","4":"8.804317","5":"8.804317","6":"8.684167","7":"8.674617","8":"8.693037","9":"8.693037","10":"8.693037","11":"8.687397","12":"8.687397","13":"8.685897","14":"8.685897","15":"8.685557","16":"8.685557","17":"8.685557","18":"8.709497","19":"8.798182","20":"8.674442","21":"8.793800","22":"8.351825","23":"8.351825","24":"8.395808","25":"8.395808","26":"8.411518","27":"8.411518","28":"8.411298","29":"8.427298","30":"8.438458","31":"8.374378","32":"8.374378","33":"8.374378","34":"8.374378","35":"8.374378","36":"8.374378","37":"8.374378","38":"8.374378","39":"8.374378","40":"8.374378","41":"8.374378","42":"passenger_density"},{"1":"38.850","2":"10.477345","3":"10.477345","4":"10.477345","5":"10.477345","6":"10.326038","7":"10.302738","8":"10.341578","9":"10.341578","10":"10.341578","11":"10.352345","12":"10.352345","13":"10.367605","14":"10.359855","15":"10.302550","16":"10.297310","17":"10.297310","18":"10.290160","19":"10.280202","20":"10.226235","21":"10.251680","22":"9.969367","23":"9.922267","24":"9.912536","25":"9.912536","26":"9.850299","27":"9.850299","28":"9.831166","29":"9.836366","30":"9.799084","31":"9.769284","32":"9.769284","33":"9.769284","34":"9.765398","35":"9.765398","36":"9.737598","37":"9.737598","38":"9.737598","39":"9.737598","40":"9.737598","41":"9.737598","42":"passenger_density"},{"1":"38.600","2":"10.971678","3":"10.971678","4":"10.971678","5":"10.971678","6":"10.892718","7":"10.874218","8":"10.892198","9":"10.892198","10":"10.892198","11":"10.905998","12":"10.905998","13":"10.946688","14":"10.876468","15":"10.891460","16":"10.890280","17":"10.870880","18":"10.857130","19":"10.840638","20":"10.840638","21":"10.833458","22":"10.644628","23":"10.649945","24":"10.649564","25":"10.649564","26":"10.658564","27":"10.658564","28":"10.495177","29":"10.495177","30":"10.508952","31":"10.480452","32":"10.480452","33":"10.533452","34":"10.529567","35":"10.521367","36":"10.382153","37":"10.382153","38":"10.382153","39":"10.382153","40":"10.382153","41":"10.382153","42":"passenger_density"},{"1":"37.780","2":"9.529592","3":"9.529592","4":"9.529592","5":"9.529592","6":"9.345492","7":"9.330952","8":"9.373625","9":"9.373625","10":"9.373625","11":"9.373625","12":"9.373625","13":"9.407585","14":"9.416812","15":"9.332275","16":"9.312790","17":"9.312790","18":"9.299477","19":"9.344885","20":"9.314758","21":"9.380203","22":"9.101818","23":"9.098218","24":"9.081194","25":"9.081194","26":"9.068107","27":"9.068107","28":"9.029541","29":"9.053141","30":"8.962051","31":"8.853251","32":"8.853251","33":"8.853251","34":"8.849365","35":"8.849365","36":"8.849365","37":"8.849365","38":"8.849365","39":"8.849365","40":"8.849365","41":"8.849365","42":"passenger_density"},{"1":"37.420","2":"11.877149","3":"11.877149","4":"11.877149","5":"11.877149","6":"11.874889","7":"11.874889","8":"11.874889","9":"11.874889","10":"11.874889","11":"11.942689","12":"11.942689","13":"11.965999","14":"11.909879","15":"11.908054","16":"11.908054","17":"11.897854","18":"11.891254","19":"11.901946","20":"11.901946","21":"11.901946","22":"11.910946","23":"11.932523","24":"11.924216","25":"11.924216","26":"11.915800","27":"11.915800","28":"11.691390","29":"11.691390","30":"11.707190","31":"11.712690","32":"11.712690","33":"11.765690","34":"11.762340","35":"11.720640","36":"11.401062","37":"11.401062","38":"11.401062","39":"11.401062","40":"11.401062","41":"11.401062","42":"passenger_density"},{"1":"36.810","2":"10.646057","3":"10.646057","4":"10.646057","5":"10.646057","6":"10.603197","7":"10.645930","8":"10.659597","9":"10.659597","10":"10.659597","11":"10.673397","12":"10.673397","13":"10.704537","14":"10.635327","15":"10.657335","16":"10.665335","17":"10.648735","18":"10.643635","19":"10.726402","20":"10.726402","21":"10.719222","22":"10.450578","23":"10.577645","24":"10.582714","25":"10.582714","26":"10.558181","27":"10.558181","28":"10.459527","29":"10.459527","30":"10.434612","31":"10.391412","32":"10.391412","33":"10.391412","34":"10.387527","35":"10.387527","36":"10.200513","37":"10.200513","38":"10.200513","39":"10.200513","40":"10.200513","41":"10.200513","42":"passenger_density"},{"1":"36.810","2":"10.911918","3":"10.911918","4":"10.911918","5":"10.911918","6":"10.869058","7":"10.918592","8":"10.936572","9":"10.936572","10":"10.936572","11":"10.950372","12":"10.950372","13":"11.054462","14":"11.014752","15":"11.036760","16":"11.043580","17":"11.026980","18":"11.015280","19":"11.078788","20":"11.078788","21":"11.071608","22":"10.895590","23":"10.997457","24":"10.988076","25":"10.988076","26":"10.963542","27":"10.963542","28":"10.864889","29":"10.864889","30":"10.855564","31":"10.825564","32":"10.825564","33":"10.825564","34":"10.821678","35":"10.813478","36":"10.522865","37":"10.522865","38":"10.522865","39":"10.522865","40":"10.522865","41":"10.522865","42":"passenger_density"},{"1":"36.020","2":"10.181058","3":"10.181058","4":"10.181058","5":"10.181058","6":"10.000791","7":"9.987611","8":"10.026451","9":"10.026451","10":"10.026451","11":"10.013071","12":"10.013071","13":"10.031851","14":"10.028818","15":"9.955748","16":"9.940493","17":"9.940493","18":"9.916070","19":"9.949145","20":"9.867958","21":"9.893403","22":"9.539073","23":"9.517973","24":"9.515482","25":"9.515482","26":"9.504295","27":"9.504295","28":"9.485162","29":"9.508762","30":"9.429867","31":"9.390767","32":"9.390767","33":"9.390767","34":"9.386881","35":"9.386881","36":"9.359081","37":"9.359081","38":"9.359081","39":"9.359081","40":"9.359081","41":"9.359081","42":"passenger_density"},{"1":"35.980","2":"5.043435","3":"5.043435","4":"5.081868","5":"5.057478","6":"5.071523","7":"5.119507","8":"5.119507","9":"5.119507","10":"5.119507","11":"5.119507","12":"5.119507","13":"5.174797","14":"5.190077","15":"5.190077","16":"5.207590","17":"5.203090","18":"5.203090","19":"5.211565","20":"5.216565","21":"5.203380","22":"5.208630","23":"5.208630","24":"5.215630","25":"5.215630","26":"5.296750","27":"5.296750","28":"5.344783","29":"5.344783","30":"5.344783","31":"5.352658","32":"5.354158","33":"5.354158","34":"5.337798","35":"5.331948","36":"5.289198","37":"5.289198","38":"5.289198","39":"5.289198","40":"5.289198","41":"5.289198","42":"passenger_density"},{"1":"35.190","2":"3.676632","3":"3.676632","4":"3.644685","5":"3.629260","6":"3.729267","7":"3.796223","8":"3.796223","9":"3.796223","10":"3.796223","11":"3.796223","12":"3.796223","13":"3.820365","14":"3.806115","15":"3.798915","16":"3.798915","17":"3.798915","18":"3.798915","19":"3.798915","20":"3.798915","21":"3.798915","22":"3.807565","23":"3.815865","24":"3.815865","25":"3.815865","26":"3.847232","27":"3.847232","28":"3.847232","29":"3.847232","30":"3.847232","31":"3.847232","32":"3.847232","33":"3.847232","34":"3.847232","35":"3.847232","36":"3.874682","37":"3.874682","38":"3.874682","39":"3.874682","40":"3.874682","41":"3.874682","42":"passenger_density"},{"1":"35.140","2":"10.388213","3":"10.388213","4":"10.388213","5":"10.388213","6":"10.285497","7":"10.260557","8":"10.299397","9":"10.299397","10":"10.299397","11":"10.323963","12":"10.323963","13":"10.345103","14":"10.293623","15":"10.252307","16":"10.259127","17":"10.259127","18":"10.249863","19":"10.261905","20":"10.235485","21":"10.247530","22":"9.947837","23":"9.926737","24":"9.929446","25":"9.929446","26":"9.876562","27":"9.876562","28":"9.857429","29":"9.874529","30":"9.820159","31":"9.781059","32":"9.781059","33":"9.781059","34":"9.777173","35":"9.777173","36":"9.752573","37":"9.752573","38":"9.752573","39":"9.752573","40":"9.752573","41":"9.752573","42":"passenger_density"},{"1":"33.720","2":"12.567611","3":"12.567611","4":"12.567611","5":"12.567611","6":"12.553336","7":"12.553336","8":"12.563236","9":"12.563236","10":"12.563236","11":"12.619311","12":"12.619311","13":"12.680616","14":"12.677836","15":"12.729236","16":"12.784236","17":"12.784236","18":"12.783386","19":"12.814911","20":"12.814911","21":"12.814911","22":"12.817411","23":"12.797811","24":"12.798704","25":"12.798704","26":"12.708138","27":"12.708138","28":"12.450731","29":"12.450731","30":"12.450731","31":"12.505231","32":"12.505231","33":"12.558231","34":"12.558231","35":"12.529643","36":"12.295825","37":"12.295825","38":"12.295825","39":"12.295825","40":"12.295825","41":"12.295825","42":"passenger_density"},{"1":"32.560","2":"4.920905","3":"4.920905","4":"4.940438","5":"4.900623","6":"4.922562","7":"4.969570","8":"4.969570","9":"4.969570","10":"4.969570","11":"4.969570","12":"4.969570","13":"5.070100","14":"5.085380","15":"5.085380","16":"5.102893","17":"5.098393","18":"5.098393","19":"5.106868","20":"5.111868","21":"5.098683","22":"5.103933","23":"5.103933","24":"5.103933","25":"5.103933","26":"5.185053","27":"5.185053","28":"5.210820","29":"5.210820","30":"5.210820","31":"5.218695","32":"5.220195","33":"5.220195","34":"5.203835","35":"5.197985","36":"5.155235","37":"5.155235","38":"5.155235","39":"5.155235","40":"5.155235","41":"5.155235","42":"passenger_density"},{"1":"32.230","2":"9.248798","3":"9.248798","4":"9.248798","5":"9.248798","6":"9.087313","7":"9.095950","8":"9.134383","9":"9.134383","10":"9.134383","11":"9.119283","12":"9.119283","13":"9.147970","14":"9.147112","15":"9.118368","16":"9.112828","17":"9.112828","18":"9.101548","19":"9.214355","20":"9.150988","21":"9.191617","22":"8.645615","23":"8.609515","24":"8.596738","25":"8.596738","26":"8.529805","27":"8.529805","28":"8.507505","29":"8.544932","30":"8.445557","31":"8.297273","32":"8.297273","33":"8.297273","34":"8.297273","35":"8.297273","36":"8.305840","37":"8.305840","38":"8.305840","39":"8.305840","40":"8.305840","41":"8.305840","42":"passenger_density"},{"1":"31.730","2":"1.976952","3":"1.976952","4":"1.927685","5":"1.912260","6":"1.923277","7":"1.917202","8":"1.917202","9":"1.917202","10":"1.917202","11":"1.917202","12":"1.917202","13":"1.914642","14":"1.914642","15":"1.867042","16":"1.867042","17":"1.867042","18":"1.848242","19":"1.848242","20":"1.848242","21":"1.848242","22":"1.848242","23":"1.848242","24":"1.848242","25":"1.848242","26":"1.848242","27":"1.848242","28":"1.848242","29":"1.848242","30":"1.848242","31":"1.848242","32":"1.848242","33":"1.848242","34":"1.848242","35":"1.848242","36":"1.874442","37":"1.874442","38":"1.874442","39":"1.874442","40":"1.874442","41":"1.874442","42":"passenger_density"},{"1":"30.940","2":"9.716040","3":"9.716040","4":"9.716040","5":"9.716040","6":"9.559807","7":"9.584740","8":"9.580300","9":"9.580300","10":"9.580300","11":"9.580300","12":"9.580300","13":"9.597480","14":"9.566590","15":"9.543880","16":"9.551880","17":"9.551880","18":"9.546470","19":"9.612710","20":"9.555270","21":"9.561490","22":"9.229037","23":"9.258103","24":"9.274372","25":"9.274372","26":"9.256809","27":"9.256809","28":"9.216556","29":"9.227222","30":"9.108677","31":"9.030327","32":"9.030327","33":"9.030327","34":"9.026442","35":"9.026442","36":"8.848388","37":"8.848388","38":"8.848388","39":"8.848388","40":"8.848388","41":"8.848388","42":"passenger_density"},{"1":"29.790","2":"12.143878","3":"12.143878","4":"12.143878","5":"12.143878","6":"12.132318","7":"12.132318","8":"12.132318","9":"12.132318","10":"12.132318","11":"12.192293","12":"12.192293","13":"12.210003","14":"12.130466","15":"12.130466","16":"12.130466","17":"12.125066","18":"12.118466","19":"12.105158","20":"12.105158","21":"12.105158","22":"12.111658","23":"12.092058","24":"12.080391","25":"12.080391","26":"12.084391","27":"12.084391","28":"11.904482","29":"11.904482","30":"11.914282","31":"11.919782","32":"11.919782","33":"11.972782","34":"11.972782","35":"11.940582","36":"11.650103","37":"11.650103","38":"11.650103","39":"11.650103","40":"11.650103","41":"11.650103","42":"passenger_density"},{"1":"27.940","2":"5.173020","3":"5.173020","4":"5.172653","5":"5.114638","6":"5.132198","7":"5.223557","8":"5.223557","9":"5.223557","10":"5.223557","11":"5.223557","12":"5.223557","13":"5.289220","14":"5.285450","15":"5.275645","16":"5.283865","17":"5.279365","18":"5.291685","19":"5.291685","20":"5.296685","21":"5.283500","22":"5.300550","23":"5.304850","24":"5.320683","25":"5.320683","26":"5.360937","27":"5.360937","28":"5.395478","29":"5.395478","30":"5.389478","31":"5.389478","32":"5.392478","33":"5.392478","34":"5.376118","35":"5.376118","36":"5.347843","37":"5.347843","38":"5.347843","39":"5.347843","40":"5.347843","41":"5.347843","42":"passenger_density"},{"1":"27.930","2":"6.168342","3":"6.168342","4":"6.202342","5":"6.184842","6":"6.184842","7":"6.241967","8":"6.241967","9":"6.241967","10":"6.241967","11":"6.241967","12":"6.241967","13":"6.377720","14":"6.395640","15":"6.408320","16":"6.425833","17":"6.425833","18":"6.429753","19":"6.429753","20":"6.429753","21":"6.429753","22":"6.484828","23":"6.484828","24":"6.497645","25":"6.497645","26":"6.545468","27":"6.545468","28":"6.610035","29":"6.610035","30":"6.591095","31":"6.597770","32":"6.597770","33":"6.597770","34":"6.597770","35":"6.582103","36":"6.574503","37":"6.574503","38":"6.577003","39":"6.577003","40":"6.577003","41":"6.577003","42":"passenger_density"},{"1":"25.660","2":"9.591566","3":"9.591566","4":"9.591566","5":"9.591566","6":"9.460633","7":"9.485566","8":"9.481126","9":"9.481126","10":"9.481126","11":"9.481126","12":"9.481126","13":"9.498306","14":"9.467416","15":"9.444706","16":"9.452706","17":"9.452706","18":"9.450746","19":"9.516986","20":"9.459546","21":"9.465766","22":"9.167080","23":"9.196146","24":"9.212415","25":"9.212415","26":"9.199572","27":"9.199572","28":"9.159319","29":"9.169985","30":"9.046940","31":"8.976590","32":"8.976590","33":"8.976590","34":"8.972705","35":"8.972705","36":"8.794651","37":"8.794651","38":"8.794651","39":"8.794651","40":"8.794651","41":"8.794651","42":"passenger_density"},{"1":"24.780","2":"1.334592","3":"1.334592","4":"1.301425","5":"1.286000","6":"1.269950","7":"1.268775","8":"1.268775","9":"1.268775","10":"1.268775","11":"1.268775","12":"1.268775","13":"1.289725","14":"1.292625","15":"1.255125","16":"1.255125","17":"1.255125","18":"1.236325","19":"1.236325","20":"1.236325","21":"1.236325","22":"1.236325","23":"1.236325","24":"1.236325","25":"1.236325","26":"1.236325","27":"1.236325","28":"1.236325","29":"1.236325","30":"1.236325","31":"1.236325","32":"1.236325","33":"1.236325","34":"1.236325","35":"1.236325","36":"1.236325","37":"1.236325","38":"1.236325","39":"1.236325","40":"1.236325","41":"1.236325","42":"passenger_density"},{"1":"23.870","2":"3.247813","3":"3.247813","4":"3.215867","5":"3.200442","6":"3.271722","7":"3.352853","8":"3.352853","9":"3.352853","10":"3.352853","11":"3.352853","12":"3.352853","13":"3.311430","14":"3.304280","15":"3.297080","16":"3.297080","17":"3.297080","18":"3.297080","19":"3.297080","20":"3.297080","21":"3.297080","22":"3.305330","23":"3.313630","24":"3.313630","25":"3.313630","26":"3.344997","27":"3.344997","28":"3.344997","29":"3.344997","30":"3.344997","31":"3.344997","32":"3.344997","33":"3.344997","34":"3.344997","35":"3.344997","36":"3.365422","37":"3.365422","38":"3.365422","39":"3.365422","40":"3.365422","41":"3.365422","42":"passenger_density"},{"1":"17.700","2":"3.356113","3":"3.356113","4":"3.324167","5":"3.299502","6":"3.353382","7":"3.439620","8":"3.439620","9":"3.439620","10":"3.439620","11":"3.439620","12":"3.439620","13":"3.413847","14":"3.406697","15":"3.399497","16":"3.399497","17":"3.399497","18":"3.399497","19":"3.399497","20":"3.399497","21":"3.389997","22":"3.386297","23":"3.390597","24":"3.390597","25":"3.390597","26":"3.421963","27":"3.421963","28":"3.435338","29":"3.435338","30":"3.435338","31":"3.435338","32":"3.435338","33":"3.435338","34":"3.418978","35":"3.418978","36":"3.416403","37":"3.416403","38":"3.416403","39":"3.416403","40":"3.416403","41":"3.416403","42":"passenger_density"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Next, lets plot those ice curves! This should be pretty simple with a for loop, facet wrap, and <code>aes_string</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>plot_ice &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb32-2"><a href="#cb32-2"></a>  p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df)</span>
<span id="cb32-3"><a href="#cb32-3"></a>  ice_cols &lt;-<span class="st"> </span><span class="kw">names</span>(df)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(df))]</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a>  plot_single_curve_set &lt;-<span class="st"> </span><span class="cf">function</span>(col) {</span>
<span id="cb32-6"><a href="#cb32-6"></a>    <span class="co"># superassignment modify out of scope variable</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>    p &lt;&lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes_string</span>(<span class="dt">x =</span> <span class="st">&quot;value&quot;</span>, <span class="dt">y =</span> col), <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.6</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="st">      </span><span class="kw">facet_wrap</span>(variable <span class="op">~</span><span class="st"> </span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</span>
<span id="cb32-9"><a href="#cb32-9"></a>  }</span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a>  <span class="co"># iterate through columns</span></span>
<span id="cb32-12"><a href="#cb32-12"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(ice_cols)) {</span>
<span id="cb32-13"><a href="#cb32-13"></a>    <span class="kw">plot_single_curve_set</span>(ice_cols[i])</span>
<span id="cb32-14"><a href="#cb32-14"></a>  }</span>
<span id="cb32-15"><a href="#cb32-15"></a></span>
<span id="cb32-16"><a href="#cb32-16"></a>  <span class="kw">return</span>(p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Prediction&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Value&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_fivethirtyeight</span>())</span>
<span id="cb32-17"><a href="#cb32-17"></a>}</span>
<span id="cb32-18"><a href="#cb32-18"></a></span>
<span id="cb32-19"><a href="#cb32-19"></a><span class="kw">plot_ice</span>(rf_ice)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="iml_files/figure-html/unnamed-chunk-27-1.svg" alt="Random Forest ICE curves" width="960" />
<p class="caption">
Random Forest ICE curves
</p>
</div>
<p>So, what to these plots tell us? Since there are so many lines, it is hard to glean any truly useful numeric solutions from this. We can tell two useful things from this. The first thing to look at is the range of the peaks of the highest curves to the troughs of the lowest curves. This gives us an idea of the strength of the variable. The next thing to look out for is big splits in the curves, such as those seen in cabins and tonnage. These are indicative of heterogenous effects (interactions between correlated variables), and also show us why PDP fails. If we average these variables with large spits, we are hiding that effect, and cancelling out a lot of it.For example, the cabins curve has a large symmetric split. When we average these curves, we will end up with a pretty flat curve with a very small range. This is why when we have these complicated, correlated, effects, partial dependence (or any tool which relies on averages of predictions of correlated variables) fails. It is also important to look back to the correlation plot and see the lack of correlation in passengers and passenger density. This is evident in the ICE curves as well! We can now look at the variable importance using ICE, and see whether it is improved or not.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># pretty ugly chain of apply&#39;s to be honest, open to suggested improvements</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>ice_imp &lt;-<span class="st"> </span><span class="cf">function</span>(xs) {</span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="co"># get the standard deviation of each ice curve and then avergae them, for each variable</span></span>
<span id="cb33-4"><a href="#cb33-4"></a>  out &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">lapply</span>(xs, <span class="cf">function</span>(x) {<span class="kw">mean</span>(<span class="kw">apply</span>((x[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(x))]), <span class="dv">1</span>,sd))}))</span>
<span id="cb33-5"><a href="#cb33-5"></a>  <span class="kw">colnames</span>(out) &lt;-<span class="st"> </span><span class="kw">sapply</span>(xs, <span class="cf">function</span>(x) x<span class="op">$</span>variable[<span class="dv">1</span>])</span>
<span id="cb33-6"><a href="#cb33-6"></a>  <span class="kw">return</span>((out))</span>
<span id="cb33-7"><a href="#cb33-7"></a>}</span>
<span id="cb33-8"><a href="#cb33-8"></a></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="co"># scale up for entire set of models</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>ices &lt;-<span class="st"> </span><span class="kw">lapply</span>(trained_models, <span class="cf">function</span>(x) <span class="kw">ice_df</span>(x, X_test))</span>
<span id="cb33-11"><a href="#cb33-11"></a>ice_imps &lt;-<span class="st"> </span><span class="kw">lapply</span>(ices, ice_imp)</span>
<span id="cb33-12"><a href="#cb33-12"></a></span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="co"># tidy and plot!</span></span>
<span id="cb33-14"><a href="#cb33-14"></a>ice_imp_df &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, ice_imps)</span>
<span id="cb33-15"><a href="#cb33-15"></a></span>
<span id="cb33-16"><a href="#cb33-16"></a><span class="co"># no need for superassignment!</span></span>
<span id="cb33-17"><a href="#cb33-17"></a>ice_imp_df<span class="op">$</span>model &lt;-<span class="st"> </span><span class="kw">rownames</span>(ice_imp_df)</span>
<span id="cb33-18"><a href="#cb33-18"></a></span>
<span id="cb33-19"><a href="#cb33-19"></a>ice_imp_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">&quot;key&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;value&quot;</span>, <span class="op">-</span>model) <span class="op">%&gt;%</span></span>
<span id="cb33-20"><a href="#cb33-20"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> key, <span class="dt">y =</span> value, <span class="dt">fill =</span> model)) <span class="op">+</span></span>
<span id="cb33-21"><a href="#cb33-21"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb33-22"><a href="#cb33-22"></a><span class="st">  </span><span class="kw">facet_grid</span>(model <span class="op">~</span><span class="st"> </span>. , <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb33-23"><a href="#cb33-23"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb33-24"><a href="#cb33-24"></a><span class="st">  </span><span class="kw">theme_fivethirtyeight</span>() <span class="op">+</span></span>
<span id="cb33-25"><a href="#cb33-25"></a><span class="st">  </span><span class="kw">scale_fill_fivethirtyeight</span>() <span class="op">+</span></span>
<span id="cb33-26"><a href="#cb33-26"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;ICE Variable Importance!&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="iml_files/figure-html/unnamed-chunk-28-1.svg" alt="Ice Importances!" width="960" />
<p class="caption">
Ice Importances!
</p>
</div>
<p>Look at that! The relative importances match up with those calculated both for the random forest and for the linear model, even though we have correlated values!</p>
</div>
</div>
<div id="discussion-1" class="section level2">
<h2>Discussion</h2>
<p>ICE is impressive, and pretty intuitive. However, the combination of ICE and PDP still have one major issue: the inclusion of unrealistic values, of unfloating boats. We will next look at a solution to this (and the rest of the problems we have been facing)!</p>
</div>
</div>
<div id="accumulate-local-effects-ale" class="section level1">
<h1>Accumulate Local Effects (ALE)</h1>
<p>Accumulated Local Effects, otherwise known as ALE, is more or less the most state of the art, <em>fully functional</em> tool we have to understand our models. There are few practical drawbacks of ALE, however there is one big one: it is incredibly challenging to implement in practice. There are only three successful implementations of ALE (to my knowledge): <a href="https://rdrr.io/cran/ALEPlot/">an R package by the author of ALE</a>, <a href="https://github.com/christophM/iml">an R package by the author of a brilliant IML book</a>, and a work in progress <a href="https://github.com/blent-ai/ALEPython">ALE python pacage</a>. Therefor, for the purposes of this blog post, we are not going to go in on the implementation of ALE (this could make up a future blog post - or a series of them), and instead we will focus on understanding it in depth, and of using it. If you are a strong python programmer and would like to work on writing a complete ALE package, tweet me or email me! The code shown here should give you a strong idea of how to formulate ALE on a real dataset.</p>
<div id="understanding-ale" class="section level2">
<h2>Understanding ALE</h2>
<p>To understand ALE, we must first understand the deficiencies of our other methods. The first is that we are using a marginal distribution of our <span class="math inline">\(x_c\)</span> and <span class="math inline">\(x_s\)</span> sets, meaning we are completely ignoring any sort of effects of correlation in our calculations, assuming they are not present. First, let us make two correlated variables to show what we are doing!</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>n &lt;-<span class="st"> </span><span class="dv">200</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>r &lt;-<span class="st"> </span><span class="fl">0.9</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(MASS<span class="op">::</span><span class="kw">mvrnorm</span>(<span class="dt">n=</span>n, <span class="dt">mu =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">Sigma =</span> <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,r,r,<span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>), <span class="dt">empirical =</span> <span class="ot">TRUE</span>))</span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="co"># highly correlated data</span></span>
<span id="cb34-6"><a href="#cb34-6"></a><span class="kw">cor</span>(df)</span></code></pre></div>
<pre><code>#&gt;     x   y
#&gt; x 1.0 0.9
#&gt; y 0.9 1.0</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>p &lt;-<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y))</span>
<span id="cb36-2"><a href="#cb36-2"></a>p</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-29-1.svg" width="672" /></p>
<p>Before we get into the details, first let us take a look the ALE algorithm. We will get into each step and try to understand the intuition later:</p>
<ol style="list-style-type: decimal">
<li>Break the data (<span class="math inline">\((x_s, x_s)\)</span>) into <span class="math inline">\(k\)</span> neighborhoods, bounded by <span class="math inline">\(z_{k-1, s}\)</span> and <span class="math inline">\(z_{k, s}\)</span></li>
<li>For each <span class="math inline">\(x_c\)</span> in the neighborhood, calculate the prediction at the lower bound and the upper bound, <span class="math inline">\(\hat f (z_{k-1, s}, x_s)\)</span> and <span class="math inline">\(\hat f (z_{k, s}, x_s)\)</span></li>
<li>Difference those predictions. This is known as the “local effect”.</li>
<li>Average the local effects in the neighborhood</li>
<li>Accumulate (sum) the average local effects across neighborhoods</li>
<li>Center the accumulated local effects on zero by subtracting the mean, for readability.</li>
</ol>
<div id="step-one-break-it-up" class="section level3">
<h3>Step One: Break it up!</h3>
<p>The first step of ALE is rather intuitive. We want to be dealing in conditional distributions, rather than marginal ones, so we must break up our data into neighborhoods:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># We are following the code example from the IML book, by Christoph Molnar</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="co"># He is much smarter than I and the plots in this section should mostly be credited to him!</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>p &lt;-<span class="st">  </span><span class="kw">ggplot</span>(df) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb37-5"><a href="#cb37-5"></a>    <span class="dt">panel.grid.minor.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb37-6"><a href="#cb37-6"></a>    <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb37-7"><a href="#cb37-7"></a>    <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>()) </span>
<span id="cb37-8"><a href="#cb37-8"></a></span>
<span id="cb37-9"><a href="#cb37-9"></a>grid &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">quantile</span>(<span class="op">-</span><span class="dv">3</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">prob =</span> <span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">6</span>)))</span>
<span id="cb37-10"><a href="#cb37-10"></a>labels &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> grid[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,])</span>
<span id="cb37-11"><a href="#cb37-11"></a>labels<span class="op">$</span>xlab &lt;-<span class="st"> </span>labels<span class="op">$</span>x <span class="op">+</span><span class="st"> </span><span class="fl">.5</span></span>
<span id="cb37-12"><a href="#cb37-12"></a>labels<span class="op">$</span>ylab &lt;-<span class="st"> </span><span class="fl">2.95</span></span>
<span id="cb37-13"><a href="#cb37-13"></a>labels<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="cf">function</span>(x) <span class="kw">paste0</span>(<span class="st">&quot;N(&quot;</span>, x, <span class="st">&quot;)&quot;</span>))</span>
<span id="cb37-14"><a href="#cb37-14"></a></span>
<span id="cb37-15"><a href="#cb37-15"></a>breaks &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">expression</span>(z[<span class="dv">0</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]),  <span class="kw">expression</span>(z[<span class="dv">1</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]), <span class="kw">expression</span>(z[<span class="dv">2</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]), <span class="kw">expression</span>(z[<span class="dv">3</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]),</span>
<span id="cb37-16"><a href="#cb37-16"></a>  <span class="kw">expression</span>(z[<span class="dv">4</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]), <span class="kw">expression</span>(z[<span class="dv">5</span><span class="op">~</span><span class="st">&quot;,&quot;</span><span class="op">~</span>x]))</span>
<span id="cb37-17"><a href="#cb37-17"></a></span>
<span id="cb37-18"><a href="#cb37-18"></a>p2 &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_vline</span>(<span class="dt">data =</span> grid, <span class="kw">aes</span>(<span class="dt">xintercept =</span> x)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb37-19"><a href="#cb37-19"></a><span class="st">      </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>), <span class="dt">labels =</span> breaks, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">-3</span>, <span class="dt">to =</span> <span class="dv">3</span>, <span class="dt">length.out =</span> <span class="dv">6</span>)) <span class="op">+</span></span>
<span id="cb37-20"><a href="#cb37-20"></a><span class="st">      </span><span class="kw">geom_label</span>(<span class="dt">data =</span> labels, <span class="kw">aes</span>(<span class="dt">x =</span> xlab, <span class="dt">y =</span> ylab, <span class="dt">label =</span> labels))</span>
<span id="cb37-21"><a href="#cb37-21"></a>p2</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-30-1.svg" width="672" /></p>
<p>So again, we are interested in the effect of <span class="math inline">\(x\)</span>, so we break the data into <span class="math inline">\(k\)</span> neighborhoods, bounded by <span class="math inline">\(x\)</span>. We define the upper bound as <span class="math inline">\(z_{k, x}\)</span> and the lower bound as <span class="math inline">\(z_{k-1, x}\)</span>, where <span class="math inline">\(k\)</span> is the number of the neighborhood. So in this case, <span class="math inline">\(x\)</span> is our interest set, <span class="math inline">\(x_s\)</span>, and <span class="math inline">\(y\)</span> is our complement, <span class="math inline">\(x_c\)</span></p>
</div>
<div id="step-2-calculate-local-effects" class="section level3">
<h3>Step 2: Calculate Local Effects!</h3>
<p>This is the really interesting and satisfying part. In PDP, we were calculating the average prediction across variables, which allows their effect to mix in with the effect of <span class="math inline">\(x_s\)</span>. With ALE, we are finding a clever way to remove the influence of <span class="math inline">\(x_c\)</span>. How are we going to do this?</p>
<p>We are going to hold <span class="math inline">\(x_c\)</span> constant and going to calculate the change in prediction across <span class="math inline">\(x_s\)</span>, cancelling out the effects of <span class="math inline">\(x_c\)</span>. That is:</p>
<ul>
<li>For each instance of <span class="math inline">\(x_c\)</span> in a neighborhood:
<ul>
<li>push <span class="math inline">\(x_s\)</span> to <span class="math inline">\(z_{k-1, s}\)</span>, and calculate the lower prediction, <span class="math inline">\(\hat f (z_{k-1, s}, x_x)\)</span></li>
<li>push <span class="math inline">\(x_s\)</span> to <span class="math inline">\(z_{k, s}\)</span>, and calculate the upper prediction, <span class="math inline">\(\hat f (z_{k, s}, x_x)\)</span></li>
<li>calculate the difference, <span class="math inline">\(\Delta \hat f = \hat f (z_{k, s}, x_x) - \hat f (z_{k-1, s}, x_x)\)</span></li>
</ul></li>
</ul>
<p>As the number of neighbors approaches infinity, we are getting to the change in prediction with respect to the change in <span class="math inline">\(x_s\)</span>, that is:</p>
<p><span class="math display">\[\widehat {\mathrm{Local Effect}}(x_s) = \frac{\partial} {\partial x_s} \hat f (x_s,x_c) = \lim_{k \to \infty} \Delta \hat f\]</span></p>
<p>Or visually what we are doing:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>ind &lt;-<span class="st"> </span><span class="kw">cut</span>(df<span class="op">$</span>x, grid<span class="op">$</span>x, <span class="dt">include.lowest =</span> T)</span>
<span id="cb38-2"><a href="#cb38-2"></a></span>
<span id="cb38-3"><a href="#cb38-3"></a>data_grouped &lt;-<span class="st"> </span><span class="kw">split</span>(df, ind)</span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="co">#&gt; names(data_grouped)</span></span>
<span id="cb38-5"><a href="#cb38-5"></a><span class="co">#&gt; [1] &quot;[-3,-1.8]&quot;   &quot;(-1.8,-0.6]&quot; &quot;(-0.6,0.6]&quot;  &quot;(0.6,1.8]&quot;   &quot;(1.8,3]&quot;    </span></span>
<span id="cb38-6"><a href="#cb38-6"></a>data_grouped[[<span class="dv">1</span>]]<span class="op">$</span>upper &lt;-<span class="st"> </span><span class="fl">-1.8</span></span>
<span id="cb38-7"><a href="#cb38-7"></a>data_grouped[[<span class="dv">1</span>]]<span class="op">$</span>lower &lt;-<span class="st"> </span><span class="dv">-3</span></span>
<span id="cb38-8"><a href="#cb38-8"></a>data_grouped[[<span class="dv">2</span>]]<span class="op">$</span>upper &lt;-<span class="st"> </span><span class="fl">-0.6</span></span>
<span id="cb38-9"><a href="#cb38-9"></a>data_grouped[[<span class="dv">2</span>]]<span class="op">$</span>lower &lt;-<span class="st"> </span><span class="fl">-1.8</span></span>
<span id="cb38-10"><a href="#cb38-10"></a>data_grouped[[<span class="dv">3</span>]]<span class="op">$</span>upper &lt;-<span class="st"> </span><span class="fl">0.6</span></span>
<span id="cb38-11"><a href="#cb38-11"></a>data_grouped[[<span class="dv">3</span>]]<span class="op">$</span>lower &lt;-<span class="st"> </span><span class="fl">-0.6</span></span>
<span id="cb38-12"><a href="#cb38-12"></a>data_grouped[[<span class="dv">4</span>]]<span class="op">$</span>upper &lt;-<span class="st"> </span><span class="fl">1.8</span></span>
<span id="cb38-13"><a href="#cb38-13"></a>data_grouped[[<span class="dv">4</span>]]<span class="op">$</span>lower &lt;-<span class="st"> </span><span class="fl">0.6</span></span>
<span id="cb38-14"><a href="#cb38-14"></a>data_grouped[[<span class="dv">5</span>]]<span class="op">$</span>upper &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>data_grouped[[<span class="dv">5</span>]]<span class="op">$</span>lower &lt;-<span class="st"> </span><span class="fl">1.8</span></span>
<span id="cb38-16"><a href="#cb38-16"></a></span>
<span id="cb38-17"><a href="#cb38-17"></a>data_grouped &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, data_grouped)</span>
<span id="cb38-18"><a href="#cb38-18"></a><span class="co">#&gt; names(data_grouped)</span></span>
<span id="cb38-19"><a href="#cb38-19"></a><span class="co">#&gt; [1] &quot;x&quot;     &quot;y&quot;     &quot;upper&quot; &quot;lower&quot;</span></span>
<span id="cb38-20"><a href="#cb38-20"></a>data_grouped &lt;-<span class="st"> </span><span class="kw">rename</span>(data_grouped, <span class="dt">initial =</span> x)</span>
<span id="cb38-21"><a href="#cb38-21"></a>data_grouped &lt;-<span class="st"> </span><span class="kw">gather</span>(data_grouped, <span class="dt">key =</span> <span class="st">&quot;state&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;loc&quot;</span>, <span class="op">-</span>y)</span>
<span id="cb38-22"><a href="#cb38-22"></a></span>
<span id="cb38-23"><a href="#cb38-23"></a></span>
<span id="cb38-24"><a href="#cb38-24"></a><span class="kw">ggplot</span>(data_grouped) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> loc, <span class="dt">y =</span> y)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb38-25"><a href="#cb38-25"></a><span class="st">      </span><span class="kw">geom_vline</span>(<span class="dt">data =</span> grid, <span class="kw">aes</span>(<span class="dt">xintercept =</span> x)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb38-26"><a href="#cb38-26"></a><span class="st">      </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>), <span class="dt">labels =</span> breaks, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">-3</span>, <span class="dt">to =</span> <span class="dv">3</span>, <span class="dt">length.out =</span> <span class="dv">6</span>)) <span class="op">+</span></span>
<span id="cb38-27"><a href="#cb38-27"></a><span class="st">      </span><span class="kw">geom_label</span>(<span class="dt">data =</span> labels, <span class="kw">aes</span>(<span class="dt">x =</span> xlab, <span class="dt">y =</span> ylab, <span class="dt">label =</span> labels)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb38-28"><a href="#cb38-28"></a><span class="st">      </span><span class="kw">transition_states</span>(state, <span class="dt">transition_length =</span> <span class="dv">1</span>, <span class="dt">state_length =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="mover.gif" style="display: block; margin: auto;" /></p>
<p>So again, we are moving the entire neighborhood to the lower bound, making a prediction, moving the entire neighborhood to the upper bound, making a prediction, differencing those, and averaging those differences. We are averaging them weighted by the conditional distribution of of <span class="math inline">\(x_c\)</span> in this case, or more formally: <span class="math display">\[
E \left[ \hat {\mathrm{local effects}}(x_s, x_c)\mid x_s = z_s \right] =
\int \mathbb{p}_{c \mid s}(x_c\mid z_{s})\hat {\mathrm{local effects}}(z_{ s}, x_s)dx_c
\]</span></p>
</div>
<div id="step-3-accumulate-and-center" class="section level3">
<h3>Step 3: Accumulate and Center</h3>
<p>We have made it out of the hairy part, understanding wise. All that is left now is to sum the local effects through each neighborhood, which can be mathematically written as just an integral over the neighborhoods:</p>
<p><span class="math display">\[
\mathrm{ALE}(x_s) = \int_{z_s, 0}^{x_S} E \left[ \hat {\mathrm{local effects}}(x_s, x_c)\mid x_s = z_s \right] dz_s - D
\]</span></p>
<p>Where D is some constant which centers the the ALE on 0 (typically the mean).</p>
</div>
<div id="estimating-ale" class="section level3">
<h3>Estimating ALE</h3>
<p>We must now sadly leave the world of the infinite world of integrals and fun and enter the real world of sums and estimation. We will now talk mathematically about estimating ALE, which is again, not too too hard:</p>
<p>First, we calculate the local effects for each variable in the neighborhood:</p>
<p><span class="math display">\[\Delta f =  \left[ \hat f(z_{k,j}, x^{(i)}_{\setminus j}) - \hat f(z_{k-1,j}, x^{(i)}_{\setminus j}) \right]\]</span></p>
<p>Next, we average those through the neighborhood (note the notation change, just as we did for PDP):</p>
<p><span class="math display">\[
\frac{1}{n_j(k)} \sum_{i:x_j^{(i)} \in N_j(k)}\left[ \hat f(z_{k,j}, x^{(i)}_{\setminus j}) - \hat f(z_{k-1,j}, x^{(i)}_{\setminus j}) \right]
\]</span></p>
<p>Then we accumulate (sum) those throughout neighborhoods:</p>
<p>$$</p>
<p>{}(x_{j}) = ^{k_j(x)} <em>{k=1}  </em>{i:x_j^{(i)} N_j(k)}$$</p>
<p>Finally, we subtract the mean to center the ALE on zero!</p>
<p><span class="math display">\[
\mathrm{ALE}(x) ={\widetilde {\mathrm{ALE}}}(x_j)- \frac{1}{n} \sum_{i=1}^n {\widetilde {\mathrm{ALE}}}(x_j^{(i)})
\]</span></p>
</div>
</div>
<div id="ale-in-practice" class="section level2">
<h2>ALE in practice</h2>
<p>As I mentioned before, we are not going to implement ALE ourselves in this already very long blog post, instead, we will look at the basic usage of ALE, its interpretation, and what I think to be some clever uses</p>
<p>First, lets load in the necessary library:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">library</span>(iml)</span>
<span id="cb39-2"><a href="#cb39-2"></a></span>
<span id="cb39-3"><a href="#cb39-3"></a>forest &lt;-<span class="st"> </span>trained_models[[<span class="dv">3</span>]]</span></code></pre></div>
<p>Next, we are going to simply calculate ALE!</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>model &lt;-<span class="st"> </span>Predictor<span class="op">$</span><span class="kw">new</span>(forest, <span class="dt">data =</span> X, <span class="dt">y =</span> y<span class="op">$</span>crew)</span>
<span id="cb40-2"><a href="#cb40-2"></a></span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="co"># calculate effects!</span></span>
<span id="cb40-4"><a href="#cb40-4"></a>effect &lt;-<span class="st"> </span>FeatureEffects<span class="op">$</span><span class="kw">new</span>(model)</span>
<span id="cb40-5"><a href="#cb40-5"></a></span>
<span id="cb40-6"><a href="#cb40-6"></a><span class="co"># its that easy!</span></span>
<span id="cb40-7"><a href="#cb40-7"></a><span class="kw">plot</span>(effect)</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-34-1.svg" width="672" /></p>
<p>So, how do we read this? It is very similar to the partial dependence plots, except we think in terms of average prediction. So, if we look at the passengers plot, we are saying that if passengers = 20, the prediction will be 0.5 higher than normal! It is pretty easy to interpret, but it is very powerful. Again, the nice thing about ALE is that we <strong><em>know</em></strong> these variables are in complete isolation of each other, with no sneaky interactions coming in or out. If you are interested in ALE for categorical variables, which is possible, I highly suggest reading <a href="https://arxiv.org/pdf/1612.08468.pdf">the original paper</a></p>
<p>We can also do ALE in 2 dimensions. What does this show us? This shows, amazingly, the effect of <strong><em>purely the interaction</em></strong> between two variables! This is incredibly powerful. Lets check it out!</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># note we are using Effect not Effects this time</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>ALE &lt;-<span class="st"> </span>FeatureEffect<span class="op">$</span><span class="kw">new</span>(model, <span class="kw">c</span>(<span class="st">&quot;Tonnage&quot;</span>,<span class="st">&quot;cabins&quot;</span>))</span>
<span id="cb41-3"><a href="#cb41-3"></a><span class="kw">plot</span>(ALE)</span></code></pre></div>
<p><img src="iml_files/figure-html/unnamed-chunk-35-1.svg" width="672" style="display: block; margin: auto;" /></p>
<p>Well what does this tell us? This tells us many things! First, we have 100% guaranteed proof that our random forest is modeling an interaction between Tonnage and Cabins, and second, we know exactly what the effect of that interaction is. This is amazing! We can actually use these effects to view how a single prediction is built, which is in my opinion amazing. Before I end this blog post, I will show how to do this:</p>
<div id="anatomy-of-a-prediction" class="section level3">
<h3>Anatomy of a Prediction</h3>
<p>To understand how our prediction is actually made, we first want to make up a new instance of data, as our test case. We will say that this test case represents the wonderful ship, the S.S. David:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="kw">set.seed</span>(<span class="dv">33</span>)</span>
<span id="cb42-2"><a href="#cb42-2"></a>(david &lt;-<span class="st"> </span>X[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(X), <span class="dv">1</span>),])</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Age"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Tonnage"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["passengers"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["length"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["cabins"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["passenger_density"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"10","2":"86","3":"21.14","4":"9.6","5":"10.56","6":"40.68","_rn_":"42"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># also grab the predictions, to get the average prediction</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>preds &lt;-<span class="st"> </span><span class="kw">predict</span>(forest, X)</span>
<span id="cb43-3"><a href="#cb43-3"></a>pmean &lt;-<span class="st"> </span><span class="kw">mean</span>(preds)</span></code></pre></div>
<p>Next, we can hack together some ugly code to get the ALE values from the ALE project. Note, I am not proud of this code, but it certainly works!</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># get the results from the effect object for a single feature:</span></span>
<span id="cb44-2"><a href="#cb44-2"></a></span>
<span id="cb44-3"><a href="#cb44-3"></a>getALE &lt;-<span class="st"> </span><span class="cf">function</span>(feat, val) {</span>
<span id="cb44-4"><a href="#cb44-4"></a>  out &lt;-<span class="st"> </span>effect<span class="op">$</span>results[[feat]][<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="op">%&gt;%</span><span class="st">  </span>data.frame</span>
<span id="cb44-5"><a href="#cb44-5"></a>  outdt &lt;-<span class="st"> </span>out<span class="op">$</span>.feature <span class="op">%&gt;%</span><span class="st"> </span>data.frame</span>
<span id="cb44-6"><a href="#cb44-6"></a>  <span class="kw">names</span>(outdt) =<span class="st"> &quot;x&quot;</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>  outdt<span class="op">$</span>val &lt;-<span class="st"> </span>val</span>
<span id="cb44-8"><a href="#cb44-8"></a>  mindist &lt;-<span class="st"> </span><span class="kw">abs</span>(outdt<span class="op">$</span>x <span class="op">-</span><span class="st"> </span>outdt<span class="op">$</span>val)</span>
<span id="cb44-9"><a href="#cb44-9"></a>  <span class="co"># find the closest effect (it is a grid after all)</span></span>
<span id="cb44-10"><a href="#cb44-10"></a>  nn &lt;-<span class="st"> </span>outdt<span class="op">$</span>x[<span class="kw">which.min</span>(mindist)]</span>
<span id="cb44-11"><a href="#cb44-11"></a>  res &lt;-<span class="st"> </span>effect<span class="op">$</span>results[[feat]][<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb44-12"><a href="#cb44-12"></a><span class="st">    </span><span class="kw">filter</span>(.feature <span class="op">==</span><span class="st"> </span>nn) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb44-13"><a href="#cb44-13"></a><span class="st">    </span><span class="kw">select</span>(.ale) </span>
<span id="cb44-14"><a href="#cb44-14"></a>  <span class="kw">return</span>(<span class="kw">as.numeric</span>(res))</span>
<span id="cb44-15"><a href="#cb44-15"></a></span>
<span id="cb44-16"><a href="#cb44-16"></a>  }</span></code></pre></div>
<p>Next, we want to scale this up over all variables (this is the way I approach a lot of programming problems, if thats not apparent).</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>generalEffect &lt;-<span class="st"> </span><span class="cf">function</span>(boat) {</span>
<span id="cb45-2"><a href="#cb45-2"></a>  p  &lt;-<span class="st"> </span>pmean</span>
<span id="cb45-3"><a href="#cb45-3"></a>  nms &lt;-<span class="st"> </span><span class="kw">names</span>(boat)</span>
<span id="cb45-4"><a href="#cb45-4"></a>  ales &lt;-<span class="st"> </span><span class="kw">lapply</span>(nms, <span class="cf">function</span>(x) <span class="kw">getALE</span>(x, boat[[x]]))</span>
<span id="cb45-5"><a href="#cb45-5"></a>  <span class="kw">return</span>(ales)</span>
<span id="cb45-6"><a href="#cb45-6"></a>}</span>
<span id="cb45-7"><a href="#cb45-7"></a></span>
<span id="cb45-8"><a href="#cb45-8"></a><span class="co"># ges for generaleffects</span></span>
<span id="cb45-9"><a href="#cb45-9"></a>ges &lt;-<span class="st"> </span><span class="kw">generalEffect</span>(david)</span>
<span id="cb45-10"><a href="#cb45-10"></a><span class="kw">names</span>(ges) &lt;-<span class="st"> </span><span class="kw">names</span>(david)</span></code></pre></div>
<p>Next, lets also get the interaction between cabins and tonnage, for fun! Getting all interactions is left as an excercise for the reader ;)</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>getInteractALE &lt;-<span class="st"> </span><span class="cf">function</span>(boat) {</span>
<span id="cb46-2"><a href="#cb46-2"></a>  t &lt;-<span class="st"> </span>boat<span class="op">$</span>Tonnage </span>
<span id="cb46-3"><a href="#cb46-3"></a>  c &lt;-<span class="st"> </span>boat<span class="op">$</span>cabins</span>
<span id="cb46-4"><a href="#cb46-4"></a>  tdist &lt;-<span class="st">  </span><span class="kw">abs</span>(ALE<span class="op">$</span>results<span class="op">$</span>Tonnage <span class="op">-</span><span class="st"> </span>t) </span>
<span id="cb46-5"><a href="#cb46-5"></a>  cdist &lt;-<span class="st">  </span><span class="kw">abs</span>(ALE<span class="op">$</span>results<span class="op">$</span>cabins <span class="op">-</span><span class="st"> </span>c) </span>
<span id="cb46-6"><a href="#cb46-6"></a>  tnn &lt;-<span class="st"> </span>ALE<span class="op">$</span>results<span class="op">$</span>Tonnage[<span class="kw">which.min</span>(tdist)]</span>
<span id="cb46-7"><a href="#cb46-7"></a>  cnn &lt;-<span class="st"> </span>ALE<span class="op">$</span>results<span class="op">$</span>cabins[<span class="kw">which.min</span>(cdist)]</span>
<span id="cb46-8"><a href="#cb46-8"></a>  res &lt;-<span class="st"> </span>ALE<span class="op">$</span>results <span class="op">%&gt;%</span></span>
<span id="cb46-9"><a href="#cb46-9"></a><span class="st">    </span><span class="kw">filter</span>(Tonnage <span class="op">==</span><span class="st"> </span>tnn <span class="op">&amp;</span><span class="st"> </span>cabins <span class="op">==</span><span class="st"> </span>cnn) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(.ale)</span>
<span id="cb46-10"><a href="#cb46-10"></a>    <span class="kw">return</span>(<span class="kw">as.numeric</span>(res))</span>
<span id="cb46-11"><a href="#cb46-11"></a>}</span>
<span id="cb46-12"><a href="#cb46-12"></a></span>
<span id="cb46-13"><a href="#cb46-13"></a>ges<span class="op">$</span>interact &lt;-<span class="st"> </span><span class="kw">getInteractALE</span>(david)</span>
<span id="cb46-14"><a href="#cb46-14"></a>(ges &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(ges))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Age"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Tonnage"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["passengers"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["length"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["cabins"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["passenger_density"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["interact"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.01764024","2":"0.2307605","3":"0.43945","4":"0.65201","5":"0.3586106","6":"0.06448928","7":"-0.03101367"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Next, lets build the prediction! This is pretty simple, we are going to add the mean to one column, then add in the effects of the other columns. This is best done with a for loop.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>ges &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="st">&quot;mean&quot;</span> =<span class="st"> </span>pmean, ges)</span>
<span id="cb47-2"><a href="#cb47-2"></a></span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(ges)) {</span>
<span id="cb47-4"><a href="#cb47-4"></a>  ges[i] &lt;-<span class="st"> </span>ges[i] <span class="op">+</span><span class="st"> </span>ges[i<span class="dv">-1</span>] </span>
<span id="cb47-5"><a href="#cb47-5"></a>}</span>
<span id="cb47-6"><a href="#cb47-6"></a></span>
<span id="cb47-7"><a href="#cb47-7"></a>ge_gather &lt;-<span class="st"> </span><span class="kw">gather</span>(ges, <span class="dt">key =</span> <span class="st">&quot;variable&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;prediction&quot;</span>) </span>
<span id="cb47-8"><a href="#cb47-8"></a><span class="co"># for our lovely animation</span></span>
<span id="cb47-9"><a href="#cb47-9"></a>ge_gather<span class="op">$</span>idx &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(ge_gather)</span>
<span id="cb47-10"><a href="#cb47-10"></a></span>
<span id="cb47-11"><a href="#cb47-11"></a>ge_gather<span class="op">$</span>variable &lt;-<span class="st"> </span><span class="kw">factor</span>(ge_gather<span class="op">$</span>variable, <span class="dt">levels =</span> ge_gather<span class="op">$</span>variable)</span>
<span id="cb47-12"><a href="#cb47-12"></a>ge_gather <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span>variable, <span class="dt">y =</span> prediction, <span class="dt">color =</span> variable), <span class="dt">size =</span> <span class="dv">5</span>) <span class="op">+</span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_few</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Prediction&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_hc</span>() <span class="op">+</span><span class="st">  </span><span class="kw">transition_reveal</span>(idx) </span></code></pre></div>
<p><img src="anim.gif" style="display: block; margin: auto;" /></p>
<p>And there we have it! We have actually built and looked at the mechanics of our prediction. The amazing part about these tools, is we can use essentially any model that makes a prediction, in any language, and look inside and understand what’s going on. Please note, because I did not include the other interactive effects, the final value of our ALE prediction is actually slightly off, but we can see that in general, it is correct. This plot was inspired by the break-down plots discussed <a href="https://pbiecek.github.io/PM_VEE/iBreakDown.html">here</a>. For a bit more on ALE, I would reccommend reading the <a href="https://arxiv.org/pdf/1612.08468.pdf">original paper</a>, the IML book referenced below, and <a href="https://pbiecek.github.io/PM_VEE/accumulatedLocalProfiles.html">this chapter (or whole book)</a>.</p>
</div>
</div>
</div>
<div id="what-about-shap-and-lime" class="section level1">
<h1>What About SHAP and LIME?</h1>
<p>SHAP and LIME are two other well known IML tools that are used often. However, <a href="https://arxiv.org/abs/1911.02508v1">a paper</a> has recently come out that calls them into question, really for the same reason we questioned permutation importance, partial dependence, and ICE: unrealistic observations. This paper went so far as to train a truly biased model and show how it manages to fool both LIME and SHAP. Until this is resolved, I think our best bet is to use ALE in general, but we have only scratched the surface of IML tools in this blog post. This leads us to our next topic: resources</p>
</div>
<div id="software-resources-for-iml" class="section level1">
<h1>Software Resources for IML</h1>
<ul>
<li><a href="https://github.com/ModelOriented/DrWhy">drWhy.AI</a>
<ul>
<li>A collection of AMAZING R-based tools for interpretable ML. Note that these tools even work out of the box with sklearn and Keras, highly recommended</li>
</ul></li>
<li><a href="https://github.com/christophM/iml">iml R package</a>
<ul>
<li>Terrific R package for interpretable machine learning. Highly recommended.</li>
</ul></li>
<li><a href="https://github.com/blent-ai/ALEPython">ALEpython</a>
<ul>
<li>Python package for ALE, contribute if you can!!</li>
</ul></li>
<li><a href="https://www.scikit-yb.org/en/latest/quickstart.html">yellowbrick</a>
<ul>
<li>Amazing python tool for model visualizations</li>
</ul></li>
<li><a href="https://eli5.readthedocs.io/en/latest/">ELI5</a>
<ul>
<li>Permutation Importance and LIME in python. Excellent tutorials</li>
</ul></li>
</ul>
</div>
<div id="books-and-papers-which-were-valuable-to-me" class="section level1">
<h1>Books and papers which were valuable to me</h1>
<ul>
<li><a href="https://christophm.github.io/interpretable-ml-book/ale.html">Amazing IML book</a>
<ul>
<li>I refer to this constantly, to me it is the IML bible</li>
</ul></li>
<li><a href="https://arxiv.org/pdf/1612.08468.pdf">ALE original paper</a></li>
<li><a href="https://arxiv.org/abs/1805.04755">PDP and ICE importance paper (easy read)</a></li>
<li><a href="https://pbiecek.github.io/PM_VEE/introduction.html">Another very nice IML book</a></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
